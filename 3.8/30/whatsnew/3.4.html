
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>What&#39;s New In Python 3.4 &#8212; Python 3.8.3rc1 ドキュメント</title>
    <link rel="stylesheet" href="../_static/pydoctheme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    
    <link rel="search" type="application/opensearchdescription+xml"
          title="Python 3.8.3rc1 ドキュメント 内を検索"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="このドキュメントについて" href="../about.html" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="copyright" title="著作権" href="../copyright.html" />
    <link rel="next" title="What&#39;s New In Python 3.3" href="3.3.html" />
    <link rel="prev" title="What&#39;s New In Python 3.5" href="3.5.html" />
    <link rel="canonical" href="https://docs.python.org/3/whatsnew/3.4.html" />
    
      
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>

    <link rel="shortcut icon" type="image/png" href="../_static/py.png" />
    
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    
     


  </head><body>
  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="3.3.html" title="What&#39;s New In Python 3.3"
             accesskey="N">次へ</a> |</li>
        <li class="right" >
          <a href="3.5.html" title="What&#39;s New In Python 3.5"
             accesskey="P">前へ</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <a href="../index.html">3.8.3rc1 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">What's New in Python</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="クイック検索" type="text" name="q" />
          <input type="submit" value="検索" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>    

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-s-new-in-python-3-4">
<h1>What's New In Python 3.4<a class="headerlink" href="#what-s-new-in-python-3-4" title="このヘッドラインへのパーマリンク">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">著者:</th><td class="field-body">R. David Murray &lt;<a class="reference external" href="mailto:rdmurray&#37;&#52;&#48;bitdance&#46;com">rdmurray<span>&#64;</span>bitdance<span>&#46;</span>com</a>&gt; (編集者)</td>
</tr>
</tbody>
</table>
<p>この記事では 3.3 と比較した Python 3.4 の新機能を解説します。 Python 3.4 は2014年3月16日にリリースされました。全詳細については <a class="reference external" href="https://docs.python.jp/3.4/whatsnew/changelog.html">変更履歴</a> をご覧ください。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<p class="last"><span class="target" id="index-123"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0429"><strong>PEP 429</strong></a> -- Python 3.4 リリーススケジュール</p>
</div>
<div class="section" id="summary-release-highlights">
<h2>概要 -- リリースハイライト<a class="headerlink" href="#summary-release-highlights" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>新たな文法機能:</p>
<ul class="simple">
<li>Python 3.4 に追加された新しい文法機能はありません。</li>
</ul>
<p>その他の新しい機能:</p>
<ul class="simple">
<li><a class="reference internal" href="#whatsnew-pep-453"><span class="std std-ref">pip が常に利用可能であることが保障されるようになりました</span></a> (<span class="target" id="index-124"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a>)。</li>
<li><a class="reference internal" href="#whatsnew-pep-446"><span class="std std-ref">新しく作成されたファイル記述子が継承不可能 （non-inheritable） になりました</span></a> (<span class="target" id="index-125"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0446"><strong>PEP 446</strong></a>)。</li>
<li><a class="reference internal" href="#whatsnew-isolated-mode"><span class="std std-ref">隔離モード (isolated mode)</span></a> の為のコマンドラインオプション (<a class="reference external" href="https://bugs.python.org/issue16499">bpo-16499</a>)。</li>
<li>非テキストエンコーディングでの <a class="reference internal" href="#codec-handling-improvements"><span class="std std-ref">Codec 処理の改良</span></a>  (複数の issue に関係).</li>
<li>インポートシステムのための <a class="reference internal" href="#whatsnew-pep-451"><span class="std std-ref">ModuleSpec 型</span></a>  (<span class="target" id="index-126"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0451"><strong>PEP 451</strong></a>).  (インポーターの作者に影響します)</li>
<li><a class="reference internal" href="../library/marshal.html#module-marshal" title="marshal: Convert Python objects to streams of bytes and back (with different constraints)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">marshal</span></code></a> フォーマットが <a class="reference internal" href="#whatsnew-marshal-3"><span class="std std-ref">よりコンパクトで効率的に</span></a> なりました  (<a class="reference external" href="https://bugs.python.org/issue16475">bpo-16475</a>)。</li>
</ul>
<p>新たなライブラリモジュール:</p>
<ul class="simple">
<li><a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a>: <a class="reference internal" href="#whatsnew-asyncio"><span class="std std-ref">非同期 IO のための新たな暫定 API</span></a> (<span class="target" id="index-127"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3156"><strong>PEP 3156</strong></a>)。</li>
<li><a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a>: <a class="reference internal" href="#whatsnew-ensurepip"><span class="std std-ref">pip インストーラのブートストラップ</span></a> (<span class="target" id="index-128"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a>)。</li>
<li><a class="reference internal" href="../library/enum.html#module-enum" title="enum: Implementation of an enumeration class."><code class="xref py py-mod docutils literal notranslate"><span class="pre">enum</span></code></a>: <a class="reference internal" href="#whatsnew-enum"><span class="std std-ref">列挙型のサポート</span></a> (<span class="target" id="index-129"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0435"><strong>PEP 435</strong></a>)。</li>
<li><a class="reference internal" href="../library/pathlib.html#module-pathlib" title="pathlib: Object-oriented filesystem paths"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib</span></code></a>: <a class="reference internal" href="#whatsnew-pathlib"><span class="std std-ref">オブジェクト指向のファイルシステムパス</span></a> (<span class="target" id="index-130"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0428"><strong>PEP 428</strong></a>)。</li>
<li><a class="reference internal" href="../library/selectors.html#module-selectors" title="selectors: High-level I/O multiplexing."><code class="xref py py-mod docutils literal notranslate"><span class="pre">selectors</span></code></a>: <a class="reference internal" href="#whatsnew-selectors"><span class="std std-ref">高水準で効率的な I/O の多重化</span></a>、<a class="reference internal" href="../library/select.html#module-select" title="select: Wait for I/O completion on multiple streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code></a> モジュールプリミティブを基にしています (<span class="target" id="index-131"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3156"><strong>PEP 3156</strong></a> の一部)。</li>
<li><a class="reference internal" href="../library/statistics.html#module-statistics" title="statistics: Mathematical statistics functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">statistics</span></code></a>: 基礎的な <a class="reference internal" href="#whatsnew-statistics"><span class="std std-ref">数値的に安定な統計ライブラリ</span></a> (<span class="target" id="index-132"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0450"><strong>PEP 450</strong></a>)。</li>
<li><a class="reference internal" href="../library/tracemalloc.html#module-tracemalloc" title="tracemalloc: Trace memory allocations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracemalloc</span></code></a>: <a class="reference internal" href="#whatsnew-tracemalloc"><span class="std std-ref">Python のメモリ割り当てのトレース</span></a> (<span class="target" id="index-133"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0454"><strong>PEP 454</strong></a>)。</li>
</ul>
<p>大幅に改善されたライブラリモジュール:</p>
<ul class="simple">
<li><a class="reference internal" href="../library/functools.html#module-functools" title="functools: Higher-order functions and operations on callable objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">functools</span></code></a> の <a class="reference internal" href="#whatsnew-singledispatch"><span class="std std-ref">シングルディスパッチジェネリック関数</span></a> (<span class="target" id="index-134"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0443"><strong>PEP 443</strong></a>)。</li>
<li><a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> の新しい <a class="reference internal" href="#whatsnew-protocol-4"><span class="std std-ref">プロトコル 4</span></a> (<span class="target" id="index-135"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3154"><strong>PEP 3154</strong></a>).</li>
<li><a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> が <a class="reference internal" href="#whatsnew-multiprocessing-no-fork"><span class="std std-ref">Unix で os.fork の使用を避けるオプションを持つようになりました</span></a> (<a class="reference external" href="https://bugs.python.org/issue8713">bpo-8713</a>)。</li>
<li><a class="reference internal" href="../library/email.html#module-email" title="email: Package supporting the parsing, manipulating, and generating email messages."><code class="xref py py-mod docutils literal notranslate"><span class="pre">email</span></code></a> にサブモジュール <a class="reference internal" href="../library/email.contentmanager.html#module-email.contentmanager" title="email.contentmanager: Storing and Retrieving Content from MIME Parts"><code class="xref py py-mod docutils literal notranslate"><span class="pre">contentmanager</span></code></a> が追加され、また、 <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Message</span></code></a> のサブクラス (<code class="xref py py-class docutils literal notranslate"><span class="pre">EmailMessage</span></code>) が追加されました。これは <a class="reference internal" href="#whatsnew-email-contentmanager"><span class="std std-ref">MIME 処理を簡単にします</span></a> 。 (<a class="reference external" href="https://bugs.python.org/issue18891">bpo-18891</a>)</li>
<li><a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> と <a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> が以前よりも遥かに幅広い種類の callable オブジェクトを正しくイントロスペクション出来るようになり、これは Python <a class="reference internal" href="../library/functions.html#help" title="help"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> システムを改善することになりました。</li>
<li><a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> モジュール API は安定だと宣言されました。</li>
</ul>
<p>セキュリティの改善:</p>
<ul class="simple">
<li><a class="reference internal" href="#whatsnew-pep-456"><span class="std std-ref">安全で取り替え可能なハッシュアルゴリズム</span></a> (<span class="target" id="index-136"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0456"><strong>PEP 456</strong></a>)。</li>
<li>ファイル記述子が子プロセスにリークするのを防ぐために <a class="reference internal" href="#whatsnew-pep-446"><span class="std std-ref">新しく作成されたファイル記述子が継承不可になりました</span></a> (<span class="target" id="index-137"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0446"><strong>PEP 446</strong></a>)。</li>
<li><a class="reference internal" href="#whatsnew-isolated-mode"><span class="std std-ref">隔離モード (isolated mode)</span></a> のための新たなコマンドラインオプション (<a class="reference external" href="https://bugs.python.org/issue16499">bpo-16499</a>)。</li>
<li><a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> が <a class="reference internal" href="#whatsnew-multiprocessing-no-fork"><span class="std std-ref">Unix で os.fork の使用を避けるオプション</span></a> を持つようになりました。
子プロセスとのデータ共有を避けるため <em>spawn</em> と <em>forkserver</em> はより安全です。</li>
<li>Windows での <a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> 子プロセスはもはや、必要なものを除いて親の継承可能なハンドルを継承しません。</li>
<li>新たな関数 <a class="reference internal" href="../library/hashlib.html#hashlib.pbkdf2_hmac" title="hashlib.pbkdf2_hmac"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.pbkdf2_hmac()</span></code></a> は <a class="reference external" href="https://en.wikipedia.org/wiki/PBKDF2">PKCS#5 パスワードベースの鍵導出関数２</a> を提供します。</li>
<li><a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> での <a class="reference internal" href="#whatsnew-tls-11-12"><span class="std std-ref">TLSv1.1、 TLSv1.2 サポート</span></a> の追加。</li>
<li><a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> での <a class="reference internal" href="#whatsnew34-win-cert-store"><span class="std std-ref">Windows のシステム証明書ストアよりの証明書抽出サポート</span></a> の追加。</li>
<li><a class="reference internal" href="../library/ssl.html#module-ssl" title="ssl: TLS/SSL wrapper for socket objects"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ssl</span></code></a> での <a class="reference internal" href="#whatsnew34-sni"><span class="std std-ref">サーバサイド SNI (Server Name Indication) サポート</span></a> の追加。</li>
<li><a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code></a> クラスに <a class="reference internal" href="#whatsnew34-sslcontext"><span class="std std-ref">多数の改善</span></a> がなされました。</li>
<li>SSL をサポートする全ての標準ライブラリモジュールは今や、ホスト名のマッチング (<a class="reference internal" href="../library/ssl.html#ssl.match_hostname" title="ssl.match_hostname"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.match_hostname()</span></code></a>) と証明書失効リスト (CRLs=certification revocation lists。 <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.load_verify_locations" title="ssl.SSLContext.load_verify_locations"><code class="xref py py-func docutils literal notranslate"><span class="pre">ssl.SSLContext.load_verify_locations()</span></code></a> 参照) を含むサーバ証明書検証をサポートします。</li>
</ul>
<p>CPython の実装の改善:</p>
<ul class="simple">
<li><a class="reference internal" href="#whatsnew-pep-442"><span class="std std-ref">オブジェクトの安全なファイナライゼーション</span></a> (<span class="target" id="index-138"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0442"><strong>PEP 442</strong></a>)。</li>
<li><span class="target" id="index-139"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0442"><strong>PEP 442</strong></a> を活用することで、ほとんどのケースで <a class="reference internal" href="#whatsnew-pep-442"><span class="std std-ref">モジュールのグローバルがファイナライゼーション中に None がセットされることはなくなりました</span></a>  (<a class="reference external" href="https://bugs.python.org/issue18214">bpo-18214</a>)。</li>
<li><a class="reference internal" href="#whatsnew-pep-445"><span class="std std-ref">設定可能なメモリアロケータ</span></a> (<span class="target" id="index-140"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0445"><strong>PEP 445</strong></a>)。</li>
<li><a class="reference internal" href="#whatsnew-pep-436"><span class="std std-ref">Argument Clinic</span></a> (<span class="target" id="index-141"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0436"><strong>PEP 436</strong></a>)。</li>
</ul>
<p>以降は、たくさんのほかの小さな改善、CPython での最適化、非推奨リスト、潜在的な移植性問題を含む、ユーザ向けの変更の包括的なリストになっています。</p>
</div>
<div class="section" id="new-features">
<h2>新しい機能<a class="headerlink" href="#new-features" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pep-453-explicit-bootstrapping-of-pip-in-python-installations">
<span id="whatsnew-pep-453"></span><h3>PEP 453: Python インストール時の PIP の明示的なブートストラッピング<a class="headerlink" href="#pep-453-explicit-bootstrapping-of-pip-in-python-installations" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="section" id="bootstrapping-pip-by-default">
<h4>デフォルトでの pip のブートストラッピング<a class="headerlink" href="#bootstrapping-pip-by-default" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>新しい <a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> モジュール(<span class="target" id="index-142"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a> で定義されています)は標準のクロスプラットフォームのメカニズムで、Python インストールと仮想環境に pip インストーラをブートストラップします。Python 3.4.0 に含まれる <code class="docutils literal notranslate"><span class="pre">pip</span></code> のバージョンは <code class="docutils literal notranslate"><span class="pre">pip</span></code> 1.5.4 で、将来の 3.4.x メンテナンスリリースでは Python のリリース候補の作成時点で入手出来る最新バージョンの <code class="docutils literal notranslate"><span class="pre">pip</span></code> がバンドルされる予定です。</p>
<p>デフォルトでは <code class="docutils literal notranslate"><span class="pre">pipX</span></code> , <code class="docutils literal notranslate"><span class="pre">pipX.Y</span></code> コマンドが全てのプラットフォームに、Python パッケージ <code class="docutils literal notranslate"><span class="pre">pip</span></code> とその依存物とともにインストールされます(X. Y はインストールされる Python のバージョン)。Windows 実環境と全てのプラットフォームの仮想環境には、バージョンが名前に付与されない <code class="docutils literal notranslate"><span class="pre">pip</span></code> コマンドもインストールされます。ほかのプラットフォームでは、システムワイドでバージョンが名前に付与されない <code class="docutils literal notranslate"><span class="pre">pip</span></code> コマンドは、典型的には Python 2 を別途インストールした際のものを指しています。</p>
<p><code class="docutils literal notranslate"><span class="pre">pyvenv</span></code> コマンドラインユーティリティと <a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> モジュールは、仮想環境で <code class="docutils literal notranslate"><span class="pre">pip</span></code> が使えるようにするために <a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> モジュールを使います。
コマンドラインユーティリティを使う際は <code class="docutils literal notranslate"><span class="pre">pip</span></code> はデフォルトでインストールされます。
<a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> モジュールの <a class="reference internal" href="../library/venv.html#venv-api"><span class="std std-ref">API</span></a> を使う際は、 <code class="docutils literal notranslate"><span class="pre">pip</span></code> のインストールは明示的に要求しなければなりません。</p>
<p>CPython の <a class="reference internal" href="../using/unix.html#building-python-on-unix"><span class="std std-ref">source builds on POSIX systems</span></a> では <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">altinstall</span></code> コマンドはデフォルトで <code class="docutils literal notranslate"><span class="pre">pip</span></code> ブートストラップを行います。この振る舞いは configure のオプションを変更して Makefile を作ることで変更できます。</p>
<p>Windows と Mac OS X では CPython インストーラはそれ自身と一緒に <code class="docutils literal notranslate"><span class="pre">pip</span></code> をデフォルトでインストールするようになっています(ユーザはインストールプロセスで除外するかもしれませんが)。Windows ユーザは <code class="docutils literal notranslate"><span class="pre">pip</span></code> がコマンドラインからデフォルトで利用可能なように <code class="docutils literal notranslate"><span class="pre">PATH</span></code> の自動修正するかの選択を求められます。そうしない場合でも Windows のための Python ランチャで <code class="docutils literal notranslate"><span class="pre">py</span> <span class="pre">-m</span> <span class="pre">pip</span></code> のようにすれば良いです。</p>
<p><a class="reference external" href="https://www.python.org/dev/peps/pep-0453/#recommendations-for-downstream-distributors">discussed in the PEP</a> の通りプラットフォームのパッケージャは、プラットフォームでのそれらインストールの単純明快な手段を自身が提供する(普通システムのパッケージマネージャ)からと言う理由で、デフォルトでのこれらコマンドのインストールを選択しないかもしれません。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Python 2 と Python 3 の共存インストールでの衝突を避けるために、 <code class="docutils literal notranslate"><span class="pre">ensurepip</span></code> を直接呼び出した場合のデフォルトでは、バージョン付けされた <code class="docutils literal notranslate"><span class="pre">pip3</span></code>, <code class="docutils literal notranslate"><span class="pre">pip3.4</span></code> コマンドだけがインストールされます。バージョン付けのない <code class="docutils literal notranslate"><span class="pre">pip</span></code> コマンドもインストールしたければ、 <code class="docutils literal notranslate"><span class="pre">--default-pip</span></code> オプションが必要です。 <code class="docutils literal notranslate"><span class="pre">pyvenv</span></code> と Windows インストーラは修飾のない <code class="docutils literal notranslate"><span class="pre">pip</span></code> コマンドがそれら環境で利用可能となるように保障しますし、また、複数の Python がインストールされたシステムで曖昧さを避けようと直接コマンドを呼び出す代わりに、 <code class="docutils literal notranslate"><span class="pre">pip</span></code> は <code class="docutils literal notranslate"><span class="pre">-m</span></code> スイッチ経由でいつでも呼び出せます。</p>
</div>
</div>
<div class="section" id="documentation-changes">
<h4>ドキュメントの変更<a class="headerlink" href="#documentation-changes" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>この変更の一部は、 <a class="reference internal" href="../installing/index.html#installing-index"><span class="std std-ref">Python モジュールのインストール</span></a> と <a class="reference internal" href="../distributing/index.html#distributing-index"><span class="std std-ref">Python モジュールの配布</span></a> セクションがより手短な始め方として完全にデザインし直されたことと、FAQ ドキュメントです。ほとんどのパッケージングについてのドキュメンテーションは <a class="reference external" href="https://packaging.python.org">Python Packaging User Guide</a>  が保守している Python Packaging Authority に移動されて、独立したプロジェクトのドキュメンテーションになっています。</p>
<p>ですが、この移行は現在のところまだ少し不完全ですので、これらのガイドのレガシーなバージョンは <a class="reference internal" href="../install/index.html#install-index"><span class="std std-ref">Python モジュールのインストール (旧版)</span></a> と <a class="reference internal" href="../distutils/index.html#distutils-index"><span class="std std-ref">Python モジュールの配布 (レガシーバージョン)</span></a> に残してあります。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-143"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a> -- Python インストールの際の明示的なpipのブートストラッピング</dt>
<dd>PEP は Donald Stufft と Nick Coghlan によって書かれ、Donald Stufft, Nick Coghlan, Martin von Löwis, Ned Deily により実装されました。</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="pep-446-newly-created-file-descriptors-are-non-inheritable">
<span id="whatsnew-pep-446"></span><h3>PEP 446: 新規作成されたファイル記述子は継承不可<a class="headerlink" href="#pep-446-newly-created-file-descriptors-are-non-inheritable" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><span class="target" id="index-144"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0446"><strong>PEP 446</strong></a> により、新規作成するファイル記述子は <a class="reference internal" href="../library/os.html#fd-inheritance"><span class="std std-ref">継承不可 (non-inheritable)</span></a> となります。一般的にはこれこそがアプリケーションが望む振る舞いです。新たにプロセスを生成する際に、現在開いているファイルを起こした子プロセスでも開くことは、検出が困難なあらゆるバグや潜在的なセキュリティ問題を引き起こしかねません。</p>
<p>そうはいっても継承することが望ましい場合もあります。それらのケースをサポートするために、以下の新規関数とメソッドが利用出来ます:</p>
<ul class="simple">
<li><a class="reference internal" href="../library/os.html#os.get_inheritable" title="os.get_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.get_inheritable()</span></code></a>, <a class="reference internal" href="../library/os.html#os.set_inheritable" title="os.set_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.set_inheritable()</span></code></a></li>
<li><a class="reference internal" href="../library/os.html#os.get_handle_inheritable" title="os.get_handle_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.get_handle_inheritable()</span></code></a>, <a class="reference internal" href="../library/os.html#os.set_handle_inheritable" title="os.set_handle_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.set_handle_inheritable()</span></code></a></li>
<li><a class="reference internal" href="../library/socket.html#socket.socket.get_inheritable" title="socket.socket.get_inheritable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.socket.get_inheritable()</span></code></a>, <a class="reference internal" href="../library/socket.html#socket.socket.set_inheritable" title="socket.socket.set_inheritable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.socket.set_inheritable()</span></code></a></li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-145"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0446"><strong>PEP 446</strong></a> -- 新規作成されたファイル記述子を継承不可にする</dt>
<dd>PEP written and implemented by Victor Stinner.</dd>
</dl>
</div>
</div>
<div class="section" id="improvements-to-codec-handling">
<span id="codec-handling-improvements"></span><h3>Codec 処理の改良<a class="headerlink" href="#improvements-to-codec-handling" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>その最初の導入からずっと、 <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a> モジュールとはいつなんどきも、型に中立で動的なエンコーディング・デコーディングシステムとして働くものであったのです。そうなのですがその Python テキストモデルとの密接な結合、特に組み込み型 <a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> にある型に制限があるコンビニエンスメソッドのおかげで、歴史的にその本来の意図を曖昧にしてきたのでした。</p>
<p>そんな状況を清く正しくするための重要な一歩として、今ではコンビニエンス関数 <a class="reference internal" href="../library/codecs.html#codecs.encode" title="codecs.encode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">codecs.encode()</span></code></a>, <a class="reference internal" href="../library/codecs.html#codecs.decode" title="codecs.decode"><code class="xref py py-meth docutils literal notranslate"><span class="pre">codecs.decode()</span></code></a> が Python 2.7、3.3、3.4 で適切にドキュメントされました。これら関数は <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a> モジュールに Python 2.4 からずっと存在している (うえに回帰テストスイートでもずっと網羅してきた) のですが、以前はドキュメントされていなかったわけなので、実行時イントロスペクションでようやく見つけられるというものだったわけです。</p>
<p><a class="reference internal" href="../library/stdtypes.html#str" title="str"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>, <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> でのコンビニエンスメソッドが Python 3 では Unicode テキストエンコーディングに制限され、Python 2 では <code class="docutils literal notranslate"><span class="pre">basestring</span></code> &lt;-&gt; <code class="docutils literal notranslate"><span class="pre">basestring</span></code> 変換に制限されるのとは違うのです。 <a class="reference internal" href="../library/codecs.html#module-codecs" title="codecs: Encode and decode data and streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">codecs</span></code></a> のコンビニエンス関数は Python 2 と Python 3 の両方で任意のコーデックをサポートするのです。</p>
<p>Python 3.4 では、インタプリタは標準ライブラリで提供している非テキストエンコーディングについて知っています。そして以下のように適宜、それら汎用目的のコンビニエンス関数へユーザを誘導します:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="sa">b</span><span class="s2">&quot;abcdef&quot;</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;hex&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">LookupError</span>: <span class="n">&#39;hex&#39; is not a text encoding; use codecs.decode() to handle arbitrary codecs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;hello&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;rot13&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">LookupError</span>: <span class="n">&#39;rot13&#39; is not a text encoding; use codecs.encode() to handle arbitrary codecs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">open</span><span class="p">(</span><span class="s2">&quot;foo.txt&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;hex&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">LookupError</span>: <span class="n">&#39;hex&#39; is not a text encoding; use codecs.open() to handle arbitrary codecs</span>
</pre></div>
</div>
<p>関連する変更で、後方互換性を壊すことなくそれが相応しい場合にはいつでも、エンコーディング・デコーディング操作中に起こる例外は、同じ例外型でありエラーを発生させることになった原因コーデックの名前に言及する連鎖例外内に包まれます:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">codecs</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">codecs</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;abcdefgh&quot;</span><span class="p">,</span> <span class="s2">&quot;hex&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;/usr/lib/python3.4/encodings/hex_codec.py&quot;</span>, line <span class="m">20</span>, in <span class="n">hex_decode</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">binascii</span><span class="o">.</span><span class="n">a2b_hex</span><span class="p">(</span><span class="nb">input</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="nb">input</span><span class="p">))</span>
<span class="gr">binascii.Error</span>: <span class="n">Non-hexadecimal digit found</span>

<span class="go">The above exception was the direct cause of the following exception:</span>

<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">binascii.Error</span>: <span class="n">decoding with &#39;hex&#39; codec failed (Error: Non-hexadecimal digit found)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">codecs</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;bz2&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;/usr/lib/python3.4/encodings/bz2_codec.py&quot;</span>, line <span class="m">17</span>, in <span class="n">bz2_encode</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">bz2</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="nb">input</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="nb">input</span><span class="p">))</span>
  File <span class="nb">&quot;/usr/lib/python3.4/bz2.py&quot;</span>, line <span class="m">498</span>, in <span class="n">compress</span>
    <span class="k">return</span> <span class="n">comp</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">+</span> <span class="n">comp</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
<span class="gr">TypeError</span>: <span class="n">&#39;str&#39; does not support the buffer interface</span>

<span class="go">The above exception was the direct cause of the following exception:</span>

<span class="gt">Traceback (most recent call last):</span>
  File <span class="nb">&quot;&lt;stdin&gt;&quot;</span>, line <span class="m">1</span>, in <span class="n">&lt;module&gt;</span>
<span class="gr">TypeError</span>: <span class="n">encoding with &#39;bz2&#39; codec failed (TypeError: &#39;str&#39; does not support the buffer interface)</span>
</pre></div>
</div>
<p>そしてついに、ここまで実例で見てきたような的確な誘導による改善が、それ自体は Python 3.2 で復活していた非 Unicode コーデックへのコンビニエンスのエイリアスの復活を可能にしました。(---訳注: Python 3.0 で一度非 Unicode エンコーディングは消滅し、3.2 でそれらコーデックそのものは復活したものの、 <a class="reference external" href="https://github.com/python/cpython/tree/3.8/Lib/encodings/aliases.py">Lib/encodings/aliases.py</a> のマッピングからは除外されたままだった。---) つまり、バイナリデータの 16 進表現エンコードとそのデコード (たとえば、です) は、今ではこう書けるということです:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">codecs</span> <span class="kn">import</span> <span class="n">encode</span><span class="p">,</span> <span class="n">decode</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">encode</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;hex&quot;</span><span class="p">)</span>
<span class="go">b&#39;68656c6c6f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decode</span><span class="p">(</span><span class="sa">b</span><span class="s2">&quot;68656c6c6f&quot;</span><span class="p">,</span> <span class="s2">&quot;hex&quot;</span><span class="p">)</span>
<span class="go">b&#39;hello&#39;</span>
</pre></div>
</div>
<p>標準ライブラリで提供されるバイナリ変換とテキスト変換は、 <a class="reference internal" href="../library/codecs.html#binary-transforms"><span class="std std-ref">バイナリ変換 (Binary Transforms)</span></a> と <a class="reference internal" href="../library/codecs.html#text-transforms"><span class="std std-ref">テキスト変換 (Text Transforms)</span></a> に詳細記述されました。</p>
<p>(Contributed by Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue7475">bpo-7475</a>, <a class="reference external" href="https://bugs.python.org/issue17827">bpo-17827</a>,
<a class="reference external" href="https://bugs.python.org/issue17828">bpo-17828</a> and <a class="reference external" href="https://bugs.python.org/issue19619">bpo-19619</a>.)</p>
</div>
<div class="section" id="pep-451-a-modulespec-type-for-the-import-system">
<span id="whatsnew-pep-451"></span><h3>PEP 451: インポートシステムのための ModuleSpec 型<a class="headerlink" href="#pep-451-a-modulespec-type-for-the-import-system" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><span class="target" id="index-146"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0451"><strong>PEP 451</strong></a> は、インポート機構がロードに使うモジュールに関する情報 (つまりモジュールの仕様) のカプセル化を提供します。これはインポートの実装とインポート関連 API の両方を単純化するのに役立ちます。この変更は、 <a class="reference external" href="https://mail.python.org/pipermail/python-dev/2013-November/130111.html">いくつかの将来のインポート関連の改善</a> の足掛かりでもあります。</p>
<p>この PEP による公な側面での変化は完全に後方互換です。さらにそれらは、インポーターの作者以外にとっては透過的であるはずです。鍵となるファインダとローダのメソッドはまだ動作し続けますが非推奨となりました。新しいインポータは PEP に記述された新メソッドを使うべきです。既存のインポータは新メソッドを実装するように更新すべきです。置き換えられるべきメソッドとその代わりとなるメソッドのリストについては <a class="reference internal" href="#deprecated-3-4"><span class="std std-ref">非推奨</span></a> を参照してください。</p>
</div>
<div class="section" id="other-language-changes">
<h3>その他の言語変更<a class="headerlink" href="#other-language-changes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Python 言語コアに小さな変更がいくつか行われました:</p>
<ul class="simple">
<li>Unicode データベースを UCD バージョン 6.3 にアップグレードしました。</li>
<li><a class="reference internal" href="../library/functions.html#min" title="min"><code class="xref py py-func docutils literal notranslate"><span class="pre">min()</span></code></a> と <a class="reference internal" href="../library/functions.html#max" title="max"><code class="xref py py-func docutils literal notranslate"><span class="pre">max()</span></code></a> にキーワード専用引数 <em>default</em> が追加されました。これにはイテラブルが要素なしであると評価される場合に返す値を指定出来ます。 (Contributed by Julian Berman in <a class="reference external" href="https://bugs.python.org/issue18111">bpo-18111</a>.)</li>
<li>モジュールオブジェクトが <a class="reference internal" href="../library/weakref.html#module-weakref" title="weakref: Support for weak references and weak dictionaries."><code class="xref py py-mod docutils literal notranslate"><span class="pre">weakref</span></code></a> 可能になりました。</li>
<li>モジュールの <code class="docutils literal notranslate"><span class="pre">__file__</span></code> 属性 (と関連する値) にはデフォルトでは常に絶対パスを含むようになりました。ただし、スクリプトがコマンドラインから相対パスを使って直接実行された際の <code class="docutils literal notranslate"><span class="pre">__main__.__file__</span></code> は唯一の例外です。 (Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue18416">bpo-18416</a>.)</li>
<li>UTF-16 デコーダ (妥当なサロゲートペアを受け付ける) と UTF-16 エンコーダ (非 BMP 文字のエンコードでサロゲートペアを生成) 以外の、(UTF-7 を除く) 全ての UTF-* コーデックが、エラーハンドラ <code class="docutils literal notranslate"><span class="pre">surrogatepass</span></code> を使わない限りはエンコーディングとデコーディングの両方でサロゲートペアを拒絶するようになりました。(Contributed by Victor Stinner, Kang-Hao (Kenny) Lu and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue12892">bpo-12892</a>.)</li>
<li>新規ドイツ語 EBCDIC <a class="reference internal" href="../library/codecs.html#standard-encodings"><span class="std std-ref">codec</span></a> <code class="docutils literal notranslate"><span class="pre">cp273</span></code>.  (Contributed by Michael Bierenfeld and Andrew Kuchling in <a class="reference external" href="https://bugs.python.org/issue1097797">bpo-1097797</a>.)</li>
<li>新規ウクライナ語 <a class="reference internal" href="../library/codecs.html#standard-encodings"><span class="std std-ref">codec</span></a> <code class="docutils literal notranslate"><span class="pre">cp1125</span></code>.  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19668">bpo-19668</a>.)</li>
<li><a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>.join() と <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a>.join() が引数として任意のバッファオブジェクトを受け取れるようになりました。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue15958">bpo-15958</a>.)</li>
<li><a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> コンストラクタの <em>base</em> 引数に、 <code class="docutils literal notranslate"><span class="pre">__index__</span></code> メソッドを持つ任意のオブジェクトを渡せるようになりました。(Contributed by Mark Dickinson in <a class="reference external" href="https://bugs.python.org/issue16772">bpo-16772</a>.) (---訳注: <a class="reference internal" href="#changes-in-the-python-api">Python API の変更</a> に同じ <a class="reference external" href="https://bugs.python.org/issue16772">bpo-16772</a> を発端とする変更が書かれているのでそちらも参照して下さい。 ---)</li>
<li>フレームオブジェクトに、ローカル変数への全ての参照をフレームからクリアするメソッド <a class="reference internal" href="../reference/datamodel.html#frame.clear" title="frame.clear"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear()</span></code></a> が追加されました。(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue17934">bpo-17934</a>.)</li>
<li><a class="reference internal" href="../library/stdtypes.html#memoryview" title="memoryview"><code class="xref py py-class docutils literal notranslate"><span class="pre">memoryview</span></code></a> が <a class="reference internal" href="../library/collections.abc.html#module-collections.abc" title="collections.abc: Abstract base classes for containers"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a> として登録され、また、組み込み関数 <a class="reference internal" href="../library/functions.html#reversed" title="reversed"><code class="xref py py-func docutils literal notranslate"><span class="pre">reversed()</span></code></a> をサポートするようになりました。 (Contributed by Nick Coghlan and Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue18690">bpo-18690</a> and <a class="reference external" href="https://bugs.python.org/issue19078">bpo-19078</a>.)</li>
<li>Argument Clinic の導入、 <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> と <a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> になされた他の変更の結果、多くの場合で <a class="reference internal" href="../library/functions.html#help" title="help"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> が報告するシグニチャが修正・改善されました。</li>
<li><a class="reference internal" href="../reference/datamodel.html#object.__length_hint__" title="object.__length_hint__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__length_hint__()</span></code></a> が、公式な言語仕様の一部になりました (see <span class="target" id="index-147"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0424"><strong>PEP 424</strong></a>)。 (Contributed by Armin Ronacher in <a class="reference external" href="https://bugs.python.org/issue16148">bpo-16148</a>.)</li>
</ul>
</div>
</div>
<div class="section" id="new-modules">
<h2>新たなモジュール<a class="headerlink" href="#new-modules" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="asyncio">
<span id="whatsnew-asyncio"></span><h3>asyncio<a class="headerlink" href="#asyncio" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> モジュールが追加されました (<span class="target" id="index-148"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3156"><strong>PEP 3156</strong></a> で定義されています)。これは Python のための標準的で抜き挿し可能なイベントループモデルを、標準ライブラリに信頼出来る非同期 I/O サポートを追加することで提供し、また、ほかのイベントループ実装を標準ライブラリと相互運用することを容易にします。</p>
<p>Python 3.4 では、このモジュールは <a class="reference internal" href="../glossary.html#term-provisional-api"><span class="xref std std-term">暫定 API</span></a> であるとみなされています。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-149"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3156"><strong>PEP 3156</strong></a> -- 非同期 IO サポートの再起動: &quot;asyncio&quot; モジュール</dt>
<dd>PEP written and implementation led by Guido van Rossum. (訳注: PEP タイトルの「Asynchronous IO Support Rebooted: the &quot;asyncio&quot; Module」は <span class="target" id="index-150"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3153"><strong>PEP 3153</strong></a> の焼き直しのため。)</dd>
</dl>
</div>
</div>
<div class="section" id="ensurepip">
<span id="whatsnew-ensurepip"></span><h3>ensurepip<a class="headerlink" href="#ensurepip" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規の <a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> モジュールは <span class="target" id="index-151"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a> 実装のための本質的な基盤です。通常はエンドユーザはこのモジュールを弄ぶ必要はありません。ですが、 <code class="docutils literal notranslate"><span class="pre">pip</span></code> のインストレーションや仮想環境に対する自動ブートストラップを拒否していた場合には、手動でそれをブートストラップするのに使えます。</p>
<p><a class="reference internal" href="../library/ensurepip.html#module-ensurepip" title="ensurepip: Bootstrapping the &quot;pip&quot; installer into an existing Python installation or virtual environment."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ensurepip</span></code></a> は <code class="docutils literal notranslate"><span class="pre">pip</span></code> のバンドルされたコピーを含んでいて、これは CPython リリースの最初のリリース候補時点での最新です (このことはメンテナンスリリース、feature リリースの両方に適用されます)。 <code class="docutils literal notranslate"><span class="pre">ensurepip</span></code> 自身はインターネットアクセスしません。依存パッケージ解決のためのインターネットアクセスを要するならばそれは <code class="docutils literal notranslate"><span class="pre">ensurepip</span></code> 実行の後の <code class="docutils literal notranslate"><span class="pre">pip</span></code> で行いますし、 <code class="docutils literal notranslate"><span class="pre">pip</span></code> そのもののアップグレードも <code class="docutils literal notranslate"><span class="pre">pip</span></code> 自身で行います。(そのようなアップグレード版 <code class="docutils literal notranslate"><span class="pre">pip</span></code> は個別のインストールパッケージとみなされて、Python がアンインストールされても削除されないことを付記しておきます。)</p>
<p>このモジュールが「 <em>ensure (保障する)</em> 」を名前に冠するのは、 <code class="docutils literal notranslate"><span class="pre">pip</span></code> がインストール済みならば何もしないからです。このモジュールは <code class="docutils literal notranslate"><span class="pre">--upgrade</span></code> オプションを持ちますが、これは既存のインストール版 <code class="docutils literal notranslate"><span class="pre">pip</span></code> がこのモジュールにバンドルされたコピーよりも古い場合に、バンドルされたコピー版 <code class="docutils literal notranslate"><span class="pre">pip</span></code> をインストールします。</p>
</div>
<div class="section" id="enum">
<span id="whatsnew-enum"></span><h3>enum<a class="headerlink" href="#enum" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/enum.html#module-enum" title="enum: Implementation of an enumeration class."><code class="xref py py-mod docutils literal notranslate"><span class="pre">enum</span></code></a> モジュール (<span class="target" id="index-152"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0435"><strong>PEP 435</strong></a> にて定義) は標準の列挙型実装を提供します。これにより (<a class="reference internal" href="../library/socket.html#module-socket" title="socket: Low-level networking interface."><code class="xref py py-mod docutils literal notranslate"><span class="pre">socket</span></code></a> のような) ほかのモジュールが、不透明な整数定数を後方互換を保ったまま列挙値に置き換えることによって、より情報に富むエラーメッセージを提供したり、より良いデバッグサポートを行えるようになります。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-153"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0435"><strong>PEP 435</strong></a> -- Python 標準ライブラリに enum 型を追加</dt>
<dd>PEP written by Barry Warsaw, Eli Bendersky and Ethan Furman,
implemented by Ethan Furman.</dd>
</dl>
</div>
</div>
<div class="section" id="pathlib">
<span id="whatsnew-pathlib"></span><h3>pathlib<a class="headerlink" href="#pathlib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規モジュール <a class="reference internal" href="../library/pathlib.html#module-pathlib" title="pathlib: Object-oriented filesystem paths"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pathlib</span></code></a> は、異なるオペレーティングシステムごとに適切な意味付けでファイルシステムパスを表現するクラス群を提供しています。パスのクラス群は <em>純粋パス</em> と <em>具象パス</em> に分離されています。前者は I/O を伴わない純粋なパス計算操作を提供するもので、後者は純粋パスを派生しますが I/O 操作も提供します。</p>
<p>Python 3.4 では、このモジュールは <a class="reference internal" href="../glossary.html#term-provisional-api"><span class="xref std std-term">暫定 API</span></a> であるとみなされています。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-154"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0428"><strong>PEP 428</strong></a> -- pathlib モジュール -- オブジェクト指向のファイルシステムパス</dt>
<dd>PEP written and implemented by Antoine Pitrou.</dd>
</dl>
</div>
</div>
<div class="section" id="selectors">
<span id="whatsnew-selectors"></span><h3>selectors<a class="headerlink" href="#selectors" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規モジュール <a class="reference internal" href="../library/selectors.html#module-selectors" title="selectors: High-level I/O multiplexing."><code class="xref py py-mod docutils literal notranslate"><span class="pre">selectors</span></code></a> (<span class="target" id="index-155"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3156"><strong>PEP 3156</strong></a> の一部として作成されました)　は、高水準で効率的な I/O の多重化を行います。これは <a class="reference internal" href="../library/select.html#module-select" title="select: Wait for I/O completion on multiple streams."><code class="xref py py-mod docutils literal notranslate"><span class="pre">select</span></code></a> モジュールプリミティブに基いています。</p>
</div>
<div class="section" id="statistics">
<span id="whatsnew-statistics"></span><h3>statistics<a class="headerlink" href="#statistics" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規モジュール <a class="reference internal" href="../library/statistics.html#module-statistics" title="statistics: Mathematical statistics functions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">statistics</span></code></a> (<span class="target" id="index-156"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0450"><strong>PEP 450</strong></a> で定義) は統計を扱う中核機能のいくつかを標準ライブラリで直接提供します。このモジュールはデータ系列の平均、中央値、最頻値、分散、標準偏差の計算をサポートします。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-157"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0450"><strong>PEP 450</strong></a> -- 標準ライブラリに統計モジュールを追加</dt>
<dd>PEP written and implemented by Steven D'Aprano</dd>
</dl>
</div>
</div>
<div class="section" id="tracemalloc">
<span id="whatsnew-tracemalloc"></span><h3>tracemalloc<a class="headerlink" href="#tracemalloc" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新たな <a class="reference internal" href="../library/tracemalloc.html#module-tracemalloc" title="tracemalloc: Trace memory allocations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tracemalloc</span></code></a> モジュール (<span class="target" id="index-158"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0454"><strong>PEP 454</strong></a> で定義) は Python が割り当てたメモリブロックをトレースするためのデバッグツールです。
以下の情報を提供します:</p>
<ul class="simple">
<li>オブジェクトが割り当てられた場所をトレースする</li>
<li>ファイル名ごと、及び行ごとに割り当てられたメモリブロックの以下の統計を取ります：総サイズ、ブロック数、割り当てられたブロックの平均サイズ</li>
<li>メモリリークを検出するために2つのスナップショットの差を計算します。</li>
</ul>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-159"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0454"><strong>PEP 454</strong></a> -- Python メモリ割り当てをトレースするための tracemalloc モジュールの追加</dt>
<dd>PEP written and implemented by Victor Stinner</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="improved-modules">
<h2>改良されたモジュール<a class="headerlink" href="#improved-modules" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="abc">
<h3>abc<a class="headerlink" href="#abc" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/abc.html#abc.get_cache_token" title="abc.get_cache_token"><code class="xref py py-func docutils literal notranslate"><span class="pre">abc.get_cache_token()</span></code></a> は、オブジェクトグラフ内での変化の影響を受けるキャッシュをいつ無効化すれば良いかを知るために使えます。 (Contributed by Łukasz Langa in <a class="reference external" href="https://bugs.python.org/issue16832">bpo-16832</a>.)</p>
<p>新規クラス <a class="reference internal" href="../library/abc.html#abc.ABC" title="abc.ABC"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></a> はそのメタクラスとして <a class="reference internal" href="../library/abc.html#abc.ABCMeta" title="abc.ABCMeta"><code class="xref py py-class docutils literal notranslate"><span class="pre">ABCMeta</span></code></a> を持ちます。この <code class="docutils literal notranslate"><span class="pre">ABC</span></code> を基底クラスとして使うことは <code class="docutils literal notranslate"><span class="pre">metaclass=abc.ABCMeta</span></code> を指定するのと本質的に同じ効果を持ちますが、少ないタイプ数で単純に書ける上に読みやすいものになります。(Contributed by Bruno Dupuis in <a class="reference external" href="https://bugs.python.org/issue16049">bpo-16049</a>.)</p>
</div>
<div class="section" id="aifc">
<h3>aifc<a class="headerlink" href="#aifc" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/aifc.html#aifc.aifc.getparams" title="aifc.aifc.getparams"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getparams()</span></code></a> メソッドがプレインなタプルではなく <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">namedtuple</span></code></a> を返すようになりました。  (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue17818">bpo-17818</a>.)</p>
<p><a class="reference internal" href="../library/aifc.html#aifc.open" title="aifc.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">aifc.open()</span></code></a> がコンテキスト管理プロトコルをサポートするようになりました: <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> ブロックで使うと戻り値オブジェクトの <a class="reference internal" href="../library/aifc.html#aifc.aifc.close" title="aifc.aifc.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> メソッドがブロックの終了時に自動的に呼び出されます。 (Contributed by Serhiy Storchacha in <a class="reference external" href="https://bugs.python.org/issue16486">bpo-16486</a>.)</p>
<p><a class="reference internal" href="../library/aifc.html#aifc.aifc.writeframesraw" title="aifc.aifc.writeframesraw"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writeframesraw()</span></code></a> メソッドと <a class="reference internal" href="../library/aifc.html#aifc.aifc.writeframes" title="aifc.aifc.writeframes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writeframes()</span></code></a> メソッドが <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">bytes-like object</span></a> を受け付けるようになりました。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue8311">bpo-8311</a>.)</p>
</div>
<div class="section" id="argparse">
<h3>argparse<a class="headerlink" href="#argparse" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/argparse.html#argparse.FileType" title="argparse.FileType"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileType</span></code></a> クラスが <em>encoding</em> 引数、 <em>errors</em> 引数を受け付けるようになりました。これは <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> にそのまま渡されます。 (Contributed by Lucas Maystre in <a class="reference external" href="https://bugs.python.org/issue11175">bpo-11175</a>.)</p>
</div>
<div class="section" id="audioop">
<h3>audioop<a class="headerlink" href="#audioop" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a> は 24 ビットサンプルをサポートするようになりました。  (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue12866">bpo-12866</a>.)</p>
<p>新規関数 <a class="reference internal" href="../library/audioop.html#audioop.byteswap" title="audioop.byteswap"><code class="xref py py-func docutils literal notranslate"><span class="pre">byteswap()</span></code></a> はビッグエンディアンのサンプル、リトルエンディアンのサンプルの相互変換を行います。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19641">bpo-19641</a>.)</p>
<p>全ての <a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a> 関数が今では任意の <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">bytes-like object</span></a> を受け付けます。文字列は許容されません。文字列では以前から動作しませんでしたが、ただちに例外を投げるように変更されました。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue16685">bpo-16685</a>.)</p>
</div>
<div class="section" id="base64">
<h3>base64<a class="headerlink" href="#base64" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/base64.html#module-base64" title="base64: RFC 3548: Base16, Base32, Base64 Data Encodings; Base85 and Ascii85"><code class="xref py py-mod docutils literal notranslate"><span class="pre">base64</span></code></a> のエンコード・デコード関数が任意の <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">bytes-like object</span></a> オブジェクトを受け取れるようになりました。以前は <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> または <a class="reference internal" href="../library/stdtypes.html#bytearray" title="bytearray"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytearray</span></code></a> インスタンスである必要がありました。 (Contributed by Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue17839">bpo-17839</a>.)</p>
<p>新規関数 <a class="reference internal" href="../library/base64.html#base64.a85encode" title="base64.a85encode"><code class="xref py py-func docutils literal notranslate"><span class="pre">a85encode()</span></code></a>, <a class="reference internal" href="../library/base64.html#base64.a85decode" title="base64.a85decode"><code class="xref py py-func docutils literal notranslate"><span class="pre">a85decode()</span></code></a> は <code class="docutils literal notranslate"><span class="pre">Ascii85</span></code> フォーマットの、 <a class="reference internal" href="../library/base64.html#base64.b85encode" title="base64.b85encode"><code class="xref py py-func docutils literal notranslate"><span class="pre">b85encode()</span></code></a>, <a class="reference internal" href="../library/base64.html#base64.b85decode" title="base64.b85decode"><code class="xref py py-func docutils literal notranslate"><span class="pre">b85decode()</span></code></a> は git/mercurial の <code class="docutils literal notranslate"><span class="pre">Base85</span></code> フォーマットの、バイナリデータのエンコード・バイナリデータへのデコードを提供します。 <code class="docutils literal notranslate"><span class="pre">a85</span></code> 関数は、Abobe 方言を含む <code class="docutils literal notranslate"><span class="pre">Ascii85</span></code> エンコーディングの変種と互換性を持たせるためのオプションを持っています。(Contributed by Martin Morrison, the Mercurial project, Serhiy Storchaka, and Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue17618">bpo-17618</a>.)</p>
</div>
<div class="section" id="collections">
<h3>collections<a class="headerlink" href="#collections" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/collections.html#collections.ChainMap.new_child" title="collections.ChainMap.new_child"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ChainMap.new_child()</span></code></a> メソッドが、チェーンに追加する子マップを指定する <em>m</em> 引数を取るようになりました。これにより、以前は組み込み辞書が必ず maps の先頭になっていましたが、カスタムマッピング型も使えるようになります。(Contributed by Vinay Sajip in <a class="reference external" href="https://bugs.python.org/issue16613">bpo-16613</a>.)</p>
</div>
<div class="section" id="colorsys">
<h3>colorsys<a class="headerlink" href="#colorsys" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>RGB --- YIQ 変換の係数の桁数が <a class="reference external" href="https://en.wikipedia.org/wiki/YIQ#FCC_version_of_NTSC_standard">FCC NTSC version</a> に合うように広げられました。結果としての変化は 1% 未満のはずで、また、ほかの処理系での結果とより合致するでしょう。 (Contributed by Brian Landers and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue14323">bpo-14323</a>.)</p>
</div>
<div class="section" id="contextlib">
<h3>contextlib<a class="headerlink" href="#contextlib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規コンテキストマネージャ <a class="reference internal" href="../library/contextlib.html#contextlib.suppress" title="contextlib.suppress"><code class="xref py py-class docutils literal notranslate"><span class="pre">contextlib.suppress</span></code></a> によって、意図して単独ステートメントからの例外を抑制しているというコードの意図をはっきりと読み手に伝えることが出来ます。 (Contributed by Raymond Hettinger in <a class="reference external" href="https://bugs.python.org/issue15806">bpo-15806</a> and Zero Piraeus in <a class="reference external" href="https://bugs.python.org/issue19266">bpo-19266</a>.)</p>
<p>新規コンテキストマネージャ <a class="reference internal" href="../library/contextlib.html#contextlib.redirect_stdout" title="contextlib.redirect_stdout"><code class="xref py py-func docutils literal notranslate"><span class="pre">contextlib.redirect_stdout()</span></code></a> は、ユーティリティスクリプトにて、その出力を <a class="reference internal" href="../library/sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> に書き出す一方でその向き先を変えれない頑固な API の扱いを簡単にしてくれます。これを使うと、 <a class="reference internal" href="../library/sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> 出力をなにかほかのストリームに振り替えたり、あるいは <a class="reference internal" href="../library/io.html#io.StringIO" title="io.StringIO"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.StringIO</span></code></a> と組み合わせて文字列化したり出来ます。後者などは特に便利で、たとえば元々はコマンドラインインターフェイスとして実装された関数からの出力を取り込む、などということが出来ます。このコンテキストマネージャはユーティリティスクリプト以外では使わない方が肝要です。というのもこれは <a class="reference internal" href="../library/sys.html#sys.stdout" title="sys.stdout"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.stdout</span></code></a> の大域的な状態に影響を与えてしまうからです。 (Contributed by Raymond Hettinger in <a class="reference external" href="https://bugs.python.org/issue15805">bpo-15805</a>.)</p>
<p><a class="reference internal" href="../library/contextlib.html#module-contextlib" title="contextlib: Utilities for with-statement contexts."><code class="xref py py-mod docutils literal notranslate"><span class="pre">contextlib</span></code></a> ドキュメントにも改善が行われ、コンテキストマネージャを単独で使うのと再利用したり再入可能(リエントラント)するのとの違いについての <a class="reference internal" href="../library/contextlib.html#single-use-reusable-and-reentrant-cms"><span class="std std-ref">議論</span></a> が追加されました。</p>
</div>
<div class="section" id="dbm">
<h3>dbm<a class="headerlink" href="#dbm" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/dbm.html#dbm.open" title="dbm.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">dbm.open()</span></code></a> がコンテキスト管理プロトコルをサポートするようになりました: <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> ブロックで使うとデータベースオブジェクトの <code class="docutils literal notranslate"><span class="pre">close</span></code> メソッドがブロックの終了時に自動的に呼び出されます。 (Contributed by Claudiu Popa and Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue19282">bpo-19282</a>.)</p>
</div>
<div class="section" id="dis">
<h3>dis<a class="headerlink" href="#dis" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>関数 <a class="reference internal" href="../library/dis.html#dis.show_code" title="dis.show_code"><code class="xref py py-func docutils literal notranslate"><span class="pre">show_code()</span></code></a>, <a class="reference internal" href="../library/dis.html#dis.dis" title="dis.dis"><code class="xref py py-func docutils literal notranslate"><span class="pre">dis()</span></code></a>, <a class="reference internal" href="../library/dis.html#dis.distb" title="dis.distb"><code class="xref py py-func docutils literal notranslate"><span class="pre">distb()</span></code></a>, <a class="reference internal" href="../library/dis.html#dis.disassemble" title="dis.disassemble"><code class="xref py py-func docutils literal notranslate"><span class="pre">disassemble()</span></code></a> が新たにキーワード専用引数 <em>file</em> を受け取ります。これは出力先を制御します。</p>
<p><a class="reference internal" href="../library/dis.html#module-dis" title="dis: Disassembler for Python bytecode."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dis</span></code></a> モジュールはいまでは <a class="reference internal" href="../library/dis.html#dis.Instruction" title="dis.Instruction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Instruction</span></code></a> クラスを中心に据えて構築されています。これは個々のバイトコード操作の詳細に対し、オブジェクト指向的なアクセスを提供するクラスです。</p>
<p>新規メソッド <a class="reference internal" href="../library/dis.html#dis.get_instructions" title="dis.get_instructions"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_instructions()</span></code></a> が、与えた Python コード片についての命令 (インストラクション) ストリームを発行するイテレータを提供します。これを使えば、<a class="reference internal" href="../library/dis.html#module-dis" title="dis: Disassembler for Python bytecode."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dis</span></code></a> モジュール自身が提供しているのとは違った方法で、バイトコードオブジェクトを調べたり加工するようなプログラムを書くことが出来ます。例えばこのように書けます:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">dis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">instr</span> <span class="ow">in</span> <span class="n">dis</span><span class="o">.</span><span class="n">get_instructions</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">opname</span><span class="p">)</span>
<span class="go">LOAD_FAST</span>
<span class="go">LOAD_CONST</span>
<span class="go">BINARY_ADD</span>
<span class="go">RETURN_VALUE</span>
</pre></div>
</div>
<p><a class="reference internal" href="../library/dis.html#module-dis" title="dis: Disassembler for Python bytecode."><code class="xref py py-mod docutils literal notranslate"><span class="pre">dis</span></code></a> モジュールにある色々な表示ツールが、これらの新しい構成要素でもって書き直されました。</p>
<p>アプリケーションフレンドリな <a class="reference internal" href="../library/dis.html#dis.Bytecode" title="dis.Bytecode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bytecode</span></code></a> クラスも追加されています。これはバイトコードを調べるのに、人が読める形式としてもインストラクション列をイテレートするのにも優しい、オブジェクト指向的な API になっています。 <a class="reference internal" href="../library/dis.html#dis.Bytecode" title="dis.Bytecode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bytecode</span></code></a> コンストラクタは <code class="xref py py-func docutils literal notranslate"><span class="pre">get_instruction()</span></code> と同じ引数 (と、追加でオプショナルな <em>current_offset</em>) を受け取って、結果のオブジェクトは <a class="reference internal" href="../library/dis.html#dis.Instruction" title="dis.Instruction"><code class="xref py py-class docutils literal notranslate"><span class="pre">Instruction</span></code></a> オブジェクトを生成するイテレータとして振舞うことが出来ます。このオブジェクトは、 <a class="reference internal" href="../library/dis.html#dis.dis" title="dis.dis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dis</span></code></a> にコンストラクタ引数を渡して呼び出すのと等価な <a class="reference internal" href="../library/dis.html#dis.Bytecode.dis" title="dis.Bytecode.dis"><code class="xref py py-mod docutils literal notranslate"><span class="pre">dis</span></code></a> メソッドも持っていますが、マルチライン文字列で返します:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bytecode</span> <span class="o">=</span> <span class="n">dis</span><span class="o">.</span><span class="n">Bytecode</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">current_offset</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">instr</span> <span class="ow">in</span> <span class="n">bytecode</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1"> (</span><span class="si">{}</span><span class="s1">)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">instr</span><span class="o">.</span><span class="n">opname</span><span class="p">,</span> <span class="n">instr</span><span class="o">.</span><span class="n">opcode</span><span class="p">))</span>
<span class="go">LOAD_FAST (124)</span>
<span class="go">LOAD_CONST (100)</span>
<span class="go">BINARY_ADD (23)</span>
<span class="go">RETURN_VALUE (83)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bytecode</span><span class="o">.</span><span class="n">dis</span><span class="p">()</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()</span>       
<span class="go">[&#39;  1           0 LOAD_FAST                0 (x)&#39;,</span>
<span class="go"> &#39;      --&gt;     3 LOAD_CONST               1 (1)&#39;,</span>
<span class="go"> &#39;              6 BINARY_ADD&#39;,</span>
<span class="go"> &#39;              7 RETURN_VALUE&#39;]</span>
</pre></div>
</div>
<p><a class="reference internal" href="../library/dis.html#dis.Bytecode" title="dis.Bytecode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bytecode</span></code></a> にはクラスメソッド <a class="reference internal" href="../library/dis.html#dis.Bytecode.from_traceback" title="dis.Bytecode.from_traceback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_traceback()</span></code></a> もあります。トレースバックから <a class="reference internal" href="../library/dis.html#dis.Bytecode" title="dis.Bytecode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Bytecode</span></code></a> を構築します。(<code class="docutils literal notranslate"><span class="pre">print(Bytecode.from_traceback(tb).dis())</span></code> は <a class="reference internal" href="../library/dis.html#dis.distb" title="dis.distb"><code class="xref py py-func docutils literal notranslate"><span class="pre">distb()</span></code></a> を使って <code class="docutils literal notranslate"><span class="pre">distb(tb)</span></code> とするのと同じです。)</p>
<p>(Contributed by Nick Coghlan, Ryan Kelly and Thomas Kluyver in <a class="reference external" href="https://bugs.python.org/issue11816">bpo-11816</a>
and Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue17916">bpo-17916</a>.)</p>
<p>新規関数 <a class="reference internal" href="../library/dis.html#dis.stack_effect" title="dis.stack_effect"><code class="xref py py-func docutils literal notranslate"><span class="pre">stack_effect()</span></code></a> は与えられた opcode (命令コード) と引数の Python スタックへの effect を計算します。この情報は他からは得られません。 (Contributed by Larry Hastings in <a class="reference external" href="https://bugs.python.org/issue19722">bpo-19722</a>.) (---訳注: <code class="docutils literal notranslate"><span class="pre">PyCompile_OpcodeStackEffect</span></code> として C API として曝した上で Python からアクセス出来るようにしたものらしいです。 <a class="reference external" href="https://hg.python.org/cpython/file/5fe72b9ed48e/Python/compile.c#l3838">stackdepth_walk での使用箇所</a> 参照。---)</p>
</div>
<div class="section" id="doctest">
<h3>doctest<a class="headerlink" href="#doctest" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規 <a class="reference internal" href="../library/doctest.html#doctest-options"><span class="std std-ref">オプションフラグ</span></a> の <a class="reference internal" href="../library/doctest.html#doctest.FAIL_FAST" title="doctest.FAIL_FAST"><code class="xref py py-data docutils literal notranslate"><span class="pre">FAIL_FAST</span></code></a> により、テスト実行を最初の失敗検出で終了させることが出来ます。 (Contributed by R. David Murray and Daniel Urban in <a class="reference external" href="https://bugs.python.org/issue16522">bpo-16522</a>.)</p>
<p><a class="reference internal" href="../library/doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> コマンドラインインターフェイスは <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> を使うようになりました。2 つの新オプション <code class="docutils literal notranslate"><span class="pre">-o</span></code> と <code class="docutils literal notranslate"><span class="pre">-f</span></code> が追加されています。 <code class="docutils literal notranslate"><span class="pre">-o</span></code> によりコマンドラインから <a class="reference internal" href="../library/doctest.html#doctest-options"><span class="std std-ref">doctest オプション</span></a> を指定することが出来ます。 <code class="docutils literal notranslate"><span class="pre">-f</span></code> は <code class="docutils literal notranslate"><span class="pre">-o</span> <span class="pre">FAIL_FAST</span></code> の速記法です (<a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> CLI でサポートされる似たオプション <a class="reference internal" href="../library/unittest.html#unittest-command-line-interface"><span class="std std-ref">サポートされる同じオプション</span></a> に似せるためです)。 (Contributed by R. David Murray in <a class="reference external" href="https://bugs.python.org/issue11390">bpo-11390</a>.)</p>
<p><a class="reference internal" href="../library/doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> はいまや、拡張モジュールの <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> 文字列から doctest を見つけることが出来ます。 (Contributed by Zachary Ware in <a class="reference external" href="https://bugs.python.org/issue3158">bpo-3158</a>.)</p>
</div>
<div class="section" id="email">
<h3>email<a class="headerlink" href="#email" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/email.compat32-message.html#email.message.Message.as_string" title="email.message.Message.as_string"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_string()</span></code></a> メソッドが、その文字列表現を生成するのに使うデフォルトポリシーを上書き出来る <em>policy</em> 引数を取るようになりました。つまり <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> を作り直したり <code class="docutils literal notranslate"><span class="pre">flattern</span></code> メソッドの書式化パラメータのためだけに <a class="reference internal" href="../library/email.generator.html#module-email.generator" title="email.generator: Generate flat text email messages from a message structure."><code class="xref py py-mod docutils literal notranslate"><span class="pre">generator</span></code></a> を使うことなしに、 <code class="docutils literal notranslate"><span class="pre">as_string</span></code> をより多くの状況で使えるということになります。(Contributed by R. David Murray in <a class="reference external" href="https://bugs.python.org/issue18600">bpo-18600</a>.)</p>
<p><a class="reference internal" href="../library/email.compat32-message.html#email.message.Message.as_bytes" title="email.message.Message.as_bytes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">as_bytes()</span></code></a> メソッドが追加されました。これは <code class="docutils literal notranslate"><span class="pre">as_string</span></code> が文字列表現を生成するのと似たやり方で、メッセージの bytes 表現を生成します。これは <em>maxheaderlen</em> 引数を取りませんが、 <em>unixfrom</em> 引数と <em>policy</em> 引数を取ります。 <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> の <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message.__bytes__" title="email.message.Message.__bytes__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__bytes__()</span></code></a> がこれを呼び出すようにしたので、 <code class="docutils literal notranslate"><span class="pre">bytes(mymsg)</span></code> は今や直感に反しない結果、つまり完全にフォーマットされたメッセージを生成します。(Contributed by R. David Murray in <a class="reference external" href="https://bugs.python.org/issue18600">bpo-18600</a>.)</p>
<p><a class="reference internal" href="../library/email.compat32-message.html#email.message.Message.set_param" title="email.message.Message.set_param"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Message.set_param()</span></code></a> メソッドにキーワード引数 <em>replace</em> が追加されました。真を渡すとヘッダリスト内のその位置を変更せずに関連ヘッダを更新します。後方互換のためにデフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。 (Contributed by R. David Murray in <a class="reference external" href="https://bugs.python.org/issue18891">bpo-18891</a>.)</p>
<p id="whatsnew-email-contentmanager">サブモジュール <a class="reference internal" href="../library/email.contentmanager.html#module-email.contentmanager" title="email.contentmanager: Storing and Retrieving Content from MIME Parts"><code class="xref py py-mod docutils literal notranslate"><span class="pre">contentmanager</span></code></a> と <a class="reference internal" href="../library/email.policy.html#module-email.policy" title="email.policy: Controlling the parsing and generating of messages"><code class="xref py py-mod docutils literal notranslate"><span class="pre">policy</span></code></a> 属性の <a class="reference internal" href="../library/email.policy.html#email.policy.EmailPolicy.content_manager" title="email.policy.EmailPolicy.content_manager"><code class="xref py py-attr docutils literal notranslate"><span class="pre">content_manager</span></code></a> の追加と併せて、 <a class="reference internal" href="../library/email.compat32-message.html#email.message.Message" title="email.message.Message"><code class="xref py py-class docutils literal notranslate"><span class="pre">Message</span></code></a> の対となる二つのサブクラス (<a class="reference internal" href="../library/email.message.html#email.message.EmailMessage" title="email.message.EmailMessage"><code class="xref py py-class docutils literal notranslate"><span class="pre">EmailMessage</span></code></a> と <a class="reference internal" href="../library/email.message.html#email.message.MIMEPart" title="email.message.MIMEPart"><code class="xref py py-class docutils literal notranslate"><span class="pre">MIMEPart</span></code></a>) が追加されました。
全てのドキュメントは、 email の新規 <a class="reference internal" href="../glossary.html#term-provisional-api"><span class="xref std std-term">暫定 API</span></a> の構成要素として追加されたこの新しいモジュールにあります。
これらのクラスは、 email メッセージからの内容抽出や挿入を遥かに簡単に行える、数多くの新規メソッドを提供しています。
詳細は <a class="reference internal" href="../library/email.contentmanager.html#module-email.contentmanager" title="email.contentmanager: Storing and Retrieving Content from MIME Parts"><code class="xref py py-mod docutils literal notranslate"><span class="pre">contentmanager</span></code></a> のドキュメントと <a class="reference internal" href="../library/email.examples.html#email-examples"><span class="std std-ref">email: 使用例</span></a> を参照してください。
これらの API の追加作業により email6 プロジェクトの一部として計画されていた作業は、その大部分が完了しました。
現在のところ、暫定 API 状態は Python 3.5 で最後となる予定です (可能性としてはエラー処理あたりのゾーンでは少々の些細な追加は残るかもしれません)。 (Contributed by R. David Murray in <a class="reference external" href="https://bugs.python.org/issue18891">bpo-18891</a>.)</p>
</div>
<div class="section" id="filecmp">
<h3>filecmp<a class="headerlink" href="#filecmp" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/filecmp.html#filecmp.clear_cache" title="filecmp.clear_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">clear_cache()</span></code></a> 関数が追加されました。 <a class="reference internal" href="../library/filecmp.html#module-filecmp" title="filecmp: Compare files efficiently."><code class="xref py py-mod docutils literal notranslate"><span class="pre">filecmp</span></code></a> は <a class="reference internal" href="../library/os.html#os.stat" title="os.stat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.stat()</span></code></a> 情報をキャッシュして最後の比較時点からのファイルの変化をみていますが、このキャッシュをクリアします。これはたとえば、ファイルシステムのタイムスタンプフィールドの解像度未満の時間差で再比較したい場合に使えるでしょう。(Contributed by Mark Levitt in <a class="reference external" href="https://bugs.python.org/issue18149">bpo-18149</a>.)</p>
<p><a class="reference internal" href="../library/filecmp.html#filecmp.dircmp" title="filecmp.dircmp"><code class="xref py py-func docutils literal notranslate"><span class="pre">dircmp()</span></code></a> 関数に与える <em>ignore</em> パラメータのデフォルト値を、新規のモジュール属性 <a class="reference internal" href="../library/filecmp.html#filecmp.DEFAULT_IGNORES" title="filecmp.DEFAULT_IGNORES"><code class="xref py py-data docutils literal notranslate"><span class="pre">DEFAULT_IGNORES</span></code></a> で指定出来るようになりました。無視するディレクトリのリストで指定してください。(Contributed by Eli Bendersky in <a class="reference external" href="https://bugs.python.org/issue15442">bpo-15442</a>.)</p>
</div>
<div class="section" id="functools">
<h3>functools<a class="headerlink" href="#functools" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新たな <a class="reference internal" href="../library/functools.html#functools.partialmethod" title="functools.partialmethod"><code class="xref py py-func docutils literal notranslate"><span class="pre">partialmethod()</span></code></a> デスクリプタは、ちょうど普通の callable に対して <a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">partial()</span></code></a> がするように、デスクリプタへの引数部分適用を可能にします。この新しいデスクリプタをクラス定義内で使うと、簡単に (<a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">partial()</span></code></a> インスタンスを含む) 任意の callable を普通のインスタンスメソッドのように振舞わせることも出来ます。(Contributed by Alon Horev and Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue4331">bpo-4331</a>.)</p>
<p id="whatsnew-singledispatch">新たな <a class="reference internal" href="../library/functools.html#functools.singledispatch" title="functools.singledispatch"><code class="xref py py-func docutils literal notranslate"><span class="pre">singledispatch()</span></code></a> デコレータは、Python 標準ライブラリにシングルディスパッチのジェネリック関数のサポートを追加します。オブジェクト指向プログラミングは共通データ集合についての複数操作をまとめあげてクラスに押し込めようとしますが、ジェネリック関数は <em>異なった</em> 種類のデータに対して動作させたい操作の複数実装をひとつにまとめあげる考え方です。(---訳注: ここで「ジェネリック関数」と呼んでいるものを他の言語との類推で理解しようとすると、「呼び出す側目線」では同じで、「呼び出される側」目線では違うかもしれません。例えば C++ ユーザは「template の特殊化」もしくは「型ごとのオーバロード」との類推で理解してください。---)</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-160"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0443"><strong>PEP 443</strong></a> -- シングルディスパッチのジェネリック関数</dt>
<dd>PEP written and implemented by Łukasz Langa.</dd>
</dl>
</div>
<p><a class="reference internal" href="../library/functools.html#functools.total_ordering" title="functools.total_ordering"><code class="xref py py-func docutils literal notranslate"><span class="pre">total_ordering()</span></code></a> は基となる比較関数が <a class="reference internal" href="../library/constants.html#NotImplemented" title="NotImplemented"><code class="xref py py-const docutils literal notranslate"><span class="pre">NotImplemented</span></code></a> を値として返すのをサポートするようになりました。 (Contributed by Katie Miller in <a class="reference external" href="https://bugs.python.org/issue10042">bpo-10042</a>.) (---訳注: <a class="reference external" href="https://hg.python.org/cpython/rev/ad9f207645ab#l2.7">functools.py のコメント</a> 参照。---)</p>
<p><a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">partial()</span></code></a> 関数のピュア Python 版が標準ライブラリに追加されました。CPython の場合は C による高速版で置き換えられますが、ほかの Python 実装で利用出来ます。 (Contributed by Brian Thorne in <a class="reference external" href="https://bugs.python.org/issue12428">bpo-12428</a>.)</p>
</div>
<div class="section" id="gc">
<h3>gc<a class="headerlink" href="#gc" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/gc.html#gc.get_stats" title="gc.get_stats"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_stats()</span></code></a> は、インタプリタが開始してからの、世代ごと回収統計を持つ辞書の、3 世代ぶんのリストを返します。(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue16351">bpo-16351</a>.)</p>
</div>
<div class="section" id="glob">
<h3>glob<a class="headerlink" href="#glob" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/glob.html#glob.escape" title="glob.escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">escape()</span></code></a> は、glob 的な展開がなされないようにして字句通りの合致をするように、ファイル名に含まれる特殊文字をエスケープする手段となります。(Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue8402">bpo-8402</a>.)</p>
</div>
<div class="section" id="hashlib">
<h3>hashlib<a class="headerlink" href="#hashlib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新たな関数 <a class="reference internal" href="../library/hashlib.html#hashlib.pbkdf2_hmac" title="hashlib.pbkdf2_hmac"><code class="xref py py-func docutils literal notranslate"><span class="pre">hashlib.pbkdf2_hmac()</span></code></a> は <a class="reference external" href="https://en.wikipedia.org/wiki/PBKDF2">PKCS#5 パスワードベースの鍵導出関数２</a> を提供します。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue18582">bpo-18582</a>.)</p>
<p><a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> のハッシュオブジェクトの <a class="reference internal" href="../library/hashlib.html#hashlib.hash.name" title="hashlib.hash.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a> 属性が、公式にサポートされるインターフェイスになりました。これは CPython の <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> には以前から存在していました (ただしサポートされるハッシュの名前を必ずしも小文字で返してはいませんでした) が、公開インターフェイスとしていなかったために、ほかのいくつかの Python 実装では以前はサポートされていませんでした。(Contributed by Jason R. Coombs in <a class="reference external" href="https://bugs.python.org/issue18532">bpo-18532</a>.)</p>
</div>
<div class="section" id="hmac">
<h3>hmac<a class="headerlink" href="#hmac" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/hmac.html#module-hmac" title="hmac: Keyed-Hashing for Message Authentication (HMAC) implementation"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hmac</span></code></a> は、 <a class="reference internal" href="../library/hmac.html#hmac.new" title="hmac.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">new()</span></code></a> の <em>key</em> 引数として <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> と <code class="docutils literal notranslate"><span class="pre">bytes</span></code> を許容するようになり、また、 <a class="reference internal" href="../library/hmac.html#hmac.new" title="hmac.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">new()</span></code></a> 関数と <a class="reference internal" href="../library/hmac.html#hmac.HMAC.update" title="hmac.HMAC.update"><code class="xref py py-meth docutils literal notranslate"><span class="pre">update()</span></code></a> メソッドの両方への <em>msg</em> パラメータとして、 <a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> モジュールがサポートする任意の型を許容するようになりました。(Contributed by Jonas Borgström in <a class="reference external" href="https://bugs.python.org/issue18240">bpo-18240</a>.)</p>
<p><a class="reference internal" href="../library/hmac.html#hmac.new" title="hmac.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">hmac.new()</span></code></a> 関数への <em>digestmod</em> 引数には、<a class="reference internal" href="../library/hashlib.html#module-hashlib" title="hashlib: Secure hash and message digest algorithms."><code class="xref py py-mod docutils literal notranslate"><span class="pre">hashlib</span></code></a> が認識する任意のハッシュダイジェスト名を渡せるようになりました。これとともに、 <em>digestmod</em> のデフォルトとして <code class="docutils literal notranslate"><span class="pre">MD5</span></code> を使う現在の振る舞いは非推奨です。将来のバージョンの Python ではこれのデフォルト値はなくなり、指定が必須になります。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue17276">bpo-17276</a>.)</p>
<p><a class="reference internal" href="../library/hmac.html#hmac.HMAC.block_size" title="hmac.HMAC.block_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">block_size</span></code></a> 属性と <a class="reference internal" href="../library/hmac.html#hmac.HMAC.name" title="hmac.HMAC.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">name</span></code></a> 属性 (と <a class="reference internal" href="../library/hmac.html#hmac.HMAC.digest_size" title="hmac.HMAC.digest_size"><code class="xref py py-attr docutils literal notranslate"><span class="pre">digest_size</span></code></a> 属性の公式ドキュメント) の追加をもって、 <a class="reference internal" href="../library/hmac.html#module-hmac" title="hmac: Keyed-Hashing for Message Authentication (HMAC) implementation"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hmac</span></code></a> モジュールは完全に <span class="target" id="index-161"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0247"><strong>PEP 247</strong></a> API を遵守するものとなりました。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue18775">bpo-18775</a>.)</p>
</div>
<div class="section" id="html">
<h3>html<a class="headerlink" href="#html" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/html.html#html.unescape" title="html.unescape"><code class="xref py py-func docutils literal notranslate"><span class="pre">unescape()</span></code></a> は HTML5 文字参照を対応する Unicode 文字に変換します。 (Contributed by Ezio Melotti in <a class="reference external" href="https://bugs.python.org/issue2927">bpo-2927</a>.)</p>
<p><a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTMLParser</span></code></a> が新規キーワード引数 <em>convert_charrefs</em> を受け取ります。これが <code class="docutils literal notranslate"><span class="pre">True</span></code> の場合に、全ての文字参照が自動的に変換されます。後方互換性の問題から今はこのデフォルトを <code class="docutils literal notranslate"><span class="pre">False</span></code> にしてありますが、将来バージョンの Python でこれを <code class="docutils literal notranslate"><span class="pre">True</span></code> に変えます。ですから値は明示的にセットしてこの新しい機能を使うように更新しておくと良いです。(Contributed by Ezio Melotti in <a class="reference external" href="https://bugs.python.org/issue13633">bpo-13633</a>.)</p>
<p><a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTMLParser</span></code></a> の <em>strict</em> 引数が非推奨となりました。 (Contributed by Ezio Melotti in <a class="reference external" href="https://bugs.python.org/issue15114">bpo-15114</a>.)</p>
</div>
<div class="section" id="http">
<h3>http<a class="headerlink" href="#http" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/http.server.html#http.server.BaseHTTPRequestHandler.send_error" title="http.server.BaseHTTPRequestHandler.send_error"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_error()</span></code></a> がオプショナルなパラメータ <em>explain</em> を受け付けるようになりました。指定されると、拡張のエラー説明を提供するにあたって、ハードコードされたデフォルトの代わりに使われます。この拡張のエラー説明は <code class="xref py py-attr docutils literal notranslate"><span class="pre">error_message_format</span></code> 属性を使ってフォーマットされて、エラーレスポンスのメッセージボディとして送信されます。(Contributed by Karl Cow in <a class="reference external" href="https://bugs.python.org/issue12921">bpo-12921</a>.)</p>
<p><a class="reference internal" href="../library/http.server.html#module-http.server" title="http.server: HTTP server and request handlers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.server</span></code></a> の <a class="reference internal" href="../library/http.server.html#http-server-cli"><span class="std std-ref">コマンドラインインターフェイス</span></a> に <code class="docutils literal notranslate"><span class="pre">-b/--bind</span></code> オプションが追加されました。これは特定のアドレスで listen することを指示します。 (Contributed by Malte Swart in <a class="reference external" href="https://bugs.python.org/issue17764">bpo-17764</a>.) (---訳注: ネットワークプログラミングに詳しい人ほど混乱しそうなので一応。 <code class="docutils literal notranslate"><span class="pre">--bind</span></code> というオプション名が示すとおり、より正確に表現するなら「ユーザ指定のネットワークインターフェイスに bind」。コミットログの表現「Expose --bind argument for http.server, enable http.server to bind to a user specified network interface.」の方がわかりやすいかと。  ---)</p>
</div>
<div class="section" id="idlelib-and-idle">
<h3>idlelib と IDLE<a class="headerlink" href="#idlelib-and-idle" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>idlelib は IDLE シェルとエディタを実装するものであってほかのプログラムからインポートされることを意図してはいないので、改善は毎度のリリースごとに行われます。3.3.0 から始まり、また将来の 3.4.x リリースになされる累積的な変更リストは <code class="file docutils literal notranslate"><span class="pre">Lib/idlelib/NEWS.txt</span></code> で読むことが出来ます。このファイルは IDLE で <span class="menuselection">Help ‣ About IDLE</span> からも辿り着けます。</p>
</div>
<div class="section" id="importlib">
<h3>importlib<a class="headerlink" href="#importlib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader" title="importlib.abc.InspectLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">InspectLoader</span></code></a> ABC に新規メソッド <a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader.source_to_code" title="importlib.abc.InspectLoader.source_to_code"><code class="xref py py-meth docutils literal notranslate"><span class="pre">source_to_code()</span></code></a> が追加されました。ソースデータとパスを受け取り、コードオブジェクトを返します。これのデフォルト実装は <code class="docutils literal notranslate"><span class="pre">compile(data,</span> <span class="pre">path,</span> <span class="pre">'exec',</span> <span class="pre">dont_inherit=True)</span></code> と同じです。 (Contributed by Eric Snow and Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue15627">bpo-15627</a>.)</p>
<p><a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader" title="importlib.abc.InspectLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">InspectLoader</span></code></a> では <a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader.get_code" title="importlib.abc.InspectLoader.get_code"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_code()</span></code></a> メソッドへのデフォルト実装追加も行われました。とはいえ性能面の理由より、通常はデフォルト実装をオーバライドすることが望ましいです。 (Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue18072">bpo-18072</a>.)</p>
<p><a class="reference internal" href="../library/imp.html#module-imp" title="imp: Access the implementation of the import statement. (非推奨)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></a> モジュール撤廃に向けて、 <a class="reference internal" href="../library/imp.html#module-imp" title="imp: Access the implementation of the import statement. (非推奨)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></a> にあった reload が <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> <a class="reference internal" href="../library/importlib.html#importlib.reload" title="importlib.reload"><code class="xref py py-func docutils literal notranslate"><span class="pre">reload()</span></code></a> 関数に移動しました。 (Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue18193">bpo-18193</a>.)</p>
<p><a class="reference internal" href="../library/importlib.html#module-importlib.util" title="importlib.util: Utility code for importers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib.util</span></code></a> に <a class="reference internal" href="../library/importlib.html#importlib.util.MAGIC_NUMBER" title="importlib.util.MAGIC_NUMBER"><code class="xref py py-data docutils literal notranslate"><span class="pre">MAGIC_NUMBER</span></code></a> 属性が追加されました。これはバイトコードのバージョン番号へのアクセスを提供します。これは非推奨の <a class="reference internal" href="../library/imp.html#module-imp" title="imp: Access the implementation of the import statement. (非推奨)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></a> モジュールにある <a class="reference internal" href="../library/imp.html#imp.get_magic" title="imp.get_magic"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_magic()</span></code></a> 関数を置き換えるものです。 (Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue18192">bpo-18192</a>.)</p>
<p>撤廃されるモジュール <a class="reference internal" href="../library/imp.html#module-imp" title="imp: Access the implementation of the import statement. (非推奨)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></a> での同名関数を置き換える新規関数として、 <a class="reference internal" href="../library/importlib.html#module-importlib.util" title="importlib.util: Utility code for importers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib.util</span></code></a> 関数の <a class="reference internal" href="../library/importlib.html#importlib.util.cache_from_source" title="importlib.util.cache_from_source"><code class="xref py py-func docutils literal notranslate"><span class="pre">cache_from_source()</span></code></a> と <a class="reference internal" href="../library/importlib.html#importlib.util.source_from_cache" title="importlib.util.source_from_cache"><code class="xref py py-func docutils literal notranslate"><span class="pre">source_from_cache()</span></code></a> が追加されました。 (Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue18194">bpo-18194</a>.)</p>
<p><a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> ブートストラップ <code class="xref py py-class docutils literal notranslate"><span class="pre">NamespaceLoader</span></code> が <a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader" title="importlib.abc.InspectLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">InspectLoader</span></code></a> ABC に従うようになりました。つまりこれにより <code class="docutils literal notranslate"><span class="pre">runpy</span></code> と <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span></code> が名前空間パッケージに対して使えるようになりました。(Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue18058">bpo-18058</a>.)  (訳注: 3.3 以降の名前空間パッケージについては What's New In Python 3.3 (<span class="target" id="index-162"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0420"><strong>PEP 420</strong></a>) 参照。)</p>
<p><a class="reference internal" href="../library/importlib.html#module-importlib.util" title="importlib.util: Utility code for importers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib.util</span></code></a> に <a class="reference internal" href="../library/importlib.html#importlib.util.decode_source" title="importlib.util.decode_source"><code class="xref py py-func docutils literal notranslate"><span class="pre">decode_source()</span></code></a> 関数が追加されました。 <a class="reference internal" href="../glossary.html#term-universal-newlines"><span class="xref std std-term">universal newlines</span></a> 処理を使って bytes からソースをデコードします。 <a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader.get_source" title="importlib.abc.InspectLoader.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">InspectLoader.get_source()</span></code></a> メソッドを実装するのに便利です。</p>
<p><a class="reference internal" href="../library/importlib.html#importlib.machinery.ExtensionFileLoader" title="importlib.machinery.ExtensionFileLoader"><code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.machinery.ExtensionFileLoader</span></code></a> に <a class="reference internal" href="../library/importlib.html#importlib.machinery.ExtensionFileLoader.get_filename" title="importlib.machinery.ExtensionFileLoader.get_filename"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_filename()</span></code></a> メソッドが追加されました。これは本来実装されるべきものでしたが見落とされていました。(Contributed by Eric Snow in <a class="reference external" href="https://bugs.python.org/issue19152">bpo-19152</a>.)</p>
</div>
<div class="section" id="inspect">
<h3>inspect<a class="headerlink" href="#inspect" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> モジュールに、ソースコードおよびモジュール・クラス・関数についてのその他情報を手早く表示するための、基礎的な <a class="reference internal" href="../library/inspect.html#inspect-module-cli"><span class="std std-ref">コマンドラインインターフェイス</span></a> が追加されました。  (Contributed by Claudiu Popa and Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue18626">bpo-18626</a>.)</p>
<p>新規の <a class="reference internal" href="../library/inspect.html#inspect.unwrap" title="inspect.unwrap"><code class="xref py py-func docutils literal notranslate"><span class="pre">unwrap()</span></code></a> で、 <a class="reference internal" href="../library/functools.html#functools.wraps" title="functools.wraps"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.wraps()</span></code></a> (やラッパー関数に <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> 属性をセットするその他 API) で作られたラッパー関数のチェインを、簡単にほどくことが出来ます。 (Contributed by Daniel Urban, Aaron Iles and Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue13266">bpo-13266</a>.) (---訳注: 「簡単に」の意味するところについて、 <a class="reference internal" href="#changes-in-the-python-api">Python API の変更</a> に記述されている <code class="docutils literal notranslate"><span class="pre">functools.update_wrapper()</span></code> と <code class="docutils literal notranslate"><span class="pre">functools.wraps()</span></code> の変更も参照して下さい。---)</p>
<p>新規 <a class="reference internal" href="../library/enum.html#module-enum" title="enum: Implementation of an enumeration class."><code class="xref py py-mod docutils literal notranslate"><span class="pre">enum</span></code></a> モジュールが実装されたことを受け <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> モジュールは、カスタム <code class="docutils literal notranslate"><span class="pre">__dir__</span></code> メソッドに対する、またメタクラスを介して提供される動的クラス属性に対する、ずっと良いサポートを提供出来るようになりました。 (Contributed by Ethan Furman in <a class="reference external" href="https://bugs.python.org/issue18929">bpo-18929</a> and <a class="reference external" href="https://bugs.python.org/issue19030">bpo-19030</a>.)</p>
<p><a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">getfullargspec()</span></code></a> と <a class="reference internal" href="../library/inspect.html#inspect.getargspec" title="inspect.getargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">getargspec()</span></code></a> が <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">signature()</span></code></a> API を使うようになりました。このことで、以前より遥かに幅広い callable をサポートするようになっています。それには <code class="docutils literal notranslate"><span class="pre">__signature__</span></code> 属性を含むもの、 Argument Clinic で提供されるメタデータを含むもの、あるいは <a class="reference internal" href="../library/functools.html#functools.partial" title="functools.partial"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.partial()</span></code></a> オブジェクト、なども含まれます。 <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">signature()</span></code></a> そのものとは違い、今でも <a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">getfullargspec()</span></code></a>, <a class="reference internal" href="../library/inspect.html#inspect.getargspec" title="inspect.getargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">getargspec()</span></code></a> は <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> 属性を無視し、そして束縛されたメソッドで最初に束縛された引数を報告するので、それが望みでないならば <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">signature()</span></code></a> を直接使うようにあなたのコードを更新する必要があります。(Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue17481">bpo-17481</a>.) (---訳注: What's New In Python 3.5 を参照してください。 <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">signature()</span></code></a> により <a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">getfullargspec()</span></code></a> と <a class="reference internal" href="../library/inspect.html#inspect.getargspec" title="inspect.getargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">getargspec()</span></code></a> は結果として非推奨となりました。---)</p>
<p><a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">signature()</span></code></a> が CPython 関数のダックタイプをサポートするようになりました。これは Cython でコンパイルされた関数をサポートすることになります。 (Contributed by Stefan Behnel and Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue17159">bpo-17159</a>.) (---訳注: duck type はここでは「 <code class="docutils literal notranslate"><span class="pre">types.FunctionType</span></code> であることを要求しない」の意味。 <a class="reference external" href="https://hg.python.org/cpython/file/32a660a52aae/Lib/inspect.py#l1604">_signature_is_functionlike</a> 参照。 ---)</p>
</div>
<div class="section" id="ipaddress">
<h3>ipaddress<a class="headerlink" href="#ipaddress" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> は Python 3.3 で標準ライブラリに <a class="reference internal" href="../glossary.html#term-provisional-api"><span class="xref std std-term">暫定 API</span></a> として追加されました。Python 3.4 リリースで、この但し書きは削除されました: <a class="reference internal" href="../library/ipaddress.html#module-ipaddress" title="ipaddress: IPv4/IPv6 manipulation library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ipaddress</span></code></a> は今や安定 API とみなされ、今後は通常の標準ライブラリの後方互換性維持要件に従います。</p>
<p>新規のプロパティ <a class="reference internal" href="../library/ipaddress.html#ipaddress.IPv4Address.is_global" title="ipaddress.IPv4Address.is_global"><code class="xref py py-attr docutils literal notranslate"><span class="pre">is_global</span></code></a> は、アドレスが routeable である場合に <code class="docutils literal notranslate"><span class="pre">True</span></code> を返します。 (Contributed by Peter Moody in <a class="reference external" href="https://bugs.python.org/issue17400">bpo-17400</a>.) (---訳注: リファレンスマニュアルでは routeable という表現ではなく「アドレスがパブリックネットワークに割り当てられている場合」。---)</p>
</div>
<div class="section" id="logging">
<h3>logging<a class="headerlink" href="#logging" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/logging.handlers.html#logging.handlers.TimedRotatingFileHandler" title="logging.handlers.TimedRotatingFileHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimedRotatingFileHandler</span></code></a> に <em>atTime</em> パラメータが追加されました。ロールオーバ対象となる日付での時刻を指定します。 (Contributed by Ronald Oussoren in <a class="reference external" href="https://bugs.python.org/issue9556">bpo-9556</a>.)</p>
<p><a class="reference internal" href="../library/logging.handlers.html#logging.handlers.SocketHandler" title="logging.handlers.SocketHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">SocketHandler</span></code></a> と <a class="reference internal" href="../library/logging.handlers.html#logging.handlers.DatagramHandler" title="logging.handlers.DatagramHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">DatagramHandler</span></code></a> が Unix ドメインソケットをサポートするようになりました (<em>port</em> に <code class="docutils literal notranslate"><span class="pre">None</span></code> をセットすることで)。 (Contributed by Vinay Sajip in commit <a class="reference external" href="https://hg.python.org/cpython/rev/ce46195b56a9">ce46195b56a9</a> .)</p>
<p><a class="reference internal" href="../library/logging.config.html#logging.config.fileConfig" title="logging.config.fileConfig"><code class="xref py py-func docutils literal notranslate"><span class="pre">fileConfig()</span></code></a> が <em>fname</em> パラメータとして <a class="reference internal" href="../library/configparser.html#configparser.RawConfigParser" title="configparser.RawConfigParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">configparser.RawConfigParser</span></code></a> のサブクラスを許容するようになりました。これはロギングの設定がアプリケーション全体の設定の一部に過ぎない場合や、 <a class="reference internal" href="../library/logging.config.html#logging.config.fileConfig" title="logging.config.fileConfig"><code class="xref py py-func docutils literal notranslate"><span class="pre">fileConfig()</span></code></a> に渡す前にアプリケーションが設定を修正するような場合でも設定ファイルを使用することを容易にします。(Contributed by Vinay Sajip in <a class="reference external" href="https://bugs.python.org/issue16110">bpo-16110</a>.)</p>
<p><a class="reference internal" href="../library/logging.config.html#logging.config.listen" title="logging.config.listen"><code class="xref py py-func docutils literal notranslate"><span class="pre">logging.config.listen()</span></code></a> 関数経由でソケットから受信したロギング設定データを、処理前に検証出来るようになりました。新規のキーワード引数 <em>verify</em> に検証関数を渡すことで可能です。(Contributed by Vinay Sajip in <a class="reference external" href="https://bugs.python.org/issue15452">bpo-15452</a>.)</p>
</div>
<div class="section" id="marshal">
<span id="whatsnew-marshal-3"></span><h3>marshal<a class="headerlink" href="#marshal" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/marshal.html#module-marshal" title="marshal: Convert Python objects to streams of bytes and back (with different constraints)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">marshal</span></code></a> のバージョンが 3 に上げられました。新バージョンを実装しているコードは、intern された文字列をただ一つのコピーだけ記録しておきデシリアライズでその intern を維持するという Python 2 での振舞いを復活させつつ、「ただ一つのコピー」を文字列型のみならず任意のオブジェクト型に (再帰参照の処理も含め) 拡張しています。これは <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> ファイルのサイズを削減し、また、 <code class="docutils literal notranslate"><span class="pre">.pyc</span></code> (または <code class="docutils literal notranslate"><span class="pre">.pyo</span></code>) ファイルからロードされる際にモジュールが占めるメモリ量を削減します。(Contributed by Kristján Valur Jónsson in <a class="reference external" href="https://bugs.python.org/issue16475">bpo-16475</a>, with additional speedups by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue19219">bpo-19219</a>.)</p>
</div>
<div class="section" id="mmap">
<h3>mmap<a class="headerlink" href="#mmap" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>mmap オブジェクトが <a class="reference internal" href="../library/weakref.html#module-weakref" title="weakref: Support for weak references and weak dictionaries."><code class="xref py py-mod docutils literal notranslate"><span class="pre">weakref</span></code></a> 可能になりました。 (Contributed by Valerie Lambert in <a class="reference external" href="https://bugs.python.org/issue4885">bpo-4885</a>.)</p>
</div>
<div class="section" id="multiprocessing">
<h3>multiprocessing<a class="headerlink" href="#multiprocessing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p id="whatsnew-multiprocessing-no-fork"><a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> を使ってプロセスを開始する <a class="reference internal" href="../library/multiprocessing.html#multiprocessing-start-methods"><span class="std std-ref">開始方式</span></a> として、Unix において 2 つ、 <code class="docutils literal notranslate"><span class="pre">spawn</span></code> と <code class="docutils literal notranslate"><span class="pre">forkserver</span></code> が追加されました。これらはスレッドとプロセスのミックスをより堅牢にし、また、 <code class="docutils literal notranslate"><span class="pre">spawn</span></code> は multiprocessing が以前から常に Windows で使ってきたセマンティクスと一致します。新規関数の、 <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.get_all_start_methods" title="multiprocessing.get_all_start_methods"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_all_start_methods()</span></code></a> はプラットフォームで利用出来るすべての開始方式を報告し、 <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.get_start_method" title="multiprocessing.get_start_method"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_start_method()</span></code></a> は現在設定されている開始方式を報告し、 <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.set_start_method" title="multiprocessing.set_start_method"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_start_method()</span></code></a> は開始方式を設定します。(Contributed by Richard Oudkerk in <a class="reference external" href="https://bugs.python.org/issue8713">bpo-8713</a>.)</p>
<p><a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> には、子プロセスがどのように作られるかを決定する <code class="docutils literal notranslate"><span class="pre">context</span></code> のコンセプトが追加されています。新規関数 <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.get_context" title="multiprocessing.get_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_context()</span></code></a> は指定した開始方式を使うコンテキストを返します。コンテキストは <a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> モジュール自身と同じ API を持っているので、コンテキスト内で操作する <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.pool.Pool" title="multiprocessing.pool.Pool"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pool</span></code></a> や他のオブジェクトを、それを使って作成することが出来ます。コンテキストによって、フレームワークとアプリケーションあるいは同じアプリケーションの別の部分が相互に干渉しあわないようにして multiprocessing を使うことが出来ます。(Contributed by Richard Oudkerk in <a class="reference external" href="https://bugs.python.org/issue18999">bpo-18999</a>.)</p>
<p>昔からの <em>fork</em> 開始方式を除き、子プロセスはもはや必要のないハンドル・ファイル記述子をその親から継承しません。 (part of <a class="reference external" href="https://bugs.python.org/issue8713">bpo-8713</a>).</p>
<p><a class="reference internal" href="../library/multiprocessing.html#module-multiprocessing" title="multiprocessing: Process-based parallelism."><code class="xref py py-mod docutils literal notranslate"><span class="pre">multiprocessing</span></code></a> が開始方式に <code class="docutils literal notranslate"><span class="pre">spawn</span></code> または <code class="docutils literal notranslate"><span class="pre">forkserver</span></code> を使う場合に、子プロセスで適切に <code class="docutils literal notranslate"><span class="pre">__main__</span></code> を初期化するために <a class="reference internal" href="../library/runpy.html#module-runpy" title="runpy: Locate and run Python modules without importing them first."><code class="xref py py-mod docutils literal notranslate"><span class="pre">runpy</span></code></a> (これが <code class="docutils literal notranslate"><span class="pre">-m</span></code> スイッチを実装しています) に頼るようになりました。これは、 multiprocessing と <code class="docutils literal notranslate"><span class="pre">-m</span></code> コマンドラインスイッチ・明示的な相対インポートを組み合わせると子プロセスが不可解に失敗していたような、いくつかの際どい問題を解決します。 (Contributed by Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue19946">bpo-19946</a>.)</p>
</div>
<div class="section" id="operator">
<h3>operator<a class="headerlink" href="#operator" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/operator.html#operator.length_hint" title="operator.length_hint"><code class="xref py py-func docutils literal notranslate"><span class="pre">length_hint()</span></code></a> は、言語仕様となった特殊メソッド <a class="reference internal" href="../reference/datamodel.html#object.__length_hint__" title="object.__length_hint__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__length_hint__()</span></code></a> の <span class="target" id="index-163"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0424"><strong>PEP 424</strong></a> 公式仕様の一環として、それがどのように使われるのかについて詳述する実装を提供します。(Contributed by Armin Ronacher in <a class="reference external" href="https://bugs.python.org/issue16148">bpo-16148</a>.)</p>
<p>参照実装として、また Python 実装の代替として用いることが出来る、 <a class="reference internal" href="../library/operator.html#module-operator" title="operator: Functions corresponding to the standard operators."><code class="xref py py-mod docutils literal notranslate"><span class="pre">operator</span></code></a> モジュールのピュア Python 版が書かれました。 (Contributed by Zachary Ware in <a class="reference external" href="https://bugs.python.org/issue16694">bpo-16694</a>.)</p>
</div>
<div class="section" id="os">
<h3>os<a class="headerlink" href="#os" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数により <a class="reference internal" href="../library/os.html#fd-inheritance"><span class="std std-ref">継承可能フラグ</span></a> を制御出来るようになりました。ファイル記述子には <a class="reference internal" href="../library/os.html#os.get_inheritable" title="os.get_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.get_inheritable()</span></code></a>, <a class="reference internal" href="../library/os.html#os.set_inheritable" title="os.set_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.set_inheritable()</span></code></a> を、Windows のハンドルには <a class="reference internal" href="../library/os.html#os.get_handle_inheritable" title="os.get_handle_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.get_handle_inheritable()</span></code></a>, <a class="reference internal" href="../library/os.html#os.set_handle_inheritable" title="os.set_handle_inheritable"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.set_handle_inheritable()</span></code></a> を使います。</p>
<p>関数 <a class="reference internal" href="../library/os.html#os.cpu_count" title="os.cpu_count"><code class="xref py py-func docutils literal notranslate"><span class="pre">cpu_count()</span></code></a> が追加されました。これは Python を実行しているプラットフォームで利用可能な CPU 数を返します (決定できない場合は <code class="docutils literal notranslate"><span class="pre">None</span></code> を返します)。既存の <a class="reference internal" href="../library/multiprocessing.html#multiprocessing.cpu_count" title="multiprocessing.cpu_count"><code class="xref py py-func docutils literal notranslate"><span class="pre">multiprocessing.cpu_count()</span></code></a> はこの関数の値を返すようになりました。(Contributed by Trent Nelson, Yogesh Chaudhari, Victor Stinner, and Charles-François Natali in <a class="reference external" href="https://bugs.python.org/issue17914">bpo-17914</a>.)</p>
<p><a class="reference internal" href="../library/os.path.html#os.path.samestat" title="os.path.samestat"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.samestat()</span></code></a> が Windows プラットフォームでも動作するようになりました (また、 <a class="reference internal" href="../library/os.path.html#os.path.samefile" title="os.path.samefile"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.samefile()</span></code></a> の実装は Unix と Windows で共有されました)。 (Contributed by Brian Curtin in <a class="reference external" href="https://bugs.python.org/issue11939">bpo-11939</a>.)</p>
<p><a class="reference internal" href="../library/os.path.html#os.path.ismount" title="os.path.ismount"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.path.ismount()</span></code></a> が Windows において、ドライブルートよりも下にあるマウントポイントを認識するようになりました。  (Contributed by Tim Golden in <a class="reference external" href="https://bugs.python.org/issue9035">bpo-9035</a>.)</p>
<p><a class="reference internal" href="../library/os.html#os.open" title="os.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.open()</span></code></a> が新たな 2 つのフラグを、それを提供しているプラットフォームでサポートするようになりました。 <a class="reference internal" href="../library/os.html#os.O_PATH" title="os.O_PATH"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_PATH</span></code></a> (未オープンファイル記述子)、 <a class="reference internal" href="../library/os.html#os.O_TMPFILE" title="os.O_TMPFILE"><code class="xref py py-data docutils literal notranslate"><span class="pre">O_TMPFILE</span></code></a> (名前なし一時ファイル; Python 3.4.0 リリース時点では、 uapi ヘッダを持っているカーネルバージョン 3.11 以降の Linux システムでのみ利用可能) です。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue18673">bpo-18673</a> and Benjamin Peterson, respectively.)</p>
</div>
<div class="section" id="pdb">
<h3>pdb<a class="headerlink" href="#pdb" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a> が、ジェネレータ、 <a class="reference internal" href="../reference/simple_stmts.html#yield"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">yield</span></code></a> 、 <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">from</span></code> をより価値ある方法で処理するように強化されました。これは <a class="reference internal" href="../library/asyncio.html#module-asyncio" title="asyncio: Asynchronous I/O."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncio</span></code></a> ベースのプログラムをデバッグする際にとりわけ助けとなります。 (Contributed by Andrew Svetlov and Xavier de Gaye in <a class="reference external" href="https://bugs.python.org/issue16596">bpo-16596</a>.)</p>
<p><a class="reference internal" href="../library/pdb.html#module-pdb" title="pdb: The Python debugger for interactive interpreters."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pdb</span></code></a> から <code class="docutils literal notranslate"><span class="pre">print</span></code> コマンドは削除され、pdb コマンドラインからの Python <a class="reference internal" href="../library/functions.html#print" title="print"><code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code></a> 関数へのアクセスを取り戻しました。 Python 2 の <code class="docutils literal notranslate"><span class="pre">pdb</span></code> には <code class="docutils literal notranslate"><span class="pre">print</span></code> コマンドはなく <code class="docutils literal notranslate"><span class="pre">print</span></code> の入力は Python 2 の <code class="docutils literal notranslate"><span class="pre">print</span></code> 文を実行していました。 Python 3 で pdb の <a class="reference internal" href="../library/pdb.html#pdbcommand-p"><code class="xref std std-pdbcmd docutils literal notranslate"><span class="pre">p</span></code></a> コマンドへのエイリアスとして <code class="docutils literal notranslate"><span class="pre">print</span></code> を作ったのが間違いでした。 <code class="docutils literal notranslate"><span class="pre">p</span></code> はその引数の <code class="docutils literal notranslate"><span class="pre">repr</span></code> を表示するのであって、Python 2 での <code class="docutils literal notranslate"><span class="pre">print</span></code> コマンドがしていた <code class="docutils literal notranslate"><span class="pre">str</span></code> を表示するのではありません。さらに悪いことに、Python 3 の <code class="docutils literal notranslate"><span class="pre">pdb</span> <span class="pre">print</span></code> コマンドは Python 3 の <code class="docutils literal notranslate"><span class="pre">print</span></code> 関数を隠してしまい、 <code class="docutils literal notranslate"><span class="pre">pdb</span></code> プロンプトからのアクセスを出来なくしていたのでした。 (Contributed by Connor Osborn in <a class="reference external" href="https://bugs.python.org/issue18764">bpo-18764</a>.)</p>
</div>
<div class="section" id="pickle">
<span id="whatsnew-protocol-4"></span><h3>pickle<a class="headerlink" href="#pickle" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/pickle.html#module-pickle" title="pickle: Convert Python objects to streams of bytes and back."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pickle</span></code></a> で新 pickle プロトコル 4 が追加されました (デフォルトにはされていません)。この新プロトコルは、入れ子のクラスや巨大な文字列・コンテナやキーワード専用引数を取る <a class="reference internal" href="../reference/datamodel.html#object.__new__" title="object.__new__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__new__()</span></code></a> メソッドを持つクラスなどにまつわるシリアライズの問題など、以前のプロトコルに存在していた数多くの問題を措置しています。ほかにもいくつか効率面での改善が入っています。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-164"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-3154"><strong>PEP 3154</strong></a> -- Pickle プロトコル 4</dt>
<dd>PEP written by Antoine Pitrou and implemented by Alexandre Vassalotti.</dd>
</dl>
</div>
</div>
<div class="section" id="plistlib">
<h3>plistlib<a class="headerlink" href="#plistlib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/plistlib.html#module-plistlib" title="plistlib: Generate and parse Mac OS X plist files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">plistlib</span></code></a> が、ほかのシリアライズ化プロトコルを扱う標準ライブラリでのお決まりのパターンに従った新 API を追加しました。 <a class="reference internal" href="../library/plistlib.html#plistlib.load" title="plistlib.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.dump" title="plistlib.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.loads" title="plistlib.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">loads()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.dumps" title="plistlib.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">dumps()</span></code></a> です。(なので旧 API は非推奨です。) また、既にサポートされている XML plist フォーマット (<a class="reference internal" href="../library/plistlib.html#plistlib.FMT_XML" title="plistlib.FMT_XML"><code class="xref py py-data docutils literal notranslate"><span class="pre">FMT_XML</span></code></a>) に加えてバイナリ plist フォーマット(<a class="reference internal" href="../library/plistlib.html#plistlib.FMT_BINARY" title="plistlib.FMT_BINARY"><code class="xref py py-data docutils literal notranslate"><span class="pre">FMT_BINARY</span></code></a>) のサポートも追加されました。 (Contributed by Ronald Oussoren and others in <a class="reference external" href="https://bugs.python.org/issue14455">bpo-14455</a>.)</p>
</div>
<div class="section" id="poplib">
<h3>poplib<a class="headerlink" href="#poplib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/poplib.html#module-poplib" title="poplib: POP3 protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">poplib</span></code></a> に 2 つの新規メソッドが追加されました。 <a class="reference internal" href="../library/poplib.html#poplib.POP3.capa" title="poplib.POP3.capa"><code class="xref py py-meth docutils literal notranslate"><span class="pre">capa()</span></code></a> は POP サーバにより公表された機能リストを返します。 <a class="reference internal" href="../library/poplib.html#poplib.POP3.stls" title="poplib.POP3.stls"><code class="xref py py-meth docutils literal notranslate"><span class="pre">stls()</span></code></a> は平文 POP3 セッションを、POP サーバがサポートしていれば暗号化された POP3 セッションに切り替えます。 (Contributed by Lorenzo Catucci in <a class="reference external" href="https://bugs.python.org/issue4473">bpo-4473</a>.)</p>
</div>
<div class="section" id="pprint">
<h3>pprint<a class="headerlink" href="#pprint" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/pprint.html#module-pprint" title="pprint: Data pretty printer."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pprint</span></code></a> モジュールの、 <a class="reference internal" href="../library/pprint.html#pprint.PrettyPrinter" title="pprint.PrettyPrinter"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrettyPrinter</span></code></a> クラス、 <a class="reference internal" href="../library/pprint.html#pprint.pformat" title="pprint.pformat"><code class="xref py py-func docutils literal notranslate"><span class="pre">pformat()</span></code></a> 関数、 <a class="reference internal" href="../library/pprint.html#pprint.pprint" title="pprint.pprint"><code class="xref py py-func docutils literal notranslate"><span class="pre">pprint()</span></code></a> 関数に、新規オプション <em>compact</em> が追加されました。これは出力方法を制御するもので、今のところのこれの <code class="docutils literal notranslate"><span class="pre">True</span></code> での振舞いは、個々の (インデントされた) 行を <em>width</em> 幅で出来るだけ多くのシーケンスの要素が収まるように出力します。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19132">bpo-19132</a>.)</p>
<p>長い文字列が Python の普通の行継続構文で折り返されるようになりました。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue17150">bpo-17150</a>.)</p>
</div>
<div class="section" id="pty">
<h3>pty<a class="headerlink" href="#pty" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/pty.html#pty.spawn" title="pty.spawn"><code class="xref py py-func docutils literal notranslate"><span class="pre">pty.spawn()</span></code></a> が <code class="docutils literal notranslate"><span class="pre">None</span></code> ではなく <a class="reference internal" href="../library/os.html#os.waitpid" title="os.waitpid"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.waitpid()</span></code></a> からの戻り値から取ったステータス値を返すようになりました。 (Contributed by Gregory P. Smith.)</p>
</div>
<div class="section" id="pydoc">
<h3>pydoc<a class="headerlink" href="#pydoc" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> モジュールがイントロスペクション API <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a> に直接基くようになりました。これによりより幅広く callable オブジェクトのシグニチャ情報を提供出来るようになりました。この変更は、ヘルプ情報表示の際に <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> 属性も考慮に入れられることも意味しています。(Contributed by Larry Hastings in <a class="reference external" href="https://bugs.python.org/issue19674">bpo-19674</a>.)</p>
<p><a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> モジュールはもはや既に束縛済みのメソッドでは <code class="docutils literal notranslate"><span class="pre">self</span></code> パラメータを表示しません。それよりも、与えられた callable の正確な現在のシグニチャを常に表示しようとします。 (Contributed by Larry Hastings in <a class="reference external" href="https://bugs.python.org/issue20710">bpo-20710</a>.)</p>
<p><a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> に直接なされた変更に加え、背後の <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> モジュールの改善が、カスタム <code class="docutils literal notranslate"><span class="pre">__dir__</span></code> メソッドやさまざまなデスクリプタの扱いについての振る舞いの大幅な改善に寄与しました。</p>
<p>組み込み <a class="reference internal" href="../library/functions.html#help" title="help"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> は <a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> モジュールに基いているので、上記変更は <a class="reference internal" href="../library/functions.html#help" title="help"><code class="xref py py-func docutils literal notranslate"><span class="pre">help()</span></code></a> の振る舞いにも影響します。</p>
</div>
<div class="section" id="re">
<h3>re<a class="headerlink" href="#re" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/re.html#re.fullmatch" title="re.fullmatch"><code class="xref py py-func docutils literal notranslate"><span class="pre">fullmatch()</span></code></a> 関数と <code class="xref py py-meth docutils literal notranslate"><span class="pre">regex.fullmatch()</span></code> メソッドが追加されました。これはパターンを合致する文字列の両端に固定します。コード変更や既存の正規表現になにか代わりとなるものを追加したりする際に、末尾に <code class="docutils literal notranslate"><span class="pre">$</span></code> を入れ忘れるといった類のバグは気付きにくいものです。これらの関数で、合致すべき終端をはっきり伝えることが出来ます。 (Contributed by Matthew Barnett in <a class="reference external" href="https://bugs.python.org/issue16203">bpo-16203</a>.)</p>
<p><a class="reference internal" href="../library/re.html#re-objects"><span class="std std-ref">正規表現オブジェクト</span></a> の repr にパターンとフラグを含めるようになりました。 <a class="reference internal" href="../library/re.html#match-objects"><span class="std std-ref">match オブジェクト</span></a> の repr に start、end と合致した部分文字列を含むようになりました。 (Contributed by Hugo Lopes Tavares and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue13592">bpo-13592</a> and <a class="reference external" href="https://bugs.python.org/issue17087">bpo-17087</a>.)</p>
</div>
<div class="section" id="resource">
<h3>resource<a class="headerlink" href="#resource" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/resource.html#resource.prlimit" title="resource.prlimit"><code class="xref py py-func docutils literal notranslate"><span class="pre">prlimit()</span></code></a> は、指定プロセスのリソースリミットの問い合わせとセットを、一度の呼び出しで行えます。カーネルバージョン 2.6.36 以降で glibc 2.13 以降の Linux プラットフォームで利用可能です。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue16595">bpo-16595</a>.)</p>
<p>Linux カーネル 2.6.36 以降のプラットフォームで、いくつかの Linux 固有の定数も追加されました: <a class="reference internal" href="../library/resource.html#resource.RLIMIT_MSGQUEUE" title="resource.RLIMIT_MSGQUEUE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_MSGQUEUE</span></code></a>, <a class="reference internal" href="../library/resource.html#resource.RLIMIT_NICE" title="resource.RLIMIT_NICE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_NICE</span></code></a>, <a class="reference internal" href="../library/resource.html#resource.RLIMIT_RTPRIO" title="resource.RLIMIT_RTPRIO"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_RTPRIO</span></code></a>, <a class="reference internal" href="../library/resource.html#resource.RLIMIT_RTTIME" title="resource.RLIMIT_RTTIME"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_RTTIME</span></code></a>, <a class="reference internal" href="../library/resource.html#resource.RLIMIT_SIGPENDING" title="resource.RLIMIT_SIGPENDING"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_SIGPENDING</span></code></a>. (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue19324">bpo-19324</a>.)</p>
<p>FreeBSD バージョン 9 以降のプラットフォームで、いくつかの FreeBSD 固有の定数が追加されました: <a class="reference internal" href="../library/resource.html#resource.RLIMIT_SBSIZE" title="resource.RLIMIT_SBSIZE"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_SBSIZE</span></code></a>, <a class="reference internal" href="../library/resource.html#resource.RLIMIT_SWAP" title="resource.RLIMIT_SWAP"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_SWAP</span></code></a>, <a class="reference internal" href="../library/resource.html#resource.RLIMIT_NPTS" title="resource.RLIMIT_NPTS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RLIMIT_NPTS</span></code></a>. (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue19343">bpo-19343</a>.)</p>
</div>
<div class="section" id="select">
<h3>select<a class="headerlink" href="#select" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/select.html#select.epoll" title="select.epoll"><code class="xref py py-class docutils literal notranslate"><span class="pre">epoll</span></code></a> がコンテキスト管理プロトコルをサポートするようになりました: <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> ブロックで使うと  <a class="reference internal" href="../library/select.html#select.epoll.close" title="select.epoll.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> メソッドがブロックの終了時に自動的に呼び出されます。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue16488">bpo-16488</a>.)</p>
<p><a class="reference internal" href="../library/select.html#select.devpoll" title="select.devpoll"><code class="xref py py-class docutils literal notranslate"><span class="pre">devpoll</span></code></a> オブジェクトに、メソッド <a class="reference internal" href="../library/select.html#select.devpoll.fileno" title="select.devpoll.fileno"><code class="xref py py-meth docutils literal notranslate"><span class="pre">fileno()</span></code></a> とメソッド <a class="reference internal" href="../library/select.html#select.devpoll.close" title="select.devpoll.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> 、それに属性 <a class="reference internal" href="../library/select.html#select.devpoll.closed" title="select.devpoll.closed"><code class="xref py py-attr docutils literal notranslate"><span class="pre">closed</span></code></a> が追加されました。 (Contributed by Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue18794">bpo-18794</a>.)</p>
</div>
<div class="section" id="shelve">
<h3>shelve<a class="headerlink" href="#shelve" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/shelve.html#shelve.Shelf" title="shelve.Shelf"><code class="xref py py-class docutils literal notranslate"><span class="pre">Shelf</span></code></a> がコンテキスト管理プロトコルをサポートするようになりました: <code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code> ブロックで使うとブロックの終了時に自動的にクローズされます。 (Contributed by Filip Gruszczyński in <a class="reference external" href="https://bugs.python.org/issue13896">bpo-13896</a>.)</p>
</div>
<div class="section" id="shutil">
<h3>shutil<a class="headerlink" href="#shutil" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/shutil.html#shutil.copyfile" title="shutil.copyfile"><code class="xref py py-func docutils literal notranslate"><span class="pre">copyfile()</span></code></a> が、コピー元とコピー先が同じファイルの場合に <a class="reference internal" href="../library/shutil.html#shutil.Error" title="shutil.Error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Error</span></code></a> の限定されたサブクラスである <a class="reference internal" href="../library/shutil.html#shutil.SameFileError" title="shutil.SameFileError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SameFileError</span></code></a> を投げるようになりました。これにより、アプリケーションはこの特定のエラーでそれに相応しいアクションを取れます。 (Contributed by Atsuo Ishimoto and Hynek Schlawack in <a class="reference external" href="https://bugs.python.org/issue1492704">bpo-1492704</a>.)</p>
</div>
<div class="section" id="smtpd">
<h3>smtpd<a class="headerlink" href="#smtpd" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer" title="smtpd.SMTPServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTPServer</span></code></a> クラスと <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPChannel" title="smtpd.SMTPChannel"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTPChannel</span></code></a> クラスが <a class="reference internal" href="../library/asynchat.html#asynchat.async_chat" title="asynchat.async_chat"><code class="xref py py-class docutils literal notranslate"><span class="pre">asynchat.async_chat</span></code></a> の <em>map</em> 引数に垂れ流すための <em>map</em> キーワード引数を受け取るようになりました。これでアプリケーションはグローバルなソケットマップを汚さずに済みます。 (Contributed by Vinay Sajip in <a class="reference external" href="https://bugs.python.org/issue11959">bpo-11959</a>.) (---訳注: 正確にはここでの変更は SMTPChannel は <code class="docutils literal notranslate"><span class="pre">asynchat.async_chat.__init__(self,</span> <span class="pre">conn,</span> <span class="pre">map=map)</span></code> 、SMTPServer は <code class="docutils literal notranslate"><span class="pre">asyncore.dispatcher.__init__(self,</span> <span class="pre">map=map)</span></code> です。グローバルなソケットマップを汚さない、というのは <a class="reference internal" href="../library/smtpd.html#smtpd.SMTPServer" title="smtpd.SMTPServer"><code class="xref py py-class docutils literal notranslate"><span class="pre">SMTPServer</span></code></a> の方にだけその具体の意味が書かれていて、 <em>map</em> を指定しない場合は <a class="reference internal" href="../library/asyncore.html#module-asyncore" title="asyncore: A base class for developing asynchronous socket handling services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">asyncore</span></code></a> のグローバルマップを使う、ということで、これが今回のこの変更前に無条件で行われていたことです。 <a class="reference external" href="https://hg.python.org/cpython/rev/ed498f477549">changeset 84047:ed498f477549</a> 参照。---)</p>
</div>
<div class="section" id="smtplib">
<h3>smtplib<a class="headerlink" href="#smtplib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/smtplib.html#smtplib.SMTPException" title="smtplib.SMTPException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SMTPException</span></code></a> が <a class="reference internal" href="../library/exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> のサブクラスになりました。これによって、とにかくエラーが起こったのだということにしか関心がないコードが、ソケット階層でのエラーと SMTP プロトコル階層の両エラーを一撃の try/except 文で捕捉出来るようになりました。 (Contributed by Ned Jackson Lovely in <a class="reference external" href="https://bugs.python.org/issue2118">bpo-2118</a>.)</p>
</div>
<div class="section" id="socket">
<h3>socket<a class="headerlink" href="#socket" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>socket モジュールはそれをサポートしているプラットフォームで <a class="reference internal" href="../library/socket.html#socket.CAN_BCM" title="socket.CAN_BCM"><code class="xref py py-data docutils literal notranslate"><span class="pre">CAN_BCM</span></code></a> プロトコルをサポートするようになりました。  (Contributed by Brian Thorne in <a class="reference external" href="https://bugs.python.org/issue15359">bpo-15359</a>.)</p>
<p>ソケットオブジェクトで <a class="reference internal" href="../library/os.html#fd-inheritance"><span class="std std-ref">継承可能フラグ</span></a> を制御出来るようになりました。 <a class="reference internal" href="../library/socket.html#socket.socket.get_inheritable" title="socket.socket.get_inheritable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_inheritable()</span></code></a> で取得し、 <a class="reference internal" href="../library/socket.html#socket.socket.set_inheritable" title="socket.socket.set_inheritable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_inheritable()</span></code></a> でセットします。</p>
<p>定数値の <code class="docutils literal notranslate"><span class="pre">socket.AF_*</span></code> と <code class="docutils literal notranslate"><span class="pre">socket.SOCK_*</span></code> が、新規の <a class="reference internal" href="../library/enum.html#module-enum" title="enum: Implementation of an enumeration class."><code class="xref py py-mod docutils literal notranslate"><span class="pre">enum</span></code></a> モジュールを使った列挙値になりました。つまりデバッグなどで魑魅魍魎な整数ではなく徳高い名前で表示されるということです。</p>
<p><a class="reference internal" href="../library/socket.html#socket.AF_LINK" title="socket.AF_LINK"><code class="xref py py-data docutils literal notranslate"><span class="pre">AF_LINK</span></code></a> 定数が BSD と OSX で利用可能になりました。</p>
<p><a class="reference internal" href="../library/socket.html#socket.inet_pton" title="socket.inet_pton"><code class="xref py py-func docutils literal notranslate"><span class="pre">inet_pton()</span></code></a> と <a class="reference internal" href="../library/socket.html#socket.inet_ntop" title="socket.inet_ntop"><code class="xref py py-func docutils literal notranslate"><span class="pre">inet_ntop()</span></code></a> が Windows でサポートされるようになりました。 (Contributed by Atsuo Ishimoto in <a class="reference external" href="https://bugs.python.org/issue7171">bpo-7171</a>.)</p>
</div>
<div class="section" id="sqlite3">
<h3>sqlite3<a class="headerlink" href="#sqlite3" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/sqlite3.html#sqlite3.connect" title="sqlite3.connect"><code class="xref py py-func docutils literal notranslate"><span class="pre">connect()</span></code></a> 関数に新規の真偽値パラメータ <em>uri</em> が追加されました。これを真にセットすると <em>database</em> パラメータを URI として解釈させることが出来ます。 (<a class="reference external" href="https://www.sqlite.org/uri.html">SQLite の URI のドキュメント</a> を参照してください)。 (Contributed by poq in <a class="reference external" href="https://bugs.python.org/issue13773">bpo-13773</a>.)</p>
</div>
<div class="section" id="ssl">
<h3>ssl<a class="headerlink" href="#ssl" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p id="whatsnew-tls-11-12"><a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLSv1_1" title="ssl.PROTOCOL_TLSv1_1"><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_TLSv1_1</span></code></a> と <a class="reference internal" href="../library/ssl.html#ssl.PROTOCOL_TLSv1_2" title="ssl.PROTOCOL_TLSv1_2"><code class="xref py py-data docutils literal notranslate"><span class="pre">PROTOCOL_TLSv1_2</span></code></a> (TLSv1.1 と TLSv1.2 のサポート) が追加されました。これらプロトコルのサポートは Python が OpenSSL 1.0.1 以降とリンクしている場合にのみ利用可能です。 (Contributed by Michele Orrù and Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue16692">bpo-16692</a>.)</p>
<p id="whatsnew34-sslcontext">新規関数 <a class="reference internal" href="../library/ssl.html#ssl.create_default_context" title="ssl.create_default_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_default_context()</span></code></a> は、互換性とセキュリティの間の程よいバランスとなるよう調整された <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> を得るための標準手段として追加されました。それらの設定は <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> コンストラクタが与えるデフォルトよりも厳しく、そして将来的にセキュリティにおけるベストプラクティスによる要請が変化すれば、事前予告なしで調整されるかもしれません。SSL をサポートする標準ライブラリの使用においての新しいベストプラクティスとして、 <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> を得るのには <a class="reference internal" href="../library/ssl.html#ssl.create_default_context" title="ssl.create_default_context"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_default_context()</span></code></a> を使うことが推奨です。必要に応じ、対応する標準ライブラリ API の <em>context</em> 引数に渡すためにそれを使うよう修正してください。(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue19689">bpo-19689</a>.)</p>
<p><a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> のメソッド <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.load_verify_locations" title="ssl.SSLContext.load_verify_locations"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_verify_locations()</span></code></a> にオプショナル引数 <em>cadata</em> が追加されました。これには PEM あるいは DER エンコードの証明書を直接指定できます。前者の場合は文字列で、後者では <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">bytes-like object</span></a> で指定します。(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue18138">bpo-18138</a>.)</p>
<p>関数 <a class="reference internal" href="../library/ssl.html#ssl.get_default_verify_paths" title="ssl.get_default_verify_paths"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_default_verify_paths()</span></code></a> が追加されました。これは <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.set_default_verify_paths" title="ssl.SSLContext.set_default_verify_paths"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_default_verify_paths()</span></code></a> メソッドが OpenSSL デフォルトの <code class="docutils literal notranslate"><span class="pre">cafile</span></code> と <code class="docutils literal notranslate"><span class="pre">capath</span></code> をセットするのに使うパスと環境変数から成る名前付きタプルを返します。デフォルトの検証にまつわる問題をデバッグするのに使えるでしょう。(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue18143">bpo-18143</a>.)</p>
<p><a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> の新規メソッド <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.cert_store_stats" title="ssl.SSLContext.cert_store_stats"><code class="xref py py-meth docutils literal notranslate"><span class="pre">cert_store_stats()</span></code></a> はロードされた <code class="docutils literal notranslate"><span class="pre">X.509</span></code> 証明書、 <code class="docutils literal notranslate"><span class="pre">X.509</span> <span class="pre">CA</span></code> 証明書、証明書失効リスト (<code class="docutils literal notranslate"><span class="pre">crl</span></code>) を報告し、また、新規メソッド <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.get_ca_certs" title="ssl.SSLContext.get_ca_certs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_ca_certs()</span></code></a> はロードされた <code class="docutils literal notranslate"><span class="pre">CA</span></code> 証明書のリストを返します。(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue18147">bpo-18147</a>.)</p>
<p>OpenSSL 0.9.8 以降が利用可能な場合に、 <a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> で属性 <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.verify_flags" title="ssl.SSLContext.verify_flags"><code class="xref py py-attr docutils literal notranslate"><span class="pre">verify_flags</span></code></a> を指定出来るようになりました。これは証明書の検証プロセスをコントロールします。定数 <a class="reference internal" href="../library/ssl.html#ssl.VERIFY_DEFAULT" title="ssl.VERIFY_DEFAULT"><code class="xref py py-data docutils literal notranslate"><span class="pre">VERIFY_DEFAULT</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.VERIFY_CRL_CHECK_LEAF" title="ssl.VERIFY_CRL_CHECK_LEAF"><code class="xref py py-data docutils literal notranslate"><span class="pre">VERIFY_CRL_CHECK_LEAF</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.VERIFY_CRL_CHECK_CHAIN" title="ssl.VERIFY_CRL_CHECK_CHAIN"><code class="xref py py-data docutils literal notranslate"><span class="pre">VERIFY_CRL_CHECK_CHAIN</span></code></a>, <a class="reference internal" href="../library/ssl.html#ssl.VERIFY_X509_STRICT" title="ssl.VERIFY_X509_STRICT"><code class="xref py py-data docutils literal notranslate"><span class="pre">VERIFY_X509_STRICT</span></code></a> を組み合わせてセットします。OpenSSL は頼まない限りは証明書失効リスト(CRLs) の検証はしません。 (Contributed by Christien Heimes in <a class="reference external" href="https://bugs.python.org/issue8813">bpo-8813</a>.)</p>
<p><a class="reference internal" href="../library/ssl.html#ssl.SSLContext" title="ssl.SSLContext"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLContext</span></code></a> の新規メソッド <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.load_default_certs" title="ssl.SSLContext.load_default_certs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">load_default_certs()</span></code></a> は、プラットフォームによって異なるデフォルトの場所から “認証局” (CA=certification authority) 証明書ファイル一式をロードします。クライアントがサーバを検証するための TLS web サーバ証明の証明書をロード (<code class="docutils literal notranslate"><span class="pre">purpose=</span></code><a class="reference internal" href="../library/ssl.html#ssl.Purpose.SERVER_AUTH" title="ssl.Purpose.SERVER_AUTH"><code class="xref py py-data docutils literal notranslate"><span class="pre">SERVER_AUTH</span></code></a>) することも、サーバがクライアント証明書を検証するのに用いる証明書をロード (<code class="docutils literal notranslate"><span class="pre">purpose=</span></code><a class="reference internal" href="../library/ssl.html#ssl.Purpose.CLIENT_AUTH" title="ssl.Purpose.CLIENT_AUTH"><code class="xref py py-data docutils literal notranslate"><span class="pre">CLIENT_AUTH</span></code></a>) することも出来ます。(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue19292">bpo-19292</a>.)</p>
<p id="whatsnew34-win-cert-store">Windows だけで利用出来る関数が 2 つ追加されました。 <a class="reference internal" href="../library/ssl.html#ssl.enum_certificates" title="ssl.enum_certificates"><code class="xref py py-func docutils literal notranslate"><span class="pre">enum_certificates()</span></code></a> と <a class="reference internal" href="../library/ssl.html#ssl.enum_crls" title="ssl.enum_crls"><code class="xref py py-func docutils literal notranslate"><span class="pre">enum_crls()</span></code></a> で Windows のシステム証明書ストアから、証明書、証明書の情報、CRLs (certification revocation=証明書失効リスト) を抽出出来ます。(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue17134">bpo-17134</a>.)</p>
<p id="whatsnew34-sni">新規メソッド <a class="reference internal" href="../library/ssl.html#ssl.SSLContext.set_servername_callback" title="ssl.SSLContext.set_servername_callback"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLContext.set_servername_callback()</span></code></a> によるサーバサイド SNI (Server Name Indication) サポートが追加されました。 (Contributed by Daniel Black in <a class="reference external" href="https://bugs.python.org/issue8109">bpo-8109</a>.)</p>
<p><a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.getpeercert" title="ssl.SSLSocket.getpeercert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">SSLSocket.getpeercert()</span></code></a> が返す辞書に <code class="docutils literal notranslate"><span class="pre">X509v3</span></code> 拡張アイテムを含むようになりました: <code class="docutils literal notranslate"><span class="pre">crlDistributionPoints</span></code>, <code class="docutils literal notranslate"><span class="pre">caIssuers</span></code>, <code class="docutils literal notranslate"><span class="pre">OCSP</span></code> URI。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue18379">bpo-18379</a>.)</p>
</div>
<div class="section" id="stat">
<h3>stat<a class="headerlink" href="#stat" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> モジュールが C 実装 <code class="xref py py-mod docutils literal notranslate"><span class="pre">_stat</span></code> に基くようになりました。C 実装は、標準化されておらずプラットフォーム依存となる値のほとんどを取り込むために必要とされました。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue11016">bpo-11016</a>.)</p>
<p>モジュールは新たに <a class="reference internal" href="../library/stat.html#stat.filemode" title="stat.filemode"><code class="xref py py-func docutils literal notranslate"><span class="pre">filemode()</span></code></a> フラグの <a class="reference internal" href="../library/stat.html#stat.S_IFDOOR" title="stat.S_IFDOOR"><code class="xref py py-mod docutils literal notranslate"><span class="pre">S_IFDOOR</span></code></a>, <a class="reference internal" href="../library/stat.html#stat.S_IFPORT" title="stat.S_IFPORT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">S_IFPORT</span></code></a>, <a class="reference internal" href="../library/stat.html#stat.S_IFWHT" title="stat.S_IFWHT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">S_IFWHT</span></code></a> をサポートします。 (Contributed by Christian Hiemes in <a class="reference external" href="https://bugs.python.org/issue11016">bpo-11016</a>.)</p>
</div>
<div class="section" id="struct">
<h3>struct<a class="headerlink" href="#struct" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>関数 <a class="reference internal" href="../library/struct.html#struct.iter_unpack" title="struct.iter_unpack"><code class="xref py py-mod docutils literal notranslate"><span class="pre">iter_unpack</span></code></a> と、コンパイル済フォーマットでのメソッド <a class="reference internal" href="../library/struct.html#struct.Struct.iter_unpack" title="struct.Struct.iter_unpack"><code class="xref py py-meth docutils literal notranslate"><span class="pre">struct.Struct.iter_unpack()</span></code></a> が追加されました。これは、与えられたデータフォーマットの繰り返しインスタンスを含むバッファを逐次的にアンパックします。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue17804">bpo-17804</a>.)</p>
</div>
<div class="section" id="subprocess">
<h3>subprocess<a class="headerlink" href="#subprocess" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/subprocess.html#subprocess.check_output" title="subprocess.check_output"><code class="xref py py-func docutils literal notranslate"><span class="pre">check_output()</span></code></a> が <em>input</em> 引数を受け付けるようになりました。これは実行するコマンドにとっての <code class="docutils literal notranslate"><span class="pre">stdin</span></code> を供給するのに使われます (訳注: <a class="reference internal" href="../library/subprocess.html#subprocess.run" title="subprocess.run"><code class="xref py py-func docutils literal notranslate"><span class="pre">run()</span></code></a> のドキュメント参照)。 (Contributed by Zack Weinberg in <a class="reference external" href="https://bugs.python.org/issue16624">bpo-16624</a>.)</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">getstatus()</span></code> と <a class="reference internal" href="../library/subprocess.html#subprocess.getstatusoutput" title="subprocess.getstatusoutput"><code class="xref py py-func docutils literal notranslate"><span class="pre">getstatusoutput()</span></code></a> が Windows でも動作するようになりました。ただしこの変更は実際には、不注意で 3.3.4 に対して既に行われました。 (Contributed by Tim Golden in <a class="reference external" href="https://bugs.python.org/issue10197">bpo-10197</a>.)</p>
</div>
<div class="section" id="sunau">
<h3>sunau<a class="headerlink" href="#sunau" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getparams()</span></code> メソッドがプレインなタプルではなく <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">namedtuple</span></code></a> を返すようになりました。 (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue18901">bpo-18901</a>.)</p>
<p><a class="reference internal" href="../library/sunau.html#sunau.open" title="sunau.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">sunau.open()</span></code></a> がコンテキスト管理プロトコルをサポートするようになりました: <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> ブロックで使うと戻り値オブジェクトの <code class="docutils literal notranslate"><span class="pre">close</span></code> メソッドがブロックの終了時に自動的に呼び出されます。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue18878">bpo-18878</a>.)</p>
<p>24 ビットサンプルの出力をサポートしました。つまり <a class="reference internal" href="../library/sunau.html#sunau.AU_write.setsampwidth" title="sunau.AU_write.setsampwidth"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AU_write.setsampwidth()</span></code></a> に 24 ビットに対応する値をセット出来ます。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue19261">bpo-19261</a>.)</p>
<p><a class="reference internal" href="../library/sunau.html#sunau.AU_write.writeframesraw" title="sunau.AU_write.writeframesraw"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writeframesraw()</span></code></a> メソッドと <a class="reference internal" href="../library/sunau.html#sunau.AU_write.writeframes" title="sunau.AU_write.writeframes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writeframes()</span></code></a> メソッドが <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">bytes-like object</span></a> を受け付けるようになりました。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue8311">bpo-8311</a>.)</p>
</div>
<div class="section" id="sys">
<h3>sys<a class="headerlink" href="#sys" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/sys.html#sys.getallocatedblocks" title="sys.getallocatedblocks"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getallocatedblocks()</span></code></a> は、現在インタプリタによりアロケートされているブロック数を返します (デフォルトの <code class="docutils literal notranslate"><span class="pre">--with-pymalloc</span></code> 設定での CPython では、これは <a class="reference internal" href="../c-api/memory.html#c.PyObject_Malloc" title="PyObject_Malloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Malloc()</span></code></a> API によるアロケーションです)。これはメモリリークの追跡に、とりわけテストスイートで自動化されている場合はなおさら有用です。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue13390">bpo-13390</a>.)</p>
<p>Python インタプリタが <a class="reference internal" href="../tutorial/interpreter.html#tut-interactive"><span class="std std-ref">tut-interactive</span></a> で開始する際に <a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> モジュールの属性 <a class="reference internal" href="../library/sys.html#sys.__interactivehook__" title="sys.__interactivehook__"><code class="xref py py-data docutils literal notranslate"><span class="pre">__interactivehook__</span></code></a> をチェックするようになりました。この属性があると、対話モード開始直前にその設定値が引数なしで呼び出されます。このチェックは <span class="target" id="index-165"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONSTARTUP"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code></a> ファイルが読み込まれたあとで行われるので、そのファイル内でセット出来ます。 <a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> モジュールは <a class="reference internal" href="../library/readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> をサポートするプラットフォームではタブ補完と (<code class="file docutils literal notranslate"><span class="pre">~/.python-history</span></code> への) 履歴保存を有効にする関数を <a class="reference internal" href="../library/site.html#rlcompleter-config"><span class="std std-ref">__interactivehook__ にセットします</span></a> 。この (新たな) 振る舞いがお気に召さなければ、 <span class="target" id="index-166"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONSTARTUP"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONSTARTUP</span></code></a>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">sitecustomize</span></code>, <code class="xref py py-mod docutils literal notranslate"><span class="pre">usercustomize</span></code> のいずれかで <a class="reference internal" href="../library/sys.html#module-sys" title="sys: Access system-specific parameters and functions."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sys</span></code></a> からこの属性を削除 (あるいはほかのなにか callable をセット) してください。 (Contributed by Éric Araujo and Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue5845">bpo-5845</a>.)</p>
</div>
<div class="section" id="tarfile">
<h3>tarfile<a class="headerlink" href="#tarfile" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> モジュールはスクリプトや直接 <code class="docutils literal notranslate"><span class="pre">-m</span></code> で呼ばれた場合、簡単な <a class="reference internal" href="../library/tarfile.html#tarfile-commandline"><span class="std std-ref">コマンドラインインターフェイス</span></a> をサポートするようになりました。
これにより tar ファイルアーカイブの作成や解凍が可能です。
(Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue13477">bpo-13477</a>.)</p>
</div>
<div class="section" id="textwrap">
<h3>textwrap<a class="headerlink" href="#textwrap" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/textwrap.html#textwrap.TextWrapper" title="textwrap.TextWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">TextWrapper</span></code></a> に 2 つ新しい制御変数が追加されていて、これらは属性値であり、コンストラクタ引数に渡せます。それぞれ <a class="reference internal" href="../library/textwrap.html#textwrap.TextWrapper.max_lines" title="textwrap.TextWrapper.max_lines"><code class="xref py py-attr docutils literal notranslate"><span class="pre">max_lines</span></code></a> が最大出力行数、 <a class="reference internal" href="../library/textwrap.html#textwrap.TextWrapper.placeholder" title="textwrap.TextWrapper.placeholder"><code class="xref py py-attr docutils literal notranslate"><span class="pre">placeholder</span></code></a> が <em>max_lines</em> により切り詰める場合に出力の最終行に置くテキストです。これら機能を使った新規のコンビニエンス関数 <a class="reference internal" href="../library/textwrap.html#textwrap.shorten" title="textwrap.shorten"><code class="xref py py-func docutils literal notranslate"><span class="pre">shorten()</span></code></a> が追加されています。これは入力に含まれる全ての空白文字を単一の空白に置き換え、また幅 <em>width</em> に収めて、切り詰める場合は末尾を <em>placeholder</em> (デフォルトで <code class="docutils literal notranslate"><span class="pre">[...]</span></code>) で置き換えて、単一行で返します。(Contributed by Antoine Pitrou and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue18585">bpo-18585</a> and <a class="reference external" href="https://bugs.python.org/issue18725">bpo-18725</a>.)</p>
</div>
<div class="section" id="threading">
<h3>threading<a class="headerlink" href="#threading" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>メインスレッドを表現する <a class="reference internal" href="../library/threading.html#threading.Thread" title="threading.Thread"><code class="xref py py-class docutils literal notranslate"><span class="pre">Thread</span></code></a> オブジェクトを、新規関数 <a class="reference internal" href="../library/threading.html#threading.main_thread" title="threading.main_thread"><code class="xref py py-func docutils literal notranslate"><span class="pre">main_thread()</span></code></a> で得られるようになりました。通常の条件であればこれは Python インタプリタを開始したスレッドになります。 (Contributed by Andrew Svetlov in <a class="reference external" href="https://bugs.python.org/issue18882">bpo-18882</a>.)</p>
</div>
<div class="section" id="traceback">
<h3>traceback<a class="headerlink" href="#traceback" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規関数 <a class="reference internal" href="../library/traceback.html#traceback.clear_frames" title="traceback.clear_frames"><code class="xref py py-func docutils literal notranslate"><span class="pre">traceback.clear_frames()</span></code></a> は、トレースバックオブジェクトを受け取って、それが参照している全てのフレーム内のローカル変数をクリアすることで、メモリ消費量を削減します。 (Contributed by Andrew Kuchling in <a class="reference external" href="https://bugs.python.org/issue1565525">bpo-1565525</a>.)</p>
</div>
<div class="section" id="types">
<h3>types<a class="headerlink" href="#types" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規デスクリプタ <a class="reference internal" href="../library/types.html#types.DynamicClassAttribute" title="types.DynamicClassAttribute"><code class="xref py py-func docutils literal notranslate"><span class="pre">DynamicClassAttribute()</span></code></a> は、そのアクセスがインスタンスからの場合には普通に振舞いつつクラスからのアクセスでは <em>クラス</em> の __getattr__ メソッドに振り向ける属性、これを定義する手段を提供します。このことにより、インスタンス上ではアクティブなプロパティを持ち、クラス上では同名の仮想的属性を持つ、といったことが出来ます (<a class="reference internal" href="../library/enum.html#enum.Enum" title="enum.Enum"><code class="xref py py-class docutils literal notranslate"><span class="pre">Enum</span></code></a> がこれの実例になっています)。 (Contributed by Ethan Furman in <a class="reference external" href="https://bugs.python.org/issue19030">bpo-19030</a>.)</p>
</div>
<div class="section" id="urllib">
<h3>urllib<a class="headerlink" href="#urllib" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/urllib.request.html#module-urllib.request" title="urllib.request: Extensible library for opening URLs."><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.request</span></code></a> が新規クラス <a class="reference internal" href="../library/urllib.request.html#urllib.request.DataHandler" title="urllib.request.DataHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataHandler</span></code></a> を介して <code class="docutils literal notranslate"><span class="pre">data:</span></code> URL をサポートするようになりました。 (Contributed by Mathias Panzenböck in <a class="reference external" href="https://bugs.python.org/issue16423">bpo-16423</a>.)</p>
<p><a class="reference internal" href="../library/urllib.request.html#urllib.request.Request" title="urllib.request.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> クラスで使われる HTTP メソッドを、サブクラスで <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request.method" title="urllib.request.Request.method"><code class="xref py py-class docutils literal notranslate"><span class="pre">method</span></code></a> 属性をセットすることにより指定出来るようになりました。 (Contributed by Jason R Coombs in <a class="reference external" href="https://bugs.python.org/issue18978">bpo-18978</a>.) (---訳注: <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request.method" title="urllib.request.Request.method"><code class="xref py py-class docutils literal notranslate"><span class="pre">method</span></code></a> は 3.3 で追加されたが、コンストラクタに渡されたものが設定されるだけだった。---)</p>
<p><a class="reference internal" href="../library/urllib.request.html#urllib.request.Request" title="urllib.request.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> オブジェクトは今では再利用可能です: <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request.full_url" title="urllib.request.Request.full_url"><code class="xref py py-attr docutils literal notranslate"><span class="pre">full_url</span></code></a> あるいは <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request.data" title="urllib.request.Request.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> 属性などが変更されると、関連する全ての内部プロパティが更新されます。このことによって今や、例えば、 <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request" title="urllib.request.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> オブジェクトを、異なる <em>data</em> 引数での <a class="reference internal" href="../library/urllib.request.html#urllib.request.OpenerDirector.open" title="urllib.request.OpenerDirector.open"><code class="xref py py-meth docutils literal notranslate"><span class="pre">OpenerDirector.open()</span></code></a> の複数回呼び出し内で使ったり、あるいは、まっさらから作り直すのではなく <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request" title="urllib.request.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> の <code class="docutils literal notranslate"><span class="pre">url</span></code> を書き換えて使ったり出来ます。新たに <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request.remove_header" title="urllib.request.Request.remove_header"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove_header()</span></code></a> メソッドも追加されていて、これは <a class="reference internal" href="../library/urllib.request.html#urllib.request.Request" title="urllib.request.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> からヘッダを取り除きます。 (Contributed by Alexey Kachayev in <a class="reference external" href="https://bugs.python.org/issue16464">bpo-16464</a>, Daniel Wozniak in <a class="reference external" href="https://bugs.python.org/issue17485">bpo-17485</a>, and Damien Brecht and Senthil Kumaran in <a class="reference external" href="https://bugs.python.org/issue17272">bpo-17272</a>.)</p>
<p><a class="reference internal" href="../library/urllib.error.html#urllib.error.HTTPError" title="urllib.error.HTTPError"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPError</span></code></a> オブジェクトに、エラーに関係する HTTP レスポンスヘッダへのアクセスを提供する <a class="reference internal" href="../library/urllib.error.html#urllib.error.HTTPError.headers" title="urllib.error.HTTPError.headers"><code class="xref py py-attr docutils literal notranslate"><span class="pre">headers</span></code></a> 属性が追加されました。 (Contributed by Berker Peksag in <a class="reference external" href="https://bugs.python.org/issue15701">bpo-15701</a>.)</p>
</div>
<div class="section" id="unittest">
<h3>unittest<a class="headerlink" href="#unittest" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/unittest.html#unittest.TestCase" title="unittest.TestCase"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestCase</span></code></a> クラスに新規コンテキストマネージャ <a class="reference internal" href="../library/unittest.html#unittest.TestCase.subTest" title="unittest.TestCase.subTest"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subTest()</span></code></a> が追加されました。これは <a class="reference internal" href="../reference/compound_stmts.html#with"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">with</span></code></a> ブロックを「サブテスト化」するコンテキストマネージャを生成します。このコンテキストマネージャにより、テストメソッドで例えばループ内で <code class="docutils literal notranslate"><span class="pre">subTest</span></code> コンテキストマネージャを呼び出すことで動的にサブテストを作れます。単一のテストメソッドでこれによる「個別に識別され」「個別にカウントされる」テスト群を不定数ぶん生成出来て、そしてそれらはいずれかが失敗したとしても全てが実行されます。例えば以下:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NumbersTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test_even</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">subTest</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">i</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">i</span> <span class="o">%</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>これは 6 つのサブテストとなり、それぞれは unittest 内の冗長出力において、変数名 <code class="docutils literal notranslate"><span class="pre">i</span></code> とその変数への個々の値 (<code class="docutils literal notranslate"><span class="pre">i=0</span></code>, <code class="docutils literal notranslate"><span class="pre">i=1</span></code>, など) からなるラベルで識別されます。この例の完全なバージョンが <a class="reference internal" href="../library/unittest.html#subtests"><span class="std std-ref">サブテストを利用して繰り返しテストの区別を付ける</span></a> にあります。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue16997">bpo-16997</a>.)</p>
<p><a class="reference internal" href="../library/unittest.html#unittest.main" title="unittest.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">unittest.main()</span></code></a> の <em>defaultTest</em> に、テスト名からなるイテラブルを渡せるようになりました。以前は文字列で単一のテスト名を渡せるだけでした。 (Contributed by Jyrki Pulliainen in <a class="reference external" href="https://bugs.python.org/issue15132">bpo-15132</a>.)</p>
<p>テストディスカバリ最中に発生する <a class="reference internal" href="../library/unittest.html#unittest.SkipTest" title="unittest.SkipTest"><code class="xref py py-class docutils literal notranslate"><span class="pre">SkipTest</span></code></a> (これはテストファイル内のモジュールレベルで起こせます) を、エラーとしてではなくスキップとして報告するようになりました。 (Contributed by Zach Ware in <a class="reference external" href="https://bugs.python.org/issue16935">bpo-16935</a>.)</p>
<p><a class="reference internal" href="../library/unittest.html#unittest.TestLoader.discover" title="unittest.TestLoader.discover"><code class="xref py py-meth docutils literal notranslate"><span class="pre">discover()</span></code></a> が発見したファイルをソートするようになったので、一貫したテスト順でテスト出来ます。  (Contributed by Martin Melin and Jeff Ramnani in <a class="reference external" href="https://bugs.python.org/issue16709">bpo-16709</a>.)</p>
<p><a class="reference internal" href="../library/unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestSuite</span></code></a> がその実行完了次第すぐに、テスト成功していれば、テストへの参照を取り除くようになりました。ガーベージコレクションを行う Python インタプリタ上ではこの振る舞いによって、テストへの参照を保持しているものが他にない場合のテストのガーベージコレクトを可能にします。この振る舞いは <a class="reference internal" href="../library/unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-mod docutils literal notranslate"><span class="pre">TestSuite</span></code></a> をサブクラス化して何もしない <code class="docutils literal notranslate"><span class="pre">_removeTestAtIndex</span></code> を定義することで上書き出来ます。 (Contributed by Tom Wardill, Matt McClure, and Andrew Svetlov in <a class="reference external" href="https://bugs.python.org/issue11798">bpo-11798</a>.)</p>
<p>テストアサーションの新規コンテキストマネージャ <a class="reference internal" href="../library/unittest.html#unittest.TestCase.assertLogs" title="unittest.TestCase.assertLogs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">assertLogs()</span></code></a> が追加されました。これはコードブロックが <a class="reference internal" href="../library/logging.html#module-logging" title="logging: Flexible event logging system for applications."><code class="xref py py-mod docutils literal notranslate"><span class="pre">logging</span></code></a> を使ってログメッセージを発行しているか確認します。デフォルトでは任意のロガーからの <code class="docutils literal notranslate"><span class="pre">INFO</span></code> 以上のプライオリティを持つメッセージを取れますが、ロガー名と最小プライオリティの両方とも指定可能です。コンテキストマネージャからの戻りオブジェクトに対して、ログされた <a class="reference internal" href="../library/logging.html#logging.LogRecord" title="logging.LogRecord"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogRecord</span></code></a> とフォーマットされたメッセージの両方あるいはどちらかを問い合わせることが出来ます。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue18937">bpo-18937</a>.)</p>
<p>テストディスカバリが名前空間パッケージで動作するようになりました。 (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue17457">bpo-17457</a>.)</p>
<p><a class="reference internal" href="../library/unittest.mock.html#module-unittest.mock" title="unittest.mock: Mock object library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest.mock</span></code></a> オブジェクトが、呼び出しが合致する際に仕様としてのシグニチャを検査するようになりました。これはつまり、以前は位置引数だけの合致だったものが、位置引数と名前の両方で合致できるようになったということです。(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue17015">bpo-17015</a>.)</p>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">mock_open()</span></code> オブジェクトに <code class="docutils literal notranslate"><span class="pre">readline</span></code> メソッドと <code class="docutils literal notranslate"><span class="pre">readlines</span></code> メソッドが追加されました。  (Contributed by Toshio Kuratomi in <a class="reference external" href="https://bugs.python.org/issue17467">bpo-17467</a>.)</p>
</div>
<div class="section" id="venv">
<h3>venv<a class="headerlink" href="#venv" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/venv.html#module-venv" title="venv: Creation of virtual environments."><code class="xref py py-mod docutils literal notranslate"><span class="pre">venv</span></code></a> に <code class="docutils literal notranslate"><span class="pre">csh</span></code> と <code class="docutils literal notranslate"><span class="pre">fish</span></code> シェルの有効化スクリプトが追加されました。 (Contributed by Andrew Svetlov in <a class="reference external" href="https://bugs.python.org/issue15417">bpo-15417</a>.)</p>
<p><a class="reference internal" href="../library/venv.html#venv.EnvBuilder" title="venv.EnvBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvBuilder</span></code></a> クラスとコンビニエンス関数 <a class="reference internal" href="../library/venv.html#venv.create" title="venv.create"><code class="xref py py-func docutils literal notranslate"><span class="pre">create()</span></code></a> が新規キーワード引数 <em>with_pip</em> を取るようになりました。デフォルトは <code class="docutils literal notranslate"><span class="pre">False</span></code> です。これは <a class="reference internal" href="../library/venv.html#venv.EnvBuilder" title="venv.EnvBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvBuilder</span></code></a> が仮想環境に <code class="docutils literal notranslate"><span class="pre">pip</span></code> がインストールされていることを保証するかどうかを制御します。(Contributed by Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue19552">bpo-19552</a> as part of the <span class="target" id="index-167"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a> implementation.)</p>
</div>
<div class="section" id="wave">
<h3>wave<a class="headerlink" href="#wave" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getparams()</span></code> メソッドがプレインなタプルではなく <a class="reference internal" href="../library/collections.html#collections.namedtuple" title="collections.namedtuple"><code class="xref py py-class docutils literal notranslate"><span class="pre">namedtuple</span></code></a> を返すようになりました。 (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue17487">bpo-17487</a>.)</p>
<p><a class="reference internal" href="../library/wave.html#wave.open" title="wave.open"><code class="xref py py-func docutils literal notranslate"><span class="pre">wave.open()</span></code></a> がコンテキスト管理プロトコルをサポートするようになりました。 (Contributed by Claudiu Popa in <a class="reference external" href="https://bugs.python.org/issue17616">bpo-17616</a>.)</p>
<p><a class="reference internal" href="../library/wave.html#module-wave" title="wave: Provide an interface to the WAV sound format."><code class="xref py py-mod docutils literal notranslate"><span class="pre">wave</span></code></a> は <a class="reference internal" href="../library/wave.html#wave-write-objects"><span class="std std-ref">シーク不能なファイルへの書き出しが出来るように</span></a> なりました。 (Contributed by David Jones, Guilherme Polo, and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue5202">bpo-5202</a>.)</p>
<p><a class="reference internal" href="../library/wave.html#wave.Wave_write.writeframesraw" title="wave.Wave_write.writeframesraw"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writeframesraw()</span></code></a> メソッドと <a class="reference internal" href="../library/wave.html#wave.Wave_write.writeframes" title="wave.Wave_write.writeframes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writeframes()</span></code></a> メソッドが <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">bytes-like object</span></a> を受け付けるようになりました。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue8311">bpo-8311</a>.)</p>
</div>
<div class="section" id="weakref">
<h3>weakref<a class="headerlink" href="#weakref" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>新規 <a class="reference internal" href="../library/weakref.html#weakref.WeakMethod" title="weakref.WeakMethod"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeakMethod</span></code></a> クラスは、インスタンスメソッドへの弱参照をシミュレートします。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue14631">bpo-14631</a>.)</p>
<p>新規クラス <a class="reference internal" href="../library/weakref.html#weakref.finalize" title="weakref.finalize"><code class="xref py py-class docutils literal notranslate"><span class="pre">finalize</span></code></a> は、弱参照自身のライフサイクルを注意深く管理する必要性なしに、オブジェクトがガーベージコレクトされる際に呼び出されるコールバックを登録することを可能にします。 (Contributed by Richard Oudkerk in <a class="reference external" href="https://bugs.python.org/issue15528">bpo-15528</a>.)</p>
<p><a class="reference internal" href="../library/weakref.html#weakref.ref" title="weakref.ref"><code class="xref py py-class docutils literal notranslate"><span class="pre">ref</span></code></a> に関連付いたコールバック (あれば) を、新規属性 <a class="reference internal" href="../library/weakref.html#weakref.ref.__callback__" title="weakref.ref.__callback__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__callback__</span></code></a> で取得出来るようになりました。(Contributed by Mark Dickinson in <a class="reference external" href="https://bugs.python.org/issue17643">bpo-17643</a>.)</p>
</div>
<div class="section" id="xml-etree">
<h3>xml.etree<a class="headerlink" href="#xml-etree" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>ノンブロッキングなアプリケーションでの XML ドキュメントの解析に、新規パーサ <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLPullParser" title="xml.etree.ElementTree.XMLPullParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">XMLPullParser</span></code></a> を利用出来ます。実例は <a class="reference internal" href="../library/xml.etree.elementtree.html#elementtree-pull-parsing"><span class="std std-ref">非ブロックパースのためのプル API</span></a> をみてください。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue17741">bpo-17741</a>.)</p>
<p><a class="reference internal" href="../library/xml.etree.elementtree.html#module-xml.etree.ElementTree" title="xml.etree.ElementTree: Implementation of the ElementTree API."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xml.etree.ElementTree</span></code></a> の関数 <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.tostring" title="xml.etree.ElementTree.tostring"><code class="xref py py-func docutils literal notranslate"><span class="pre">tostring()</span></code></a> 、<a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.tostringlist" title="xml.etree.ElementTree.tostringlist"><code class="xref py py-func docutils literal notranslate"><span class="pre">tostringlist()</span></code></a> と、 <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree" title="xml.etree.ElementTree.ElementTree"><code class="xref py py-class docutils literal notranslate"><span class="pre">ElementTree</span></code></a> クラスの <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write" title="xml.etree.ElementTree.ElementTree.write"><code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code></a> メソッドに、 <a class="reference internal" href="../glossary.html#keyword-only-parameter"><span class="std std-ref">キーワード専用引数</span></a> の <em>short_empty_elements</em> が追加されました。これはコンテンツを持たない要素を省略形 (<code class="docutils literal notranslate"><span class="pre">&lt;tag</span> <span class="pre">/&gt;</span></code>) で書き出すか展開された形 (<code class="docutils literal notranslate"><span class="pre">&lt;tag&gt;&lt;/tag&gt;</span></code>) で書き出すかを制御します。(Contributed by Ariel Poliak and Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue14377">bpo-14377</a>.)</p>
</div>
<div class="section" id="zipfile">
<h3>zipfile<a class="headerlink" href="#zipfile" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/zipfile.html#zipfile.PyZipFile" title="zipfile.PyZipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">PyZipFile</span></code></a> クラスの <a class="reference internal" href="../library/zipfile.html#zipfile.PyZipFile.writepy" title="zipfile.PyZipFile.writepy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">writepy()</span></code></a> メソッドに <em>filterfunc</em> オプションが追加されました。これはアーカイブにどのディレクトリ・ファイルを加えるのかをコントロールするのに使うことが出来ます。例えばテスト用ファイルをアーカイブから除外する、などということが出来ます。(Contributed by Christian Tismer in <a class="reference external" href="https://bugs.python.org/issue19274">bpo-19274</a>.)</p>
<p><a class="reference internal" href="../library/zipfile.html#zipfile.ZipFile" title="zipfile.ZipFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">ZipFile</span></code></a> クラスと <code class="xref py py-class docutils literal notranslate"><span class="pre">PyZipfile</span></code> クラスの <em>allowZip64</em> パラメータのデフォルトが <code class="docutils literal notranslate"><span class="pre">True</span></code> に変更されました。 (Contributed by William Mallard in <a class="reference external" href="https://bugs.python.org/issue17201">bpo-17201</a>.)</p>
</div>
</div>
<div class="section" id="cpython-implementation-changes">
<h2>CPython の実装の変更<a class="headerlink" href="#cpython-implementation-changes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pep-445-customization-of-cpython-memory-allocators">
<span id="whatsnew-pep-445"></span><h3>PEP 445: CPython のメモリアロケータのカスタマイズ<a class="headerlink" href="#pep-445-customization-of-cpython-memory-allocators" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><span class="target" id="index-168"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0445"><strong>PEP 445</strong></a> は、CPython インタープリタのメモリ割り当てをカスタマイズするために新たな C 水準のインターフェイスを追加しました。</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-169"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0445"><strong>PEP 445</strong></a> -- Python メモリアロケータをカスタマイズするための新 API 追加</dt>
<dd>PEP written and implemented by Victor Stinner.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-442-safe-object-finalization">
<span id="whatsnew-pep-442"></span><h3>PEP 442: オブジェクトの安全なファイナライゼーション<a class="headerlink" href="#pep-442-safe-object-finalization" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><span class="target" id="index-170"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0442"><strong>PEP 442</strong></a> は、 CPython でのオブジェクトのファイナライゼーションにまつわる現在の制限と奇癖を取り除きます。これによって、 <a class="reference internal" href="../reference/datamodel.html#object.__del__" title="object.__del__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__del__()</span></code></a> メソッドを持つオブジェクトと <a class="reference internal" href="../reference/compound_stmts.html#finally"><code class="xref std std-keyword docutils literal notranslate"><span class="pre">finally</span></code></a> 節を持つジェネレータが、それらが循環参照に含まれる場合もファイナライズ出来ます。(---訳注: ジェネレータの例については <a class="reference external" href="https://bugs.python.org/issue17468">bpo-17468</a> から派生した <a class="reference external" href="https://bugs.python.org/issue17807">bpo-17807</a> での修正 <a class="reference external" href="https://hg.python.org/cpython/rev/c89febab4648">changeset 83688:c89febab4648</a> の <code class="docutils literal notranslate"><span class="pre">Lib/test/test_generators.py</span></code> に追加されたテスト参照。---)</p>
<p>この変更の一環で、モジュールのグローバルは、ほとんどのケースではインタプリタのシャットダウン中に強制的に <a class="reference internal" href="../library/constants.html#None" title="None"><code class="xref py py-const docutils literal notranslate"><span class="pre">None</span></code></a> がセットされることはなくなり、代わりに循環ガーベージコレクタの通常のオペレーションに委ねます。このことは、循環 GC が最初に導入されて以来悩みの種だった、普通 <code class="docutils literal notranslate"><span class="pre">__del__</span></code> メソッドを巻き込んだ「インタプリタシャットダウン時エラーの類」全体を回避します。(---訳注: <a class="reference external" href="https://bugs.python.org/issue18214">bpo-18214</a> (superseder for <a class="reference external" href="https://bugs.python.org/issue812369">bpo-812369</a>), <a class="reference external" href="https://hg.python.org/cpython/rev/79e2f5bbc30c/">changeset 84936:79e2f5bbc30c</a> ---)</p>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-171"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0442"><strong>PEP 442</strong></a> -- オブジェクトの安全なファイナライゼーション</dt>
<dd>PEP written and implemented by Antoine Pitrou.</dd>
</dl>
</div>
</div>
<div class="section" id="pep-456-secure-and-interchangeable-hash-algorithm">
<span id="whatsnew-pep-456"></span><h3>PEP 456: 安全で取り換え可能なハッシュアルゴリズム<a class="headerlink" href="#pep-456-secure-and-interchangeable-hash-algorithm" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><span class="target" id="index-172"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0456"><strong>PEP 456</strong></a> は、Python のハッシュアルゴリズムで行われた以前のセキュリティ修正作業 --- これは公に曝されている辞書検索に裏打ちされた API が標的になるかもしれない、特定の DOS 攻撃に対処するものです ---  に追従するものです (この改善の現在ラウンドの事の起こりについては <a class="reference external" href="https://bugs.python.org/issue14621">bpo-14621</a> を見てください)。この PEP では、 CPython のハッシュのコードをパッケージャが異なるハッシュアルゴリズムへの差し替えを容易にするために一元化し、そして Python のデフォルト実装としては 64 ビットデータ型を持つプラットフォームで SipHash に乗り換えます。以前の FNV アルゴリズムと比較したどんなパフォーマンスの差異も、些細なものです。</p>
<p>この PEP は <a class="reference internal" href="../library/sys.html#sys.hash_info" title="sys.hash_info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">sys.hash_info</span></code></a> 名前付きタプルに、現在実行しているバイナリで使われているハッシュアルゴリズムを記述するためのフィールドを追加します。これら以外にはこの PEP が既存の CPython API を何か置き換えることはありません。</p>
</div>
<div class="section" id="pep-436-argument-clinic">
<span id="whatsnew-pep-436"></span><h3>PEP 436: Argument Clinic<a class="headerlink" href="#pep-436-argument-clinic" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>「Argument Clinic」(<span class="target" id="index-173"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0436"><strong>PEP 436</strong></a>) は CPython ビルドプロセスの新たな鍋の具です。ビルトインと標準ライブラリの拡張モジュールが C で実装されるにあたって、正確なシグニチャを定義し保守管理するプロセスを単純化するのに使えます。</p>
<p>Python 3.4 では既にいくつかの標準ライブラリ拡張モジュールが Argument Clinic を使うように変換されていて、またこれの結果として <a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> と <a class="reference internal" href="../library/inspect.html#module-inspect" title="inspect: Extract information and source code from live objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">inspect</span></code></a> が更新されました。</p>
<p>Python 3.4 メンテナンスリリースでの更新の一部として C で実装されている callable に対して、プログラム的なイントロスペクションのためのシグニチャメタデータの追加が、さらに追加で行われることが期待されています。</p>
<div class="admonition note">
<p class="first admonition-title">注釈</p>
<p class="last">Argument Clinic の PEP は、実装されている状態に対して完全には最新のものとはなっていません。Argument Clinic は Python 3.4 ではサードパーティに向けた公開 API として利用可能とする予定ではないので、このケースではリリース管理者とコア開発チームによって許容出来るとみなされました。</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">参考</p>
<dl class="last docutils">
<dt><span class="target" id="index-174"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0436"><strong>PEP 436</strong></a> -- The Argument Clinic DSL (訳注: DSL=Domain-Specific Language)</dt>
<dd>PEP written and implemented by Larry Hastings.</dd>
</dl>
</div>
</div>
<div class="section" id="other-build-and-c-api-changes">
<h3>その他のビルド並びに C API の変更<a class="headerlink" href="#other-build-and-c-api-changes" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../c-api/type.html#c.PyType_GetSlot" title="PyType_GetSlot"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyType_GetSlot()</span></code></a> 関数が、安定 ABI に追加されました。これにより、制限 API を使う際に名前の付いた型のスロットから関数ポインタを取り出すことが出来ます。(Contributed by Martin von Löwis in <a class="reference external" href="https://bugs.python.org/issue17162">bpo-17162</a>.) (---訳注: 安定 ABI, 制限 API については What's New In Python 3.2 (<span class="target" id="index-175"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0384"><strong>PEP 384</strong></a>) を参照。---)</li>
<li>初期化前処理 API の <a class="reference internal" href="../c-api/init.html#c.Py_SetStandardStreamEncoding" title="Py_SetStandardStreamEncoding"><code class="xref c c-func docutils literal notranslate"><span class="pre">Py_SetStandardStreamEncoding()</span></code></a> が追加されました。これにより CPython インタプリタを埋め込むアプリケーションは、標準ストリームに対して確実に特定のエンコーディングとエラーハンドラを使わせることが出来ます。(Contributed by Bastien Montagne and Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue16129">bpo-16129</a>.)</li>
<li>文字列引数を変更することのない Python C API のほとんどが、 <code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*</span></code> ではなく適切に <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*</span></code> として宣言されました。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue1772673">bpo-1772673</a>.)</li>
<li>Python インタプリタが利用出来ない場合 (例えばクロスコンパイルのシナリオ) であっても使える、シェルで書き直したバージョンの <code class="docutils literal notranslate"><span class="pre">python-config</span></code> が追加されました。</li>
<li><a class="reference internal" href="../c-api/unicode.html#c.PyUnicode_FromFormat" title="PyUnicode_FromFormat"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyUnicode_FromFormat()</span></code></a> が <code class="docutils literal notranslate"><span class="pre">%s</span></code>, <code class="docutils literal notranslate"><span class="pre">%A</span></code>, <code class="docutils literal notranslate"><span class="pre">%U</span></code>, <code class="docutils literal notranslate"><span class="pre">%V</span></code>, <code class="docutils literal notranslate"><span class="pre">%S</span></code>, <code class="docutils literal notranslate"><span class="pre">%R</span></code> についての幅と精度の指定をサポートするようになりました。 (Contributed by Ysj Ray and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue7330">bpo-7330</a>.)</li>
<li>既存の <a class="reference internal" href="../c-api/tuple.html#c.PyStructSequence_InitType" title="PyStructSequence_InitType"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStructSequence_InitType()</span></code></a> 関数を補うものとして、 <a class="reference internal" href="../c-api/tuple.html#c.PyStructSequence_InitType2" title="PyStructSequence_InitType2"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyStructSequence_InitType2()</span></code></a> が追加されました。違いは、これは成功時に <code class="docutils literal notranslate"><span class="pre">0</span></code> 、失敗時に <code class="docutils literal notranslate"><span class="pre">-1</span></code> を返すことです。</li>
<li>CPython のソースを、最近の GCC と clang のアドレスサニティチェック機能を使ってコンパイル出来るようにしました: 小さなオブジェクト用アロケータで起こっていた偽の警報を黙らせました。 (Contributed by Dhiru Kholia in <a class="reference external" href="https://bugs.python.org/issue18596">bpo-18596</a>.)</li>
<li>Windows ビルドに <a class="reference external" href="https://en.wikipedia.org/wiki/Address_space_layout_randomization">アドレス空間配置のランダム化</a> と <a class="reference external" href="https://en.wikipedia.org/wiki/Data_Execution_Prevention">データ実行防止</a> を使うようにしました。 (Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue16632">bpo-16632</a>.)</li>
<li><a class="reference internal" href="../library/operator.html#operator.length_hint" title="operator.length_hint"><code class="xref py py-func docutils literal notranslate"><span class="pre">operator.length_hint()</span></code></a> と等価な C API 関数 <a class="reference internal" href="../c-api/object.html#c.PyObject_LengthHint" title="PyObject_LengthHint"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_LengthHint()</span></code></a> が追加されました。 (Contributed by Armin Ronacher in <a class="reference external" href="https://bugs.python.org/issue16148">bpo-16148</a>.)</li>
</ul>
</div>
<div class="section" id="other-improvements">
<span id="other-improvements-3-4"></span><h3>その他の改善<a class="headerlink" href="#other-improvements" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple" id="whatsnew-isolated-mode">
<li><a class="reference internal" href="../using/cmdline.html#using-on-cmdline"><span class="std std-ref">python</span></a> コマンドに新規 <a class="reference internal" href="../using/cmdline.html#using-on-misc-options"><span class="std std-ref">オプション</span></a> の <code class="docutils literal notranslate"><span class="pre">-l</span></code> が追加されました。これは「隔離モード (isolated mode)」で Python を実行します。これが意味するのは、 <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> がスクリプトディレクトリもユーザの <code class="docutils literal notranslate"><span class="pre">site-packages</span></code> ディレクトリも含まず、また、全ての <span class="target" id="index-176"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHON*</span></code> 環境変数が無視される、というものです (ので暗黙で <code class="docutils literal notranslate"><span class="pre">-s</span></code> と <code class="docutils literal notranslate"><span class="pre">-E</span></code> を含んでいるということです)。ほかの制限についても将来適用されるでしょう。その目標はユーザ環境からスクリプト実行を隔離することです。例えばこれは Python がシステムスクリプトとして実行される場合に適切なものです。ほとんどの POSIX システムではシステムスクリプトの <code class="docutils literal notranslate"><span class="pre">#!</span></code> 行で指定できますし、そうすべきです。(Contributed by Christian Heimes in <a class="reference external" href="https://bugs.python.org/issue16499">bpo-16499</a>.)</li>
<li><a class="reference internal" href="../library/readline.html#module-readline" title="readline: GNU readline support for Python. (Unix)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">readline</span></code></a> をサポートするプラットフォームで、対話インタプリタでの <kbd class="kbd docutils literal notranslate">Tab</kbd> キーでの補完がデフォルトで有効になりました。履歴もデフォルトで有効となり、 <code class="file docutils literal notranslate"><span class="pre">~/.python-history</span></code> に書き込まれ (そしてそこから読み込まれ) ます。 (Contributed by Antoine Pitrou and Éric Araujo in <a class="reference external" href="https://bugs.python.org/issue5845">bpo-5845</a>.)</li>
<li>Python インタプリタの <code class="docutils literal notranslate"><span class="pre">--version</span></code> での起動時、標準エラーではなく標準出力にバージョン情報を出力するようになりました (<a class="reference external" href="https://bugs.python.org/issue18338">bpo-18338</a>)。同じ変更は <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> モジュールに対して (<a class="reference external" href="https://bugs.python.org/issue18920">bpo-18920</a>)、また、スクリプトとして呼び出せる機能を持つモジュールに対して (<a class="reference external" href="https://bugs.python.org/issue18922">bpo-18922</a>) も行われました。</li>
<li>CPython の Windows インストーラが、拡張子を登録する際に <span class="target" id="index-177"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATHEXT</span></code> に <code class="docutils literal notranslate"><span class="pre">.py</span></code> を追加するようになりました。これをするとユーザは、 Windows コマンドプロンプトから Python スクリプトを、 <code class="docutils literal notranslate"><span class="pre">.py</span></code> 拡張子なしでその名前だけタイプして実行出来ます。 (Contributed by Paul Moore in <a class="reference external" href="https://bugs.python.org/issue18569">bpo-18569</a>.)</li>
<li>新たな <code class="docutils literal notranslate"><span class="pre">make</span></code> ターゲットの <a class="reference external" href="https://devguide.python.org/coverage/#measuring-coverage-of-c-code-with-gcov-and-lcov">coverage-report</a> の追加。これは python をビルドし、テストスイートを実行し、 <code class="docutils literal notranslate"><span class="pre">gcov</span></code> と <a class="reference external" href="http://ltp.sourceforge.net/coverage/lcov.php">lcov</a> を用いて C 言語のコードベースのカバレッジレポートを HTML で生成します。</li>
<li><a class="reference internal" href="../library/test.html#regrtest"><span class="std std-ref">python 回帰テストスイート</span></a> への <code class="docutils literal notranslate"><span class="pre">-R</span></code> オプションが、 <a class="reference internal" href="../library/sys.html#sys.getallocatedblocks" title="sys.getallocatedblocks"><code class="xref py py-func docutils literal notranslate"><span class="pre">sys.getallocatedblocks()</span></code></a> を使ったメモリアロケーションのリークもチェックするようになりました。(Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue13390">bpo-13390</a>.) (---訳注: リファレンスマニュアルにオプション説明はないので、 <strong class="program">python -m test --help</strong> を参照して下さい。---)</li>
<li><code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span></code> が名前空間パッケージで動くようになりました。</li>
<li><a class="reference internal" href="../library/stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> モジュールが C で実装されました。これは以前問題であった Python モジュール内で値をハードコードすることなく、定数を C ヘッダファイルから取りこめることを意味しています。(---訳注: <a class="reference external" href="https://bugs.python.org/issue11016">bpo-11016</a> 、特に <a class="reference external" href="https://bugs.python.org/issue11016#msg127114">msg127114</a> 以降参照。---)</li>
<li>単一の OS モジュール (POSIX の <code class="docutils literal notranslate"><span class="pre">.so</span></code> と Windows の <code class="docutils literal notranslate"><span class="pre">.dll</span></code>) からの複数 Python モジュールのロードを正しく行えるようになりました (以前は黙ってファイル内の最初のモジュールだけが返されていました)。  (Contributed by Václav Šmilauer in <a class="reference external" href="https://bugs.python.org/issue16421">bpo-16421</a>.)</li>
<li>新しい命令コード <a class="reference internal" href="../library/dis.html#opcode-LOAD_CLASSDEREF"><code class="xref std std-opcode docutils literal notranslate"><span class="pre">LOAD_CLASSDEREF</span></code></a> が追加されました。これは <a class="reference internal" href="../reference/datamodel.html#prepare"><span class="std std-ref">__prepare__</span></a> のある種の使い方で起こりうる、クラス本体内の自由変数のロードでのバグを修正するために導入されました。(Contributed by Benjamin Peterson in <a class="reference external" href="https://bugs.python.org/issue17853">bpo-17853</a>.)</li>
<li>Victor Stinner が、彼の <span class="target" id="index-178"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0445"><strong>PEP 445</strong></a> ベースの <code class="docutils literal notranslate"><span class="pre">pyfailmalloc</span></code> ツールを用いて数多くのメモリエラー関連のクラッシュを特定し、そして修正しました。 (<a class="reference external" href="https://bugs.python.org/issue18408">bpo-18408</a>, <a class="reference external" href="https://bugs.python.org/issue18520">bpo-18520</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">pyvenv</span></code> コマンドに、シンボリックリンクがデフォルトのシステムでもそうせずにコピーを使うようにするための <code class="docutils literal notranslate"><span class="pre">--copies</span></code> オプションが追加されました。 (Contributed by Vinay Sajip in <a class="reference external" href="https://bugs.python.org/issue18807">bpo-18807</a>.)</li>
<li><code class="docutils literal notranslate"><span class="pre">pyvenv</span></code> コマンドにはさらに、そうしなければ自動的に仮想環境に pip がブートストラップされてしまうのを抑制するための、 <code class="docutils literal notranslate"><span class="pre">--without-pip</span></code> オプションが追加されました。(Contributed by Nick Coghlan in <a class="reference external" href="https://bugs.python.org/issue19552">bpo-19552</a> as part of the <span class="target" id="index-179"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0453"><strong>PEP 453</strong></a> implementation.)</li>
<li>環境変数 <span class="target" id="index-180"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONIOENCODING"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONIOENCODING</span></code></a> の値内で、エンコーディング名を省略出来るようになりました。つまり、デフォルトエンコーディングを変更することなしにエラーハンドラだけをセット出来ます。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue18818">bpo-18818</a>.)</li>
<li><a class="reference internal" href="../library/bz2.html#module-bz2" title="bz2: Interfaces for bzip2 compression and decompression."><code class="xref py py-mod docutils literal notranslate"><span class="pre">bz2</span></code></a>、<a class="reference internal" href="../library/lzma.html#module-lzma" title="lzma: A Python wrapper for the liblzma compression library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">lzma</span></code></a>、<a class="reference internal" href="../library/gzip.html#module-gzip" title="gzip: Interfaces for gzip compression and decompression using file objects."><code class="xref py py-mod docutils literal notranslate"><span class="pre">gzip</span></code></a> モジュールの <code class="docutils literal notranslate"><span class="pre">open</span></code> 関数が <code class="docutils literal notranslate"><span class="pre">x</span></code> (排他的作成) モードをサポートするようになりました。 (Contributed by Tim Heaney and Vajrasky Kok in <a class="reference external" href="https://bugs.python.org/issue19201">bpo-19201</a>, <a class="reference external" href="https://bugs.python.org/issue19222">bpo-19222</a>, and <a class="reference external" href="https://bugs.python.org/issue19223">bpo-19223</a>.)</li>
</ul>
</div>
<div class="section" id="significant-optimizations">
<h3>大幅な最適化<a class="headerlink" href="#significant-optimizations" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>UTF-32 デコーダが3-4倍速くなりました。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue14625">bpo-14625</a>.)</li>
<li>集合に対するハッシュ衝突のコストが削減されました。ハッシュテーブルの個々の検査 (probe) で、ハッシュテーブル全体を通したランダムな検査を行う前に、連続する隣接したキー/ハッシュペアをチェックするようになりました。これは、キャッシュ局所性を利用して衝突解決のコストを減らします。この衝突解決戦略は、リニア検査とオープンアドレッシング法のハイブリッドとして説明できます。追加的なリニア検査の数はデフォルトでは 9 です。この値は、コンパイル時に LINEAR_PROBES を定義することで任意の値に変更できます。リニア検査を完全に無効にするには LINEAR_PROBES=0 を設定してください。 (Contributed by Raymond Hettinger in <a class="reference external" href="https://bugs.python.org/issue18771">bpo-18771</a>.)</li>
<li>インタプリタの起動が約 30% 高速化されました。この速度向上は、いくつかの手段によってもたらされました。インタプリタは起動時により少数のモジュールをロードするようになりました。例えば <a class="reference internal" href="../library/re.html#module-re" title="re: Regular expression operations."><code class="xref py py-mod docutils literal notranslate"><span class="pre">re</span></code></a>, <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a>, <a class="reference internal" href="../library/locale.html#module-locale" title="locale: Internationalization services."><code class="xref py py-mod docutils literal notranslate"><span class="pre">locale</span></code></a> モジュール、およびそれらの依存モジュールは、デフォルトではインポートされません。 marshal モジュールは、コンパイルされた Python コードをより高速にロードできるように改善されました。 (Contributed by Antoine Pitrou, Christian Heimes and Victor Stinner in <a class="reference external" href="https://bugs.python.org/issue19219">bpo-19219</a>, <a class="reference external" href="https://bugs.python.org/issue19218">bpo-19218</a>, <a class="reference external" href="https://bugs.python.org/issue19209">bpo-19209</a>, <a class="reference external" href="https://bugs.python.org/issue19205">bpo-19205</a> and <a class="reference external" href="https://bugs.python.org/issue9548">bpo-9548</a>.)</li>
<li><a class="reference internal" href="../library/bz2.html#bz2.BZ2File" title="bz2.BZ2File"><code class="xref py py-class docutils literal notranslate"><span class="pre">bz2.BZ2File</span></code></a> が大半の場合 Python2 のバージョン以上に速くなりました。<a class="reference internal" href="../library/lzma.html#lzma.LZMAFile" title="lzma.LZMAFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">lzma.LZMAFile</span></code></a> も最適化されました。(Contributed by Serhiy Storchaka and Nadeem Vawda in <a class="reference external" href="https://bugs.python.org/issue16034">bpo-16034</a>.)</li>
<li><a class="reference internal" href="../library/random.html#random.getrandbits" title="random.getrandbits"><code class="xref py py-func docutils literal notranslate"><span class="pre">random.getrandbits()</span></code></a> が (通常使用される) 小さな整数に対して20%-40% 早くなりました。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue16674">bpo-16674</a>.)</li>
<li>文字列のストレージ形式を変更したことにより、文字列のピックル化は非常に速くなりました。(Contributed by Victor Stinner and Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue15596">bpo-15596</a>.)</li>
<li><code class="xref py py-meth docutils literal notranslate"><span class="pre">io.FileIO.readall()</span></code> の性能問題が解決されました。これは特に Windows に影響し、 <a class="reference internal" href="../library/subprocess.html#module-subprocess" title="subprocess: Subprocess management."><code class="xref py py-mod docutils literal notranslate"><span class="pre">subprocess</span></code></a> を通して大量のデータをパイプで渡しているケースでかなり速度向上します。 (Contributed by Richard Oudkerk in <a class="reference external" href="https://bugs.python.org/issue15758">bpo-15758</a>.)</li>
<li><a class="reference internal" href="../library/html.html#html.escape" title="html.escape"><code class="xref py py-func docutils literal notranslate"><span class="pre">html.escape()</span></code></a> が10倍速くなりました。(Contributed by Matt Bryant in <a class="reference external" href="https://bugs.python.org/issue18020">bpo-18020</a>.)</li>
<li>Windows において、 <code class="docutils literal notranslate"><span class="pre">obmalloc</span></code> で CRT の <code class="docutils literal notranslate"><span class="pre">malloc</span></code> の代わりにネイティブの <code class="docutils literal notranslate"><span class="pre">VirtualAlloc</span></code> を使うようになりました。人工的なベンチマーク結果は、メモリー消費が 3% 減ったことを示しています。</li>
<li><a class="reference internal" href="../library/os.html#os.urandom" title="os.urandom"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.urandom()</span></code></a> は、複数のスレッドから並行して実行された時に多数のファイル記述子が使われることを避けるために、遅延オープンされる永続的なファイル記述子を使うようになりました。 (Contributed by Antoine Pitrou in <a class="reference external" href="https://bugs.python.org/issue18756">bpo-18756</a>.)</li>
</ul>
</div>
</div>
<div class="section" id="deprecated">
<span id="deprecated-3-4"></span><h2>非推奨<a class="headerlink" href="#deprecated" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>このセクションでは、Python 3.4 で非推奨となり Python 3.5 以降で削除予定となる、様々な API とその他機能性についてをカバーします。(全てではありませんが) ほとんどのケースで、非推奨に対する警告を (たとえば <code class="docutils literal notranslate"><span class="pre">-Wd</span></code> を使って) 有効にしたインタプリタ起動時、非推奨 API を使うと <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> を励起します。</p>
<div class="section" id="deprecations-in-the-python-api">
<h3>Python API の非推奨項目<a class="headerlink" href="#deprecations-in-the-python-api" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="#whatsnew-pep-451"><span class="std std-ref">PEP 451: インポートシステムのための ModuleSpec 型</span></a> にて述べたとおり、多数の <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> メソッドと関数が非推奨となりました。 <a class="reference internal" href="../library/importlib.html#importlib.find_loader" title="importlib.find_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.find_loader()</span></code></a> は <a class="reference internal" href="../library/importlib.html#importlib.util.find_spec" title="importlib.util.find_spec"><code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.find_spec()</span></code></a> に取って代わられました; <a class="reference internal" href="../library/importlib.html#importlib.machinery.PathFinder.find_module" title="importlib.machinery.PathFinder.find_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.PathFinder.find_module()</span></code></a> は <a class="reference internal" href="../library/importlib.html#importlib.machinery.PathFinder.find_spec" title="importlib.machinery.PathFinder.find_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.machinery.PathFinder.find_spec()</span></code></a> に取って代わられました; <a class="reference internal" href="../library/importlib.html#importlib.abc.MetaPathFinder.find_module" title="importlib.abc.MetaPathFinder.find_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_module()</span></code></a> は <a class="reference internal" href="../library/importlib.html#importlib.abc.MetaPathFinder.find_spec" title="importlib.abc.MetaPathFinder.find_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.MetaPathFinder.find_spec()</span></code></a> に取って代わられました; <a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder.find_loader" title="importlib.abc.PathEntryFinder.find_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_loader()</span></code></a> と <a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder.find_module" title="importlib.abc.PathEntryFinder.find_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">find_module()</span></code></a> は <a class="reference internal" href="../library/importlib.html#importlib.abc.PathEntryFinder.find_spec" title="importlib.abc.PathEntryFinder.find_spec"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.PathEntryFinder.find_spec()</span></code></a> に取って代わられました; 全ての <code class="docutils literal notranslate"><span class="pre">xxxLoader</span></code> ABC <code class="docutils literal notranslate"><span class="pre">load_module</span></code> メソッド (<a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.load_module" title="importlib.abc.Loader.load_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.Loader.load_module()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader.load_module" title="importlib.abc.InspectLoader.load_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.InspectLoader.load_module()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.abc.FileLoader.load_module" title="importlib.abc.FileLoader.load_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.FileLoader.load_module()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.abc.SourceLoader.load_module" title="importlib.abc.SourceLoader.load_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.SourceLoader.load_module()</span></code></a>) はもう実装されるべきではなく、代わりにローダは <code class="docutils literal notranslate"><span class="pre">exec_module</span></code> メソッド (<a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.exec_module" title="importlib.abc.Loader.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.Loader.exec_module()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.abc.InspectLoader.exec_module" title="importlib.abc.InspectLoader.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.InspectLoader.exec_module()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.abc.SourceLoader.exec_module" title="importlib.abc.SourceLoader.exec_module"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.SourceLoader.exec_module()</span></code></a>) を実装して残りはインポートシステムに任せなければなりません; そして <a class="reference internal" href="../library/importlib.html#importlib.abc.Loader.module_repr" title="importlib.abc.Loader.module_repr"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.Loader.module_repr()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.util.module_for_loader" title="importlib.util.module_for_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.util.module_for_loader()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.util.set_loader" title="importlib.util.set_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.util.set_loader()</span></code></a>, <a class="reference internal" href="../library/importlib.html#importlib.util.set_package" title="importlib.util.set_package"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.util.set_package()</span></code></a> は、インポートシステムによって自動的に処理される内容となったため、もはや必要ありません。</li>
<li><a class="reference internal" href="../library/imp.html#module-imp" title="imp: Access the implementation of the import statement. (非推奨)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">imp</span></code></a> モジュールは撤廃保留中です。Python 2 と 3 でのコードベースの互換性を維持するために、モジュール削除は現在のところスケジュールされてはいません。</li>
<li><a class="reference internal" href="../library/formatter.html#module-formatter" title="formatter: Generic output formatter and device interface. (非推奨)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">formatter</span></code></a> モジュールが撤廃保留中で、Python 3.6 での削除が計画されています。</li>
<li><a class="reference internal" href="../library/hmac.html#hmac.new" title="hmac.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">hmac.new()</span></code></a> 関数の <em>digestmod</em> がデフォルトで暗黙に <code class="docutils literal notranslate"><span class="pre">MD5</span></code> を使う仕様は撤廃されます。Python 3.6 では <em>digestmod</em> 引数には明示的にダイジェスト名かコンストラクタを渡すことが求められます。</li>
<li><a class="reference internal" href="../library/ftplib.html#module-ftplib" title="ftplib: FTP protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">ftplib</span></code></a> モジュール内の内部クラス <code class="docutils literal notranslate"><span class="pre">Netrc</span></code> はずっと長いことそのドキュメンテーション文字列内で非推奨であることを謳ってきました。これは今や <a class="reference internal" href="../library/exceptions.html#DeprecationWarning" title="DeprecationWarning"><code class="xref py py-exc docutils literal notranslate"><span class="pre">DeprecationWarning</span></code></a> を発行します。Python 3.5 ではこのクラスは完全に削除されます。</li>
<li><a class="reference internal" href="../library/subprocess.html#subprocess.Popen.wait" title="subprocess.Popen.wait"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subprocess.Popen.wait()</span></code></a> の文書化されていない引数 <em>endtime</em> は本来曝してはいけないものでしたので、使用されていないことを願っています。これは非推奨ですし、確実に Python 3.5 では削除されるのではないでしょうか。(---訳注: 3.5 では削除はされませんでしたが、もちろん使用しないでください。これは内部用です。---)</li>
<li><a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTMLParser</span></code></a> の <em>strict</em> 引数は非推奨です。</li>
<li><a class="reference internal" href="../library/plistlib.html#module-plistlib" title="plistlib: Generate and parse Mac OS X plist files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">plistlib</span></code></a> モジュールに追加された <a class="reference internal" href="../library/plistlib.html#plistlib.load" title="plistlib.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.dump" title="plistlib.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">dump()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.loads" title="plistlib.loads"><code class="xref py py-func docutils literal notranslate"><span class="pre">loads()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.dumps" title="plistlib.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">dumps()</span></code></a> により、対応する <a class="reference internal" href="../library/plistlib.html#plistlib.readPlist" title="plistlib.readPlist"><code class="xref py py-func docutils literal notranslate"><span class="pre">readPlist()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.writePlist" title="plistlib.writePlist"><code class="xref py py-func docutils literal notranslate"><span class="pre">writePlist()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.readPlistFromBytes" title="plistlib.readPlistFromBytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">readPlistFromBytes()</span></code></a>, <a class="reference internal" href="../library/plistlib.html#plistlib.writePlistToBytes" title="plistlib.writePlistToBytes"><code class="xref py py-func docutils literal notranslate"><span class="pre">writePlistToBytes()</span></code></a> が非推奨となりました。同じく単に <a class="reference internal" href="../library/stdtypes.html#bytes" title="bytes"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> コンストラクタを使えば良いので <a class="reference internal" href="../library/plistlib.html#plistlib.Data" title="plistlib.Data"><code class="xref py py-func docutils literal notranslate"><span class="pre">Data()</span></code></a> が非推奨となりました。</li>
<li><a class="reference internal" href="../library/sysconfig.html#module-sysconfig" title="sysconfig: Python's configuration information"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sysconfig</span></code></a> のキー <code class="docutils literal notranslate"><span class="pre">SO</span></code> は非推奨です。これは <code class="docutils literal notranslate"><span class="pre">EXT_SUFFIX</span></code> に取って代わられました。</li>
<li>種々の <code class="docutils literal notranslate"><span class="pre">open</span></code> 関数で受け付けられていた <code class="docutils literal notranslate"><span class="pre">U</span></code> モードは非推奨となりました。Python 3 ではこれは何も役に立つことはしません。 <a class="reference internal" href="../library/io.html#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">io.TextIOWrapper</span></code></a> (必要ならば)、 <em>newline</em> 引数を適切に使うことによって置き換えられるはずです。</li>
<li><a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse" title="xml.etree.ElementTree.iterparse"><code class="xref py py-func docutils literal notranslate"><span class="pre">xml.etree.ElementTree.iterparse()</span></code></a> の <em>parser</em> 引数と <a class="reference internal" href="../library/xml.etree.elementtree.html#xml.etree.ElementTree.XMLParser" title="xml.etree.ElementTree.XMLParser"><code class="xref py py-func docutils literal notranslate"><span class="pre">XMLParser()</span></code></a> の <em>html</em> 引数が非推奨となりました。後者は (訳注: 第一引数のため) 削除に備えて <code class="docutils literal notranslate"><span class="pre">XMLParser</span></code> への全ての引数はキーワード引数として渡すようにしてください。</li>
</ul>
</div>
<div class="section" id="deprecated-features">
<h3>非推奨の機能<a class="headerlink" href="#deprecated-features" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../library/idle.html#idle"><span class="std std-ref">IDLE</span></a> の <code class="docutils literal notranslate"><span class="pre">-n</span></code> フラグでの実行 (サブプロセスを起こさない) は非推奨となりました。ただし、この機能は <a class="reference external" href="https://bugs.python.org/issue18823">bpo-18823</a> が解決するまでは削除はされません。</li>
<li><a class="reference internal" href="../library/site.html#module-site" title="site: Module responsible for site-specific configuration."><code class="xref py py-mod docutils literal notranslate"><span class="pre">site</span></code></a> モジュールは &quot;site-python&quot; ディレクトリが存在すればこれを sys.path に加えていましたが、これは非推奨となりました。 (<a class="reference external" href="https://bugs.python.org/issue19375">bpo-19375</a>)</li>
</ul>
</div>
</div>
<div class="section" id="removed">
<h2>削除<a class="headerlink" href="#removed" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="operating-systems-no-longer-supported">
<h3>サポートされなくなったオペレーティングシステム<a class="headerlink" href="#operating-systems-no-longer-supported" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>以下の OS 向けのソースとビルドツールは削除されました。</p>
<ul class="simple">
<li>OS/2 (<a class="reference external" href="https://bugs.python.org/issue16135">bpo-16135</a>)。</li>
<li>Windows 2000 (<a class="reference external" href="https://hg.python.org/cpython/rev/e52df05b496a">changeset e52df05b496a</a>)。</li>
<li><code class="docutils literal notranslate"><span class="pre">COMSPEC</span></code> が <code class="docutils literal notranslate"><span class="pre">command.com</span></code> を指している Windows システム (<a class="reference external" href="https://bugs.python.org/issue14470">bpo-14470</a>).</li>
<li>VMS (<a class="reference external" href="https://bugs.python.org/issue16136">bpo-16136</a>)。</li>
</ul>
</div>
<div class="section" id="api-and-feature-removals">
<h3>API と機能の削除<a class="headerlink" href="#api-and-feature-removals" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>時代遅れとなり、以前に既に非推奨となった以下の API と機能が削除されました:</p>
<ul class="simple">
<li>保守されていなかった <code class="docutils literal notranslate"><span class="pre">Misc/TextMate</span></code> と <code class="docutils literal notranslate"><span class="pre">Misc/vim</span></code> ディレクトリは削除されました (代わりに何が使えるかの提案は <a class="reference external" href="https://devguide.python.org">devguide</a> をみてください --- 訳注: おそらく <a class="reference external" href="https://devguide.python.org/#additional-resources">Additional Resources</a> に挙げられている <a class="reference external" href="https://wiki.python.org/moin/PythonEditors">wiki</a> を指している ---)。</li>
<li>makefile のマクロ <code class="docutils literal notranslate"><span class="pre">SO</span></code>  は削除されました (これは <code class="docutils literal notranslate"><span class="pre">SHLIB_SUFFIX</span></code> マクロと <code class="docutils literal notranslate"><span class="pre">EXT_SUFFIX</span></code> マクロで置き換えられました) (<a class="reference external" href="https://bugs.python.org/issue16754">bpo-16754</a>)。</li>
<li><code class="docutils literal notranslate"><span class="pre">PyThreadState.tick_counter</span></code> フィールドは削除されました。これは Python 3.2 で「新しい GIL」が導入された際に意味をなくしていました。 (<a class="reference external" href="https://bugs.python.org/issue19199">bpo-19199</a>).</li>
<li><code class="docutils literal notranslate"><span class="pre">PyLoader</span></code> と <code class="docutils literal notranslate"><span class="pre">PyPycLoader</span></code> が <a class="reference internal" href="../library/importlib.html#module-importlib" title="importlib: The implementation of the import machinery."><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib</span></code></a> から削除されました。 (Contributed by Taras Lyapun in <a class="reference external" href="https://bugs.python.org/issue15641">bpo-15641</a>.)</li>
<li><a class="reference internal" href="../library/http.client.html#http.client.HTTPConnection" title="http.client.HTTPConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPConnection</span></code></a> と <a class="reference internal" href="../library/http.client.html#http.client.HTTPSConnection" title="http.client.HTTPSConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPSConnection</span></code></a> の <em>strict</em> 引数は削除されました。 HTTP 0.9 スタイルの 「Simple Responses」はもはやサポートされません。</li>
<li><a class="reference internal" href="../library/urllib.request.html#urllib.request.Request" title="urllib.request.Request"><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.request.Request</span></code></a> の非推奨となっていた getter/setter メソッドの <code class="docutils literal notranslate"><span class="pre">add_data</span></code>, <code class="docutils literal notranslate"><span class="pre">has_data</span></code>, <code class="docutils literal notranslate"><span class="pre">get_data</span></code>, <code class="docutils literal notranslate"><span class="pre">get_type</span></code>, <code class="docutils literal notranslate"><span class="pre">get_host</span></code>, <code class="docutils literal notranslate"><span class="pre">get_selector</span></code>, <code class="docutils literal notranslate"><span class="pre">set_proxy</span></code>, <code class="docutils literal notranslate"><span class="pre">get_origin_req_host</span></code>, <code class="docutils literal notranslate"><span class="pre">is_unverifiable</span></code> は削除されました (代わりに属性アクセスを直接使ってください)。</li>
<li>非推奨の <code class="docutils literal notranslate"><span class="pre">TYPE_INT64</span></code> ロードのサポートが <a class="reference internal" href="../library/marshal.html#module-marshal" title="marshal: Convert Python objects to streams of bytes and back (with different constraints)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">marshal</span></code></a> から削除されました。  (Contributed by Dan Riti in <a class="reference external" href="https://bugs.python.org/issue15480">bpo-15480</a>.)</li>
<li><a class="reference internal" href="../library/inspect.html#inspect.Signature" title="inspect.Signature"><code class="xref py py-class docutils literal notranslate"><span class="pre">inspect.Signature</span></code></a>: 位置専用パラメータを示すのに今では正当な名前が必要です。</li>
<li>object 自身の <a class="reference internal" href="../reference/datamodel.html#object.__format__" title="object.__format__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">object.__format__()</span></code></a> はもはや空でないフォーマット文字列を受け付けず、 <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> を投げます。空でない文字列を渡すことは既に Python 3.2 で非推奨となっていました。この変更は以前は動作した (そして正しくない) コードが、オブジェクトが __format__ メソッドを得ることで処理に失敗し始めていた状況を防ぐ目的でなされました。この変更が意味することはあなたのコードにとって、それを処理する __format__ メソッドを持たないオブジェクトに <code class="docutils literal notranslate"><span class="pre">s</span></code> フォーマットコードを使うと <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> を起こしうるようになった、ということです。背景については <a class="reference external" href="https://bugs.python.org/issue7994">bpo-7994</a> を参照して下さい。 (---訳注: このパラグラフの中盤が非常にわかりにくい表現で訳者も意味を取りきれていませんが、おそらく Python 2.6/3.0 で動作していた例えば <code class="docutils literal notranslate"><span class="pre">format(1+1j,</span> <span class="pre">'10s')</span></code> が Python 2.7/3.1 で動作しなくなったことを指しているのだと思います。問題にされているのは動作しなくなったことではなくてむしろ動作していたことで、そして object.__format__ が return str(self).__format__(fmt) で実現されていること。このコードでは fmt は何らの意味も持っていませんので、これは一貫性に欠ける要因である、とのことで、「わかりやすく拒絶する」ことが真意であるようです ---)</li>
<li>Python 3.2 で非推奨となった <code class="xref py py-meth docutils literal notranslate"><span class="pre">difflib.SequenceMatcher.isbjunk()</span></code> および <code class="xref py py-meth docutils literal notranslate"><span class="pre">difflib.SequenceMatcher.isbpopular()</span></code> は削除されました: <em>sm</em> が <a class="reference internal" href="../library/difflib.html#difflib.SequenceMatcher" title="difflib.SequenceMatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">SequenceMatcher</span></code></a> であるとして、 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">sm.bjunk</span></code> と <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">in</span> <span class="pre">sm.bpopular</span></code> を使うようにしてください。 (<a class="reference external" href="https://bugs.python.org/issue13248">bpo-13248</a>)</li>
</ul>
</div>
<div class="section" id="code-cleanups">
<h3>コードの整理<a class="headerlink" href="#code-cleanups" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../library/pydoc.html#module-pydoc" title="pydoc: Documentation generator and online help system."><code class="xref py py-mod docutils literal notranslate"><span class="pre">pydoc</span></code></a> モジュールで、使用されておらず文書化もされていなかった内部的な <code class="docutils literal notranslate"><span class="pre">Scanner</span></code> クラスが削除されました。</li>
<li>ひどく壊れていた OSX システムで呼ばれる可能性があるのみだった <a class="reference internal" href="../library/platform.html#module-platform" title="platform: Retrieves as much platform identifying data as possible."><code class="xref py py-mod docutils literal notranslate"><span class="pre">platform</span></code></a> モジュールの非公開関数 <code class="docutils literal notranslate"><span class="pre">_mac_ver_lookup</span></code>, <code class="docutils literal notranslate"><span class="pre">_mac_ver_gstalt</span></code>, <code class="docutils literal notranslate"><span class="pre">_bcd2str</span></code> とあわせて、非公開かつ実質的に未使用だった <code class="docutils literal notranslate"><span class="pre">_gestalt</span></code> モジュールが削除されました。 (see <a class="reference external" href="https://bugs.python.org/issue18393">bpo-18393</a>)</li>
<li><a class="reference internal" href="../library/tarfile.html#module-tarfile" title="tarfile: Read and write tar-format archive files."><code class="xref py py-mod docutils literal notranslate"><span class="pre">tarfile</span></code></a> モジュールの名前空間内に <a class="reference internal" href="../library/stat.html#module-stat" title="stat: Utilities for interpreting the results of os.stat(), os.lstat() and os.fstat()."><code class="xref py py-mod docutils literal notranslate"><span class="pre">stat</span></code></a> 定数群がハードコードでコピーされていましたが、これは削除されました。</li>
</ul>
</div>
</div>
<div class="section" id="porting-to-python-3-4">
<h2>Python 3.4 への移植<a class="headerlink" href="#porting-to-python-3-4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>このセクションでは前述の変更とバグフィックスにより必要となるかもしれないコードの変更を列挙します:</p>
<div class="section" id="changes-in-python-command-behavior">
<h3>'python' コマンドの挙動の変更<a class="headerlink" href="#changes-in-python-command-behavior" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>POSIX シェルでは、環境変数 <span class="target" id="index-181"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> に空の値をセットすることは、何もセットしないことと同じです。ところが <span class="target" id="index-182"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> に空の値をセットすることは、何もセットしないことと <em>まったく同じではありませんでした</em>: <span class="target" id="index-183"></span><a class="reference internal" href="../using/cmdline.html#envvar-PYTHONPATH"><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PYTHONPATH</span></code></a> に空の値をセットすると、 <code class="docutils literal notranslate"><span class="pre">.</span></code> をセットしたのと同じ意味になっていて、これは <span class="target" id="index-184"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> での振舞いから類推しようとすると混乱を招くものでした。この振る舞いは <span class="target" id="index-185"></span><code class="xref std std-envvar docutils literal notranslate"><span class="pre">PATH</span></code> での POSIX の慣習に従うように改められました。</li>
<li>CPython インタプリタのデバッグビルド (<code class="docutils literal notranslate"><span class="pre">--with-pydebug</span></code>) での出力 [X refs, Y blocks] がデフォルトではオフになりました。 <code class="docutils literal notranslate"><span class="pre">-X</span> <span class="pre">showrefcount</span></code> オプション起動で再度有効に出来ます。 (Contributed by Ezio Melotti in <a class="reference external" href="https://bugs.python.org/issue17323">bpo-17323</a>.)</li>
<li><strong class="program">python</strong> コマンドとほとんどの標準ライブラリスクリプト (また <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> も) において、 <code class="docutils literal notranslate"><span class="pre">--version</span></code> が情報出力を <code class="docutils literal notranslate"><span class="pre">stderr</span></code> ではなく <code class="docutils literal notranslate"><span class="pre">stdout</span></code> に行うようになりました (issue へのリンクは <a class="reference internal" href="#other-improvements-3-4"><span class="std std-ref">その他の改善</span></a> セクション内参照)。</li>
</ul>
</div>
<div class="section" id="changes-in-the-python-api">
<h3>Python API の変更<a class="headerlink" href="#changes-in-the-python-api" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../library/importlib.html#module-importlib.abc" title="importlib.abc: Abstract base classes related to import"><code class="xref py py-mod docutils literal notranslate"><span class="pre">importlib.abc</span></code></a> 内に定義されている ABC は、無分別に <a class="reference internal" href="../library/exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> を投げるのではなく、相応しい例外を投げるかデフォルト値を返すかのどちらかになりました。このことは <a class="reference internal" href="../library/functions.html#super" title="super"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> を呼び出して ABC がするがままに任せているコードにのみ影響します。互換性のために、必要であれば <a class="reference internal" href="../library/exceptions.html#NotImplementedError" title="NotImplementedError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">NotImplementedError</span></code></a> とその投げられる新たな例外の両方を捕捉してください。</li>
<li>モジュール型が <a class="reference internal" href="../reference/import.html#__package__" title="__package__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__package__</span></code></a> 属性と <a class="reference internal" href="../reference/import.html#__loader__" title="__loader__"><code class="xref py py-attr docutils literal notranslate"><span class="pre">__loader__</span></code></a> 属性をデフォルトで <code class="docutils literal notranslate"><span class="pre">None</span></code> で初期化するようになりました。これら属性がセットされたかどうかを後方互換性のある方法で調べるには、たとえば <code class="docutils literal notranslate"><span class="pre">getattr(module,</span> <span class="pre">'__loader__',</span> <span class="pre">None)</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">None</span></code> のようにしてください。 (<a class="reference external" href="https://bugs.python.org/issue17115">bpo-17115</a>.)</li>
<li><a class="reference internal" href="../library/importlib.html#importlib.util.module_for_loader" title="importlib.util.module_for_loader"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.util.module_for_loader()</span></code></a> がリロードを適切にサポートするために、 <code class="docutils literal notranslate"><span class="pre">__loader__</span></code> と <code class="docutils literal notranslate"><span class="pre">__package__</span></code> を無条件にセットするようになりました。これが望む振る舞いでないならば、これら属性を手動でセットする必要があるでしょう。モジュールの管理には <code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.module_to_load()</span></code> を使うことが出来ます。(---訳注: 最後の「You can use <code class="xref py py-func docutils literal notranslate"><span class="pre">importlib.util.module_to_load()</span></code> for module management.」が意味不明。モジュールのプライベート <code class="docutils literal notranslate"><span class="pre">_module_to_load</span></code> がコンテキストマネージャとして定義されているので、それのことかもしれません。---)</li>
<li>インポートがリロードの際に無条件に関連属性 (例えば <code class="docutils literal notranslate"><span class="pre">__name__</span></code>, <code class="docutils literal notranslate"><span class="pre">__loader__</span></code>, <code class="docutils literal notranslate"><span class="pre">__package__</span></code>, <code class="docutils literal notranslate"><span class="pre">__file__</span></code>, <code class="docutils literal notranslate"><span class="pre">__cached__</span></code>) をリセットするようになりました。これは、3.3 以前のリロードの際にモジュールを再発見する振る舞いと同じものを復元するものであるということを注記しておきます。 (<a class="reference external" href="https://bugs.python.org/issue19413">bpo-19413</a>)</li>
<li>凍結パッケージ (frozen package) はもはや <code class="docutils literal notranslate"><span class="pre">__path__</span></code> にパッケージ名を含むリストをセットせず、空リストをセットします。この以前の振る舞いは、凍結パッケージと同じ名前を持つディレクトリが存在する場合のサブモジュールのインポートで、インポートシステムが間違ったことを起こしうるものでした。モジュールがパッケージなのかそうでないのかを決める正しい方法は、 <code class="docutils literal notranslate"><span class="pre">hasattr(module,</span> <span class="pre">'__path__')</span></code> を使うことです。 (<a class="reference external" href="https://bugs.python.org/issue18065">bpo-18065</a>)</li>
<li>凍結モジュール (frozen module) はもはや <code class="docutils literal notranslate"><span class="pre">__file__</span></code> 属性を定義しません。それらはどこかはっきりとした場所からロードされたのではないのですから、凍結モジュールにこの属性をセットすることは、意味的に間違っているのです。モジュールが凍結コード由来であることを知る必要があれば、モジュールの <code class="docutils literal notranslate"><span class="pre">__spec__.location</span></code> に <code class="docutils literal notranslate"><span class="pre">'frozen'</span></code> がセットされているかどうかでわかりますし、ローダが <a class="reference internal" href="../library/importlib.html#importlib.machinery.FrozenImporter" title="importlib.machinery.FrozenImporter"><code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.machinery.FrozenImporter</span></code></a> のサブクラスかどうかをチェックするか、Python 2 との互換性が必要であれば、 <code class="xref py py-func docutils literal notranslate"><span class="pre">imp.is_frozen()</span></code> が使えます。</li>
<li><a class="reference internal" href="../library/py_compile.html#py_compile.compile" title="py_compile.compile"><code class="xref py py-func docutils literal notranslate"><span class="pre">py_compile.compile()</span></code></a> が書き込み先ファイルパスがシンボリックリンクか非レギュラーファイルの場合に <a class="reference internal" href="../library/exceptions.html#FileExistsError" title="FileExistsError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">FileExistsError</span></code></a> を投げるようになりました。これは、警告の役割を果たすためです、インポートがファイルパスの元のファイルタイプが何かによらずに、それらファイルをレギュラーファイルで上書きすることの。</li>
<li>ソースコードをロードしようとして <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> かもしくは <a class="reference internal" href="../library/exceptions.html#UnicodeDecodeError" title="UnicodeDecodeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code></a> を引き起こした場合に、 <a class="reference internal" href="../library/importlib.html#importlib.abc.SourceLoader.get_source" title="importlib.abc.SourceLoader.get_source"><code class="xref py py-meth docutils literal notranslate"><span class="pre">importlib.abc.SourceLoader.get_source()</span></code></a> はそれを <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> に読み替えて投げることをしなくなりました。 <a class="reference internal" href="../library/exceptions.html#ImportError" title="ImportError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ImportError</span></code></a> はそうあるべきなのに見つからない場合にのみ投げられるべきなので、ソースコードが見つかったけれども正しくない構造である場合の意味にまで及ぶのは、手を伸ばし過ぎで過負荷です。ImportError を捕捉していたコードで今後とも構文エラーとデコーディングの問題を無視したいと望むならば、これら 3 つ全ての例外を捕捉するようにしてください。 (訳注: <a class="reference external" href="https://hg.python.org/cpython/rev/e353f64dfd95">changeset 84172:e353f64dfd95</a> )</li>
<li><a class="reference internal" href="../library/functools.html#functools.update_wrapper" title="functools.update_wrapper"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.update_wrapper()</span></code></a> と <a class="reference internal" href="../library/functools.html#functools.wraps" title="functools.wraps"><code class="xref py py-func docutils literal notranslate"><span class="pre">functools.wraps()</span></code></a> が、たとえその関数も <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> を持っていたとしても正しくその関数が包まれるように <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> 属性値をセットするようになりました。つまり <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> 属性は、以前のようにチェイン内の全ての <code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> 属性が最も内側の関数を参照するのではなく、デコレートされた関数の積み上げを正しくリンクするようになったということです。以前の振る舞いが意図されたものであると思い込んでいたイントロスペクションライブラリの作者は、チェインの中の最初の関数 (<code class="docutils literal notranslate"><span class="pre">__wrapped__</span></code> 属性を持たない) にアクセスするのに <a class="reference internal" href="../library/inspect.html#inspect.unwrap" title="inspect.unwrap"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.unwrap()</span></code></a> を使えます。(---訳注: <a class="reference external" href="https://bugs.python.org/issue17482">bpo-17482</a>. わかりにくいので実例で。中で適切に &#64;wrap を使うデコレータ &#64;deco1、&#64;deco2 があるとして、my_func をこの両方でデコレートするとします。この場合に、Python 3.3 までは <code class="docutils literal notranslate"><span class="pre">my_func.__wrapped__.__wrapped__</span></code> が AttributeError になります。今回のこの修正で <code class="docutils literal notranslate"><span class="pre">my_func.__wrapped__.__wrapped__</span></code> は期待通りに振舞います。 ---)</li>
<li><a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getfullargspec()</span></code></a> は、 <a class="reference internal" href="../library/inspect.html#inspect.signature" title="inspect.signature"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.signature()</span></code></a> を前提とした再実装がなされました。これにより、かつて扱えていたよりも遥かに広い種類の呼び出し可能 (callable) を扱うようになりました (訳注: 例えば <a class="reference internal" href="../library/functions.html#open" title="open"><code class="xref py py-func docutils literal notranslate"><span class="pre">open()</span></code></a> などは Python 3.3 までは扱えなかった)。Python 3.4 系列の経過のなかで、追加で組み込みや拡張モジュールの callable がシグニチャのメタデータを持つことが期待されています。 <a class="reference internal" href="../library/inspect.html#inspect.getfullargspec" title="inspect.getfullargspec"><code class="xref py py-func docutils literal notranslate"><span class="pre">inspect.getfullargspec()</span></code></a> が非 Python callable で失敗することを前提としたコードは、適宜調整の必要があるかもしれません。</li>
<li><a class="reference internal" href="../library/importlib.html#importlib.machinery.PathFinder" title="importlib.machinery.PathFinder"><code class="xref py py-class docutils literal notranslate"><span class="pre">importlib.machinery.PathFinder</span></code></a> は <a class="reference internal" href="../library/sys.html#sys.path_hooks" title="sys.path_hooks"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path_hooks</span></code></a> 内のオブジェクトに、空文字列の場合は現在作業ディレクトリを渡すようになりました。結果の <a class="reference internal" href="../library/sys.html#sys.path_importer_cache" title="sys.path_importer_cache"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path_importer_cache</span></code></a> が決して <code class="docutils literal notranslate"><span class="pre">''</span></code> を含まないことになるので、 <a class="reference internal" href="../library/sys.html#sys.path" title="sys.path"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code></a> に基いて <a class="reference internal" href="../library/sys.html#sys.path_importer_cache" title="sys.path_importer_cache"><code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path_importer_cache</span></code></a> を巡回しても全てのキーを見つけられません。インタプリタを <code class="docutils literal notranslate"><span class="pre">-m</span></code> で起動した場合も含め、現在作業ディレクトリ内でインポートされた際のモジュールの <code class="docutils literal notranslate"><span class="pre">__file__</span></code> も絶対パスで持つようになりました (ただしスクリプトがコマンドラインから相対パスを使って直接実行された際の <code class="docutils literal notranslate"><span class="pre">__main__.__file__</span></code> を除きます (Contributed by Brett Cannon in <a class="reference external" href="https://bugs.python.org/issue18416">bpo-18416</a>))。 (<a class="reference external" href="https://bugs.python.org/issue18416">bpo-18416</a>)</li>
<li><a class="reference internal" href="../library/http.client.html#http.client.HTTPConnection" title="http.client.HTTPConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPConnection</span></code></a> と <a class="reference internal" href="../library/http.client.html#http.client.HTTPSConnection" title="http.client.HTTPSConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPSConnection</span></code></a> から <em>strict</em> 引数が削除されたことは、残りの引数をキーワード引数としてではなく位置引数として使っていたなら意味が変わってしまいます。非推奨警告に注意を払ってきたのであれば、あなたのコードは既に全てのオプショナル引数をキーワードで渡しているはずです。</li>
<li><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">__future__</span> <span class="pre">import</span> <span class="pre">...</span></code> ステートメントの間に文字列が含まれる場合に <em>常に</em> <a class="reference internal" href="../library/exceptions.html#SyntaxError" title="SyntaxError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">SyntaxError</span></code></a> となるようになりました。以前はモジュールの docstring が先頭にある場合とない場合で振る舞いが違っていて、ない場合にこのエラーが意図せず無視される場合がありました。この修正は CPython を言語仕様に準拠させるものです。Jython と PyPy では既にこれが行われています。 (<a class="reference external" href="https://bugs.python.org/issue17434">bpo-17434</a>)</li>
<li><a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.getpeercert" title="ssl.SSLSocket.getpeercert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLSocket.getpeercert()</span></code></a> と <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.do_handshake" title="ssl.SSLSocket.do_handshake"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ssl.SSLSocket.do_handshake()</span></code></a> は、 <code class="docutils literal notranslate"><span class="pre">SSLSocket</span></code> が未接続時に以前は <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> を投げていましたが、 <code class="docutils literal notranslate"><span class="pre">ENOTCONN</span></code> を持った <a class="reference internal" href="../library/exceptions.html#OSError" title="OSError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OSError</span></code></a> を投げるように改められました。加えて <a class="reference internal" href="../library/ssl.html#ssl.SSLSocket.getpeercert" title="ssl.SSLSocket.getpeercert"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getpeercert()</span></code></a> はハンドシェイクが未実施の場合に <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> を投げるようになりました。</li>
<li><a class="reference internal" href="../library/base64.html#base64.b32decode" title="base64.b32decode"><code class="xref py py-func docutils literal notranslate"><span class="pre">base64.b32decode()</span></code></a> が入力文字列が非 b32 文字を含む場合に <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> ではなく <a class="reference internal" href="../library/binascii.html#binascii.Error" title="binascii.Error"><code class="xref py py-exc docutils literal notranslate"><span class="pre">binascii.Error</span></code></a> を投げるようになりました。今回のこの <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> はほか (訳注: if the input is incorrectly padded のとき) の <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> が置き換えられた際に置き換え忘れられたものでした。 (Contributed by Serhiy Storchaka in <a class="reference external" href="https://bugs.python.org/issue18011">bpo-18011</a>.) 注意: この修正は後方互換性を保てないので本来メンテナンスリリースの Python 3.3 には入るべきではなかったのですが、不注意で Python 3.3.3 にも行われてしまいました。</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">file</span></code> 属性が <code class="xref py py-class docutils literal notranslate"><span class="pre">cgi.FieldStorage</span></code> インスタンスがガーベージコレクトされる際に自動的にクローズされるようになりました。FieldStorage インスタンスを生き永らえさせずにそのファイルオブジェクトを <code class="xref py py-class docutils literal notranslate"><span class="pre">cgi.FieldStorage</span></code> から切り離して取り出していたなら、 <code class="xref py py-class docutils literal notranslate"><span class="pre">cgi.FieldStorage</span></code> インスタンス全体を記憶しておくか、あるいは <code class="xref py py-class docutils literal notranslate"><span class="pre">cgi.FieldStorage</span></code> インスタンスがガーベージコレクトされる前にファイル内容を読み込んでおくかしてください。</li>
<li>クローズ済みの SSL ソケットに対する <code class="docutils literal notranslate"><span class="pre">read</span></code> や <code class="docutils literal notranslate"><span class="pre">write</span></code> 呼び出しで、以前のようなミステリアスな <a class="reference internal" href="../library/exceptions.html#AttributeError" title="AttributeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">AttributeError</span></code></a> ではなく、役に立つ <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> を投げるようになりました。 (<a class="reference external" href="https://bugs.python.org/issue9177">bpo-9177</a>)</li>
<li><a class="reference internal" href="../reference/datamodel.html#slice.indices" title="slice.indices"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice.indices()</span></code></a> が巨大な値で <a class="reference internal" href="../library/exceptions.html#OverflowError" title="OverflowError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">OverflowError</span></code></a> を起こすことはなくなりました。この修正からの流れで <a class="reference internal" href="../reference/datamodel.html#slice.indices" title="slice.indices"><code class="xref py py-meth docutils literal notranslate"><span class="pre">slice.indices()</span></code></a> は負の値に対して <a class="reference internal" href="../library/exceptions.html#ValueError" title="ValueError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">ValueError</span></code></a> を投げるようになっています。以前はこれは馬鹿げた値を返していました。 (<a class="reference external" href="https://bugs.python.org/issue14794">bpo-14794</a>)</li>
<li>特殊メソッド <code class="docutils literal notranslate"><span class="pre">__complex__</span></code> が複素数ではなく <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> を返す実装をしているオブジェクトを渡すと <a class="reference internal" href="../library/cmath.html#module-cmath" title="cmath: Mathematical functions for complex numbers."><code class="xref py py-mod docutils literal notranslate"><span class="pre">cmath</span></code></a> 関数ではエラーとなり、 <a class="reference internal" href="../library/functions.html#complex" title="complex"><code class="xref py py-class docutils literal notranslate"><span class="pre">complex</span></code></a> コンストラクタでは受け容れられていましたが、これはいずれも <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> となるように改められました。(<a class="reference external" href="https://bugs.python.org/issue16290">bpo-16290</a>.)</li>
<li>3.2 と 3.3 での <a class="reference internal" href="../library/functions.html#int" title="int"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> コンストラクタが <em>base</em> パラメータとして誤って <a class="reference internal" href="../library/functions.html#float" title="float"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> を許容してしまっていました。それをわざわざやっているとも思えないですが、そうしていたなら今後は <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> になります。 (<a class="reference external" href="https://bugs.python.org/issue16772">bpo-16772</a>)</li>
<li>キーワード専用引数へのデフォルト値が、通常のキーワード引数へのデフォルト値評価の <em>あとで</em> 評価されるようになりました。前ではなく。望むらくは誰一人以前のバギーな振る舞いに頼っちゃうおバカなコードを書いていませんように。願います。 (<a class="reference external" href="https://bugs.python.org/issue16967">bpo-16967</a>)</li>
<li>古いスレッド状態が <a class="reference internal" href="../library/os.html#os.fork" title="os.fork"><code class="xref py py-func docutils literal notranslate"><span class="pre">fork()</span></code></a> 後にクリアされるようになりました。これにより、以前は不適切に永遠に生き残ってしまっていたいくつかのシステムリソース (たとえば、スレッドローカル記憶内に維持されたデータベース接続) が解放されるようになります。 (<a class="reference external" href="https://bugs.python.org/issue17094">bpo-17094</a>.)</li>
<li><code class="docutils literal notranslate"><span class="pre">__annotations__</span></code> 辞書内のパラメータ名が <code class="docutils literal notranslate"><span class="pre">__kwdefaults__</span></code> と同じように適切にマングル化されるようになりました。 (Contributed by Yury Selivanov in <a class="reference external" href="https://bugs.python.org/issue20625">bpo-20625</a>.)</li>
<li><a class="reference internal" href="../library/hashlib.html#hashlib.hash.name" title="hashlib.hash.name"><code class="xref py py-attr docutils literal notranslate"><span class="pre">hashlib.hash.name</span></code></a> が識別子を常に小文字で返すようになりました。以前はいくつかの組み込みハッシュが大文字名を持っていましたが、公式インターフェイスであることから、命名に一貫性を持たせるようにしました。 (<a class="reference external" href="https://bugs.python.org/issue18532">bpo-18532</a>)</li>
<li><a class="reference internal" href="../library/unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">unittest.TestSuite</span></code></a> がその実行後にテストへの参照を取り除くようになったので、テスト集合を再実行するのに <a class="reference internal" href="../library/unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-class docutils literal notranslate"><span class="pre">TestSuite</span></code></a> を再利用してテストをまとめあげていると、テスト失敗するかもしれません。テストスイートはそのような方法で再利用すべきではありません。そのようなことをすればテスト実行間で状態が残ってしまうので、 <a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> 設計の狙いであるテストの独立性を破壊してしまいます。とはいえ、独立性の欠如を受け容れてもいいと思うのであれば、 <a class="reference internal" href="../library/unittest.html#unittest.TestSuite" title="unittest.TestSuite"><code class="xref py py-mod docutils literal notranslate"><span class="pre">TestSuite</span></code></a> をサブクラス化して何もしない <code class="docutils literal notranslate"><span class="pre">_removeTestAtIndex</span></code> を定義することで、古い振る舞いは復元出来ます (<a class="reference internal" href="../library/unittest.html#unittest.TestSuite.__iter__" title="unittest.TestSuite.__iter__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TestSuite.__iter__()</span></code></a> 参照)。 (<a class="reference external" href="https://bugs.python.org/issue11798">bpo-11798</a>)</li>
<li><a class="reference internal" href="../library/unittest.html#module-unittest" title="unittest: Unit testing framework for Python."><code class="xref py py-mod docutils literal notranslate"><span class="pre">unittest</span></code></a> がコマンドライン解析に <a class="reference internal" href="../library/argparse.html#module-argparse" title="argparse: Command-line option and argument parsing library."><code class="xref py py-mod docutils literal notranslate"><span class="pre">argparse</span></code></a> を使うようになりました。このことで、以前は動作していた不当なコマンド形式で許されなくなったものがあります。理屈から言えばこれは後方互換性の問題ではないはずです。許されなくなったコマンド形式は意味をなしていなかったものですから、使われていたとは思えません。</li>
<li>関数 <a class="reference internal" href="../library/re.html#re.split" title="re.split"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.split()</span></code></a>, <a class="reference internal" href="../library/re.html#re.findall" title="re.findall"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.findall()</span></code></a>, <a class="reference internal" href="../library/re.html#re.sub" title="re.sub"><code class="xref py py-func docutils literal notranslate"><span class="pre">re.sub()</span></code></a> と、 <code class="docutils literal notranslate"><span class="pre">match</span></code> オブジェクトのメソッド <code class="xref py py-meth docutils literal notranslate"><span class="pre">group()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">groups()</span></code> は、操作対象が <a class="reference internal" href="../glossary.html#term-bytes-like-object"><span class="xref std std-term">bytes-like object</span></a> である場合に常に <em>bytes</em> オブジェクトを返すようになりました。以前は戻り値型は入力型に合わせられていました。戻り値の型がたとえば <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> になることに依存していたのであれば、コードを修正する必要があります。</li>
<li><a class="reference internal" href="../library/audioop.html#module-audioop" title="audioop: Manipulate raw audio data."><code class="xref py py-mod docutils literal notranslate"><span class="pre">audioop</span></code></a> 関数が文字列を入力として渡すと即座にエラーを投げるようにしました。以前は不規則に後々の処理でようやく失敗していました。 (<a class="reference external" href="https://bugs.python.org/issue16685">bpo-16685</a>)</li>
<li><a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTMLParser</span></code></a> の新規引数 <em>convert_charrefs</em> は現在は後方互換性維持のために <code class="docutils literal notranslate"><span class="pre">False</span></code> をデフォルトとしていますが、最終的には <code class="docutils literal notranslate"><span class="pre">True</span></code> がデフォルトになります。あなたのコードでは <a class="reference internal" href="../library/html.parser.html#html.parser.HTMLParser" title="html.parser.HTMLParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTMLParser</span></code></a> の全ての呼び出しでこれをキーワード引数として明示することをお勧めします。 (<a class="reference external" href="https://bugs.python.org/issue13633">bpo-13633</a>)</li>
<li><a class="reference internal" href="../library/hmac.html#hmac.new" title="hmac.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">hmac.new()</span></code></a> 関数の <em>digestmod</em> 引数からデフォルト値が消える予定です。ので、 <a class="reference internal" href="../library/hmac.html#hmac.new" title="hmac.new"><code class="xref py py-func docutils literal notranslate"><span class="pre">hmac.new()</span></code></a> 呼び出しは常に <em>digestmod</em> を明示するように修正すべきです。 (<a class="reference external" href="https://bugs.python.org/issue17276">bpo-17276</a>)</li>
<li><a class="reference internal" href="../library/sysconfig.html#sysconfig.get_config_var" title="sysconfig.get_config_var"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconfig.get_config_var()</span></code></a> にキー <code class="docutils literal notranslate"><span class="pre">SO</span></code> を渡すことと <a class="reference internal" href="../library/sysconfig.html#sysconfig.get_config_vars" title="sysconfig.get_config_vars"><code class="xref py py-func docutils literal notranslate"><span class="pre">sysconfig.get_config_vars()</span></code></a> の呼び出し結果から <code class="docutils literal notranslate"><span class="pre">SO</span></code> キーを探すことは非推奨です。このキーは文脈依存の <code class="docutils literal notranslate"><span class="pre">EXT_SUFFIX</span></code> または <code class="docutils literal notranslate"><span class="pre">SHLIB_SUFFIX</span></code> で置き換えられるべきです。 (<a class="reference external" href="https://bugs.python.org/issue19555">bpo-19555</a>)</li>
<li><code class="docutils literal notranslate"><span class="pre">open</span></code> 系関数にモード <code class="docutils literal notranslate"><span class="pre">U</span></code> を使っていたコードは修正すべきです。 <code class="docutils literal notranslate"><span class="pre">U</span></code> は Python 3 では無力であり、いずれはこれの使用は例外を投げるようになる予定です。使う関数に依存しますが、 <em>newline</em> 引数を使うか、あるいは必要であればストリームを <a class="reference internal" href="../library/io.html#io.TextIOWrapper" title="io.TextIOWrapper"><code class="xref py py-mod docutils literal notranslate"><span class="pre">TextIOWrapper</span></code></a> でラップしてその <em>newline</em> 引数を使うことで、その古い Python 2 の振る舞いと同等なものを実現出来ます。 (<a class="reference external" href="https://bugs.python.org/issue15204">bpo-15204</a>)</li>
<li>スクリプト内から <code class="docutils literal notranslate"><span class="pre">pyvenv</span></code> を使っていて、pip がインストール <em>されない</em> ことを望むならば、コマンド呼び出しに <code class="docutils literal notranslate"><span class="pre">--without-pip</span></code> を追加しなければなりません。</li>
<li>indent を明示した場合の <a class="reference internal" href="../library/json.html#json.dump" title="json.dump"><code class="xref py py-func docutils literal notranslate"><span class="pre">json.dump()</span></code></a> と <a class="reference internal" href="../library/json.html#json.dumps" title="json.dumps"><code class="xref py py-func docutils literal notranslate"><span class="pre">json.dumps()</span></code></a> のデフォルトの振る舞いが変更されました。要素を区切るカンマが行末に来る場合の後ろに、空白を追加しなくなりました。これはその出力のテストを空白に繊細な比較をすることで行っている場合にだけ問題になります。 (<a class="reference external" href="https://bugs.python.org/issue16333">bpo-16333</a>)</li>
<li><a class="reference internal" href="../library/doctest.html#module-doctest" title="doctest: Test pieces of code within docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code></a> が拡張モジュールの <code class="docutils literal notranslate"><span class="pre">__doc__</span></code> 文字列から doctest を見つけるようになったので、doctest のテストディスカバリが拡張モジュールを含んでいてその中で doctest のようにみえるものが含まれていると、テスト実行時にこれまで見かけたことのないテスト失敗を目にするかもしれません。 (<a class="reference external" href="https://bugs.python.org/issue3158">bpo-3158</a>)</li>
<li><a class="reference internal" href="../library/collections.abc.html#module-collections.abc" title="collections.abc: Abstract base classes for containers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections.abc</span></code></a> モジュールが、Python スタートアップの改善の一環で少々リファクタリングが行われました。これの結果として <a class="reference internal" href="../library/collections.html#module-collections" title="collections: Container datatypes"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a> は自動で <a class="reference internal" href="../library/collections.abc.html#module-collections.abc" title="collections.abc: Abstract base classes for containers"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections.abc</span></code></a> をインポートしなくなりました。もしもこの (文書化されていなかった) 暗黙でのインポートに依存していたのであれば、 <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">collections.abc</span></code> として明示的にインポートを追加する必要があります。 (<a class="reference external" href="https://bugs.python.org/issue20784">bpo-20784</a>)</li>
</ul>
</div>
<div class="section" id="changes-in-the-c-api">
<h3>C API の変更<a class="headerlink" href="#changes-in-the-c-api" title="このヘッドラインへのパーマリンク">¶</a></h3>
<ul class="simple">
<li>いくつかの内部 C API とともに <a class="reference internal" href="../c-api/veryhigh.html#c.PyEval_EvalFrameEx" title="PyEval_EvalFrameEx"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyEval_EvalFrameEx()</span></code></a>, <a class="reference internal" href="../c-api/object.html#c.PyObject_Repr" title="PyObject_Repr"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Repr()</span></code></a>, <a class="reference internal" href="../c-api/object.html#c.PyObject_Str" title="PyObject_Str"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyObject_Str()</span></code></a> に、現在アクティブな例外を黙殺する状況で使われていないことを確かにするためのデバッグアサーションが仕込まれました。アクティブな例外を捨てることが期待されて望ましいケース (たとえば、既にローカルに <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_Fetch" title="PyErr_Fetch"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_Fetch()</span></code></a> で保存済みであるとか、異なる例外に置き換えることが意図である場合) は、アサーション有効でコンパイルされている Python バージョンで実行して、(直接的・間接的によらず) それら操作呼び出しがそのアサーションを発行するのを、明示的に <a class="reference internal" href="../c-api/exceptions.html#c.PyErr_Clear" title="PyErr_Clear"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_Clear()</span></code></a> 呼び出しをすることで潰してください。</li>
<li><a class="reference internal" href="../c-api/exceptions.html#c.PyErr_SetImportError" title="PyErr_SetImportError"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyErr_SetImportError()</span></code></a> が <strong>msg</strong> がセットされていない場合に <a class="reference internal" href="../library/exceptions.html#TypeError" title="TypeError"><code class="xref py py-exc docutils literal notranslate"><span class="pre">TypeError</span></code></a> をセットするようになりました。以前は例外をセットすることなく <code class="docutils literal notranslate"><span class="pre">NULL</span></code> を返すだけでした。</li>
<li><a class="reference internal" href="../c-api/veryhigh.html#c.PyOS_ReadlineFunctionPointer" title="PyOS_ReadlineFunctionPointer"><code class="xref c c-data docutils literal notranslate"><span class="pre">PyOS_ReadlineFunctionPointer</span></code></a> コールバックは、エラー時に <code class="docutils literal notranslate"><span class="pre">NULL</span></code> を返すか <a class="reference internal" href="../c-api/memory.html#c.PyMem_RawMalloc" title="PyMem_RawMalloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMem_RawMalloc()</span></code></a> または <a class="reference internal" href="../c-api/memory.html#c.PyMem_RawRealloc" title="PyMem_RawRealloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMem_RawRealloc()</span></code></a> でアロケートした文字列を返さなければなりません。 <a class="reference internal" href="../c-api/memory.html#c.PyMem_Malloc" title="PyMem_Malloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMem_Malloc()</span></code></a> や <a class="reference internal" href="../c-api/memory.html#c.PyMem_Realloc" title="PyMem_Realloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyMem_Realloc()</span></code></a> でアロケートした文字列はダメです。 (<a class="reference external" href="https://bugs.python.org/issue16742">bpo-16742</a>)</li>
<li><a class="reference internal" href="../c-api/init.html#c.PyThread_set_key_value" title="PyThread_set_key_value"><code class="xref c c-func docutils literal notranslate"><span class="pre">PyThread_set_key_value()</span></code></a> が必ず値をセットするようになりました。Python 3.3 ではこの関数はキーが既存 (で現在値が <code class="docutils literal notranslate"><span class="pre">NULL</span></code> ポインタでない) の場合には何もしませんでした。</li>
<li><a class="reference internal" href="../c-api/veryhigh.html#c.PyFrameObject" title="PyFrameObject"><code class="xref c c-type docutils literal notranslate"><span class="pre">PyFrameObject</span></code></a> 構造体のフィールド <code class="docutils literal notranslate"><span class="pre">f_tstate</span></code> (thread state) が、バグをフィックスするために削除されました: 論拠については <a class="reference external" href="https://bugs.python.org/issue14432">bpo-14432</a> を参照してください。</li>
</ul>
</div>
</div>
<div class="section" id="changed-in-3-4-3">
<h2>3.4.3 の変更<a class="headerlink" href="#changed-in-3-4-3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="pep-476-enabling-certificate-verification-by-default-for-stdlib-http-clients">
<span id="pep-476"></span><h3>PEP 476: stdlib http クライアントが証明書の検証を行うのをデフォルトで有効化<a class="headerlink" href="#pep-476-enabling-certificate-verification-by-default-for-stdlib-http-clients" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><a class="reference internal" href="../library/http.client.html#module-http.client" title="http.client: HTTP and HTTPS protocol client (requires sockets)."><code class="xref py py-mod docutils literal notranslate"><span class="pre">http.client</span></code></a> とこのモジュールを使っている例えば <a class="reference internal" href="../library/urllib.request.html#module-urllib.request" title="urllib.request: Extensible library for opening URLs."><code class="xref py py-mod docutils literal notranslate"><span class="pre">urllib.request</span></code></a> や <a class="reference internal" href="../library/xmlrpc.client.html#module-xmlrpc.client" title="xmlrpc.client: XML-RPC client access."><code class="xref py py-mod docutils literal notranslate"><span class="pre">xmlrpc.client</span></code></a>  が、サーバをプラットフォームが持つ信頼ストアにある CA により署名された証明書で検証し、そのホスト名がリクエストされたホスト名かどうかのチェックをデフォルトで行うようになりました。これは多くのアプリケーションにとって大幅なセキュリティ改善になります。</p>
<p>以前の古い振る舞いが必要なアプリケーションでは、代わりとなるコンテキストを渡せます:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">ssl</span>

<span class="c1"># This disables all verification</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">_create_unverified_context</span><span class="p">()</span>

<span class="c1"># This allows using a specific certificate for the host, which doesn&#39;t need</span>
<span class="c1"># to be in the trust store</span>
<span class="n">context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">(</span><span class="n">cafile</span><span class="o">=</span><span class="s2">&quot;/path/to/file.crt&quot;</span><span class="p">)</span>

<span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s2">&quot;https://invalid-cert&quot;</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What's New In Python 3.4</a><ul>
<li><a class="reference internal" href="#summary-release-highlights">概要 -- リリースハイライト</a></li>
<li><a class="reference internal" href="#new-features">新しい機能</a><ul>
<li><a class="reference internal" href="#pep-453-explicit-bootstrapping-of-pip-in-python-installations">PEP 453: Python インストール時の PIP の明示的なブートストラッピング</a><ul>
<li><a class="reference internal" href="#bootstrapping-pip-by-default">デフォルトでの pip のブートストラッピング</a></li>
<li><a class="reference internal" href="#documentation-changes">ドキュメントの変更</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pep-446-newly-created-file-descriptors-are-non-inheritable">PEP 446: 新規作成されたファイル記述子は継承不可</a></li>
<li><a class="reference internal" href="#improvements-to-codec-handling">Codec 処理の改良</a></li>
<li><a class="reference internal" href="#pep-451-a-modulespec-type-for-the-import-system">PEP 451: インポートシステムのための ModuleSpec 型</a></li>
<li><a class="reference internal" href="#other-language-changes">その他の言語変更</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-modules">新たなモジュール</a><ul>
<li><a class="reference internal" href="#asyncio">asyncio</a></li>
<li><a class="reference internal" href="#ensurepip">ensurepip</a></li>
<li><a class="reference internal" href="#enum">enum</a></li>
<li><a class="reference internal" href="#pathlib">pathlib</a></li>
<li><a class="reference internal" href="#selectors">selectors</a></li>
<li><a class="reference internal" href="#statistics">statistics</a></li>
<li><a class="reference internal" href="#tracemalloc">tracemalloc</a></li>
</ul>
</li>
<li><a class="reference internal" href="#improved-modules">改良されたモジュール</a><ul>
<li><a class="reference internal" href="#abc">abc</a></li>
<li><a class="reference internal" href="#aifc">aifc</a></li>
<li><a class="reference internal" href="#argparse">argparse</a></li>
<li><a class="reference internal" href="#audioop">audioop</a></li>
<li><a class="reference internal" href="#base64">base64</a></li>
<li><a class="reference internal" href="#collections">collections</a></li>
<li><a class="reference internal" href="#colorsys">colorsys</a></li>
<li><a class="reference internal" href="#contextlib">contextlib</a></li>
<li><a class="reference internal" href="#dbm">dbm</a></li>
<li><a class="reference internal" href="#dis">dis</a></li>
<li><a class="reference internal" href="#doctest">doctest</a></li>
<li><a class="reference internal" href="#email">email</a></li>
<li><a class="reference internal" href="#filecmp">filecmp</a></li>
<li><a class="reference internal" href="#functools">functools</a></li>
<li><a class="reference internal" href="#gc">gc</a></li>
<li><a class="reference internal" href="#glob">glob</a></li>
<li><a class="reference internal" href="#hashlib">hashlib</a></li>
<li><a class="reference internal" href="#hmac">hmac</a></li>
<li><a class="reference internal" href="#html">html</a></li>
<li><a class="reference internal" href="#http">http</a></li>
<li><a class="reference internal" href="#idlelib-and-idle">idlelib と IDLE</a></li>
<li><a class="reference internal" href="#importlib">importlib</a></li>
<li><a class="reference internal" href="#inspect">inspect</a></li>
<li><a class="reference internal" href="#ipaddress">ipaddress</a></li>
<li><a class="reference internal" href="#logging">logging</a></li>
<li><a class="reference internal" href="#marshal">marshal</a></li>
<li><a class="reference internal" href="#mmap">mmap</a></li>
<li><a class="reference internal" href="#multiprocessing">multiprocessing</a></li>
<li><a class="reference internal" href="#operator">operator</a></li>
<li><a class="reference internal" href="#os">os</a></li>
<li><a class="reference internal" href="#pdb">pdb</a></li>
<li><a class="reference internal" href="#pickle">pickle</a></li>
<li><a class="reference internal" href="#plistlib">plistlib</a></li>
<li><a class="reference internal" href="#poplib">poplib</a></li>
<li><a class="reference internal" href="#pprint">pprint</a></li>
<li><a class="reference internal" href="#pty">pty</a></li>
<li><a class="reference internal" href="#pydoc">pydoc</a></li>
<li><a class="reference internal" href="#re">re</a></li>
<li><a class="reference internal" href="#resource">resource</a></li>
<li><a class="reference internal" href="#select">select</a></li>
<li><a class="reference internal" href="#shelve">shelve</a></li>
<li><a class="reference internal" href="#shutil">shutil</a></li>
<li><a class="reference internal" href="#smtpd">smtpd</a></li>
<li><a class="reference internal" href="#smtplib">smtplib</a></li>
<li><a class="reference internal" href="#socket">socket</a></li>
<li><a class="reference internal" href="#sqlite3">sqlite3</a></li>
<li><a class="reference internal" href="#ssl">ssl</a></li>
<li><a class="reference internal" href="#stat">stat</a></li>
<li><a class="reference internal" href="#struct">struct</a></li>
<li><a class="reference internal" href="#subprocess">subprocess</a></li>
<li><a class="reference internal" href="#sunau">sunau</a></li>
<li><a class="reference internal" href="#sys">sys</a></li>
<li><a class="reference internal" href="#tarfile">tarfile</a></li>
<li><a class="reference internal" href="#textwrap">textwrap</a></li>
<li><a class="reference internal" href="#threading">threading</a></li>
<li><a class="reference internal" href="#traceback">traceback</a></li>
<li><a class="reference internal" href="#types">types</a></li>
<li><a class="reference internal" href="#urllib">urllib</a></li>
<li><a class="reference internal" href="#unittest">unittest</a></li>
<li><a class="reference internal" href="#venv">venv</a></li>
<li><a class="reference internal" href="#wave">wave</a></li>
<li><a class="reference internal" href="#weakref">weakref</a></li>
<li><a class="reference internal" href="#xml-etree">xml.etree</a></li>
<li><a class="reference internal" href="#zipfile">zipfile</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cpython-implementation-changes">CPython の実装の変更</a><ul>
<li><a class="reference internal" href="#pep-445-customization-of-cpython-memory-allocators">PEP 445: CPython のメモリアロケータのカスタマイズ</a></li>
<li><a class="reference internal" href="#pep-442-safe-object-finalization">PEP 442: オブジェクトの安全なファイナライゼーション</a></li>
<li><a class="reference internal" href="#pep-456-secure-and-interchangeable-hash-algorithm">PEP 456: 安全で取り換え可能なハッシュアルゴリズム</a></li>
<li><a class="reference internal" href="#pep-436-argument-clinic">PEP 436: Argument Clinic</a></li>
<li><a class="reference internal" href="#other-build-and-c-api-changes">その他のビルド並びに C API の変更</a></li>
<li><a class="reference internal" href="#other-improvements">その他の改善</a></li>
<li><a class="reference internal" href="#significant-optimizations">大幅な最適化</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deprecated">非推奨</a><ul>
<li><a class="reference internal" href="#deprecations-in-the-python-api">Python API の非推奨項目</a></li>
<li><a class="reference internal" href="#deprecated-features">非推奨の機能</a></li>
</ul>
</li>
<li><a class="reference internal" href="#removed">削除</a><ul>
<li><a class="reference internal" href="#operating-systems-no-longer-supported">サポートされなくなったオペレーティングシステム</a></li>
<li><a class="reference internal" href="#api-and-feature-removals">API と機能の削除</a></li>
<li><a class="reference internal" href="#code-cleanups">コードの整理</a></li>
</ul>
</li>
<li><a class="reference internal" href="#porting-to-python-3-4">Python 3.4 への移植</a><ul>
<li><a class="reference internal" href="#changes-in-python-command-behavior">'python' コマンドの挙動の変更</a></li>
<li><a class="reference internal" href="#changes-in-the-python-api">Python API の変更</a></li>
<li><a class="reference internal" href="#changes-in-the-c-api">C API の変更</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changed-in-3-4-3">3.4.3 の変更</a><ul>
<li><a class="reference internal" href="#pep-476-enabling-certificate-verification-by-default-for-stdlib-http-clients">PEP 476: stdlib http クライアントが証明書の検証を行うのをデフォルトで有効化</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のトピックへ</h4>
  <p class="topless"><a href="3.5.html"
                        title="前の章へ">What's New In Python 3.5</a></p>
  <h4>次のトピックへ</h4>
  <p class="topless"><a href="3.3.html"
                        title="次の章へ">What's New In Python 3.3</a></p>
  <div role="note" aria-label="source link">
    <h3>このページ</h3>
    <ul class="this-page-menu">
      <li><a href="../bugs.html">バグ報告</a></li>
      <li>
        <a href="https://github.com/python/cpython/blob/3.8/Doc/whatsnew/3.4.rst"
            rel="nofollow">ソースコードを表示
        </a>
      </li>
    </ul>
  </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>  
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>ナビゲーション</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="総合索引"
             >索引</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Pythonモジュール索引"
             >モジュール</a> |</li>
        <li class="right" >
          <a href="3.3.html" title="What&#39;s New In Python 3.3"
             >次へ</a> |</li>
        <li class="right" >
          <a href="3.5.html" title="What&#39;s New In Python 3.5"
             >前へ</a> |</li>

    <li><img src="../_static/py.png" alt=""
             style="vertical-align: middle; margin-top: -1px"/></li>
    <li><a href="https://www.python.org/">Python</a> &#187;</li>
    

    <li>
      <a href="../index.html">3.8.3rc1 Documentation</a> &#187;
    </li>

          <li class="nav-item nav-item-1"><a href="index.html" >What's New in Python</a> &#187;</li>
    <li class="right">
        

    <div class="inline-search" style="display: none" role="search">
        <form class="inline-search" action="../search.html" method="get">
          <input placeholder="クイック検索" type="text" name="q" />
          <input type="submit" value="検索" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
    </div>
    <script type="text/javascript">$('.inline-search').show(0);</script>
         |
    </li>

      </ul>
    </div>  
    <div class="footer">
    &copy; <a href="../copyright.html">著作権</a> 2001-2020, Python Software Foundation.
    <br />

    The Python Software Foundation is a non-profit corporation.
<a href="https://www.python.org/psf/donations/">Please donate.</a>
<br />
    <br />

    最終更新: 5月 13, 2020
    <a href="https://docs.python.org/3/bugs.html">Found a bug</a>?
    <br />

    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 1.8.2.
    </div>

  </body>
</html>